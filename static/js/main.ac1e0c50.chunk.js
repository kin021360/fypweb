(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){"use strict";(function(e){var n=a(9),r=a(10),i=a(265),o=a.n(i),c=function(){function t(){Object(n.a)(this,t)}return Object(r.a)(t,null,[{key:"gzip",value:function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;return n="string"===typeof t?e.from(t,"utf8"):t,new Promise(function(e,t){o.a.gzip(n,function(n,r){if(n)return t(n);e(a?r.toString("base64"):r)})})}},{key:"unzip",value:function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;return n="string"===typeof t?e.from(t,"base64"):t,new Promise(function(e,t){o.a.unzip(n,function(n,r){if(n)return t(n);e(a?r.toString("utf8"):r)})})}}]),t}();t.a=c}).call(this,a(37).Buffer)},399:function(e,t,a){e.exports=a.p+"static/media/logox.65db1446.svg"},400:function(e,t,a){"use strict";(function(e){var n,r=a(22),i=a.n(r),o=a(46),c=a(53),s=a(9),l=a(10),u=a(30),p=a(28),d=a(31),h=a(0),m=a.n(h),f=a(20),g=a(61),b=a(150),y=(a(691),a(692),a(693),a(70)),v=a(29),O=a(190),j=a.n(O),E=a(77),S=a.n(E),w=a(41),k=a(52),C=a(119);function T(e){return e.blocks.map(function(e){return"unstyled"===e.type&&delete e.type,0===e.depth&&delete e.depth,0===e.inlineStyleRanges.length&&delete e.inlineStyleRanges,0===e.entityRanges.length&&delete e.entityRanges,0===Object.keys(e.data).length&&delete e.data,e}),e}var x=Object(f.b)("navState","createReplyActionState","threadListState","threadBodyState","notificationSnackState")(n=Object(f.c)(n=function(t){function a(){var t,n;Object(s.a)(this,a);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return(n=Object(u.a)(this,(t=Object(p.a)(a)).call.apply(t,[this].concat(l)))).state={title:"",threadTitleInputErr:!1,editorState:g.EditorState.createEmpty()},n.onEditorStateChange=function(e){n.setState({editorState:e})},n.handleChange=function(e){return function(t){n.setState(Object(c.a)({},e,t.target.value))}},n.submitNewThread=Object(o.a)(i.a.mark(function t(){var a,r,o,c,s,l,u,p,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.props,r=a.createReplyActionState,o=a.threadListState,c=a.notificationSnackState,s=n.state.title.trim()){t.next=6;break}return n.setState({threadTitleInputErr:!0}),c.triggerOpen("Title cannot contain space only!"),t.abrupt("return");case 6:return JSON.stringify(Object(g.convertToRaw)(n.state.editorState.getCurrentContent())),T(l=Object(g.convertToRaw)(n.state.editorState.getCurrentContent())),t.next=11,C.a.gzip(JSON.stringify(l));case 11:u=t.sent,p=(new Date).getTime().toString(),d=w.a.signSignature(e.concat([e.from(w.a.getUserInfo().userAddr,"utf8"),e.from(s,"utf8"),e.from(u,"utf8"),e.from(p,"utf8")])),k.a.submitNewThread(w.a.getUserInfo().userAddr,s,u,p,d).then(function(){r.setModalEditorClose(),o.callUpdateThreadList(),c.triggerOpen("Create new thread successfully!")});case 15:case"end":return t.stop()}},t,this)})),n.submitNewReply=Object(o.a)(i.a.mark(function t(){var a,r,o,c,s,l,u,p,d,h;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.props,r=a.createReplyActionState,o=a.threadBodyState,c=a.notificationSnackState,s=w.a.getUserInfo(),l=s.userAddr,T(u=Object(g.convertToRaw)(n.state.editorState.getCurrentContent())),t.next=6,C.a.gzip(JSON.stringify(u));case 6:p=t.sent,d=(new Date).getTime().toString(),h=w.a.signSignature(e.concat([e.from(l,"utf8"),e.from(o.threadAddr,"utf8"),e.from(p,"utf8"),e.from(d,"utf8")])),k.a.submitNewReply(l,o.threadAddr,p,d,h).then(function(){r.setModalEditorClose(),o.callUpdateThreadBody(),c.triggerOpen("Reply successfully!")});case 10:case"end":return t.stop()}},t,this)})),n.submitToBC=function(){var e=n.props.navState;"add"===e.createReplyBtnState?n.submitNewThread():"reply"===e.createReplyBtnState&&n.submitNewReply()},n}return Object(d.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.navState,n=(e.createReplyActionState,this.state.editorState),r="add"===a.createReplyBtnState?m.a.createElement(S.a,{required:!0,fullWidth:!0,label:"Title",className:t.textField,margin:"normal",autoComplete:"off",onChange:this.handleChange("title"),error:this.state.threadTitleInputErr}):"";return m.a.createElement(h.Fragment,null,r,m.a.createElement(b.Editor,{editorState:n,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:this.onEditorStateChange,editorStyle:{border:"2px solid #F1F1F1",height:"30vh"}}),m.a.createElement(y.a,{variant:"contained",onClick:this.submitToBC,style:{backgroundColor:"#ffc400"}},a.getModalEditorBtnTxt,m.a.createElement(j.a,{className:t.sendIcon})))}}]),a}(h.Component))||n)||n;t.a=Object(v.withStyles)(function(e){return{textField:{marginRight:e.spacing.unit},sendIcon:{marginLeft:e.spacing.unit}}})(x)}).call(this,a(37).Buffer)},41:function(e,t,a){"use strict";(function(e){var n=a(22),r=a.n(n),i=a(46),o=window.gapi,c=a(483),s="config.json",l=null,u="",p={username:"",userAddr:"",createTime:"",publicKeyBuff:null},d=null,h=null,m="",f="",g=!1;function b(){return!!l&&l.isSignedIn.get()}function y(){return l.currentUser.get().hasGrantedScopes("https://www.googleapis.com/auth/drive.appdata")}function v(){var e=o.client.drive.files.list({spaces:"appDataFolder",fields:"files(id, name)"});return new Promise(function(t,a){e.execute(function(e){if(e.files.length>0)return t(e.files[0].id);t()})})}function O(){return function(e){var t=o.client.drive.files.get({fileId:e,alt:"media"});return new Promise(function(e,a){t.execute(function(t){e(t.result)})})}(u).then(function(t){return function(e){return["publicKey","secretKey","createTime"].some(function(t){if(!e[t])return!0})}(t)?(g=!1,!1):(m=t.publicKey,f=t.secretKey,d=e.from(m,"base64"),h=e.from(f,"base64"),p.username=t.username,p.userAddr=t.userAddr,p.createTime=t.createTime,p.publicKeyBuff=d,g=!0,!0)})}function j(){var e=o.client.drive.files.create({resource:{name:s,parents:["appDataFolder"]},fields:"id"});return console.log("create config..."),new Promise(function(t,a){e.execute(function(e){t(e.id)})})}function E(e,t){var a=o.client.request({path:"/upload/drive/v3/files/"+e,method:"PATCH",params:{uploadType:"media"},body:t});return console.log("upload config..."),new Promise(function(e,t){a.execute(function(t){e(t)})})}function S(){return(S=Object(i.a)(r.a.mark(function t(a,n,i,o){var c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=u,t.t0){t.next=5;break}return t.next=4,j();case 4:t.t0=t.sent;case 5:return c=t.t0,d=e.from(n.publicKey),h=e.from(n.secretKey),m=d.toString("base64"),f=h.toString("base64"),p.username=a,p.userAddr=o,p.createTime=i,p.publicKeyBuff=d,t.next=16,E(c,{username:a,publicKey:m,secretKey:f,createTime:i,userAddr:o});case 16:u=c;case 17:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function w(){return(w=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:if(t=e.sent){e.next=6;break}return g=!1,e.abrupt("return",!1);case 6:return u=t,e.abrupt("return",O());case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}t.a={init:function(e){o.load("client:auth2",function(){o.client.init({discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],clientId:"559605306816-6kkqs7b13i832b96t3qsj50h97jlh1sc.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.appdata"}).then(function(){(l=o.auth2.getAuthInstance()).isSignedIn.listen(function(t){e(t&&y())}),e(b()&&y())})})},isSignedIn:b,isAuthorized:y,handleAuthClick:function(){l.isSignedIn.get()?l.signOut():l.signIn()},GoogleAuth:l,userPrepare:function(){return w.apply(this,arguments)},createKeyPair:function(){return c.sign.keyPair()},trySetCredential:O,register:function(e,t,a,n){return S.apply(this,arguments)},signSignature:function(t,a){var n=t;"string"===typeof n&&(n=e.from(t,"utf8"));var r=c.sign.detached(n,a||h);return e.from(r).toString("base64")},isRegistered:function(){return g},getUserInfo:function(){return p},clearState:function(){u="",p={username:"",userAddr:"",createTime:"",publicKeyBuff:null},d=null,h=null,m="",f="",g=!1}}}).call(this,a(37).Buffer)},410:function(e,t,a){"use strict";(function(e){var n,r,i=a(22),o=a.n(i),c=a(53),s=a(46),l=a(9),u=a(10),p=a(30),d=a(28),h=a(31),m=a(0),f=a.n(m),g=(a(3),a(20)),b=a(61),y=a(150),v=a(29),O=a(32),j=a.n(O),E=a(147),S=a.n(E),w=a(101),k=a.n(w),C=a(103),T=a.n(C),x=a(186),R=a.n(x),A=a(102),B=a.n(A),I=a(66),N=a.n(I),U=a(99),P=a.n(U),L=a(100),D=a.n(L),M=a(191),F=a.n(M),z=a(185),K=a.n(z),q=a(151),W=a.n(q),G=a(412),V=a.n(G),H=a(413),Y=a.n(H),J=a(411),_=a.n(J),$=a(52),Q=a(119),X=a(41),Z=function(e){return{gridContainer:{flexGrow:1,marginTop:5},gridItem:{width:130*e.spacing.unit,maxWidth:"100%",marginBottom:10},card:{padding:2*e.spacing.unit},cardContent:{},refreshBtnDiv:{padding:3*e.spacing.unit},fabGreen:{color:e.palette.common.white,backgroundColor:F.a[500],"&:hover":{backgroundColor:F.a[600]},display:"flex",margin:"0 auto"},circularProgress:{display:"block",margin:"0 auto"}}},ee=Object(g.b)("navState","threadBodyState")(n=Object(g.c)(n=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={replyPosts:[],totalCount:0,finished:!1},a.updateRepliedPosts=function(){var e=a.props.threadAddr;a.setState({finished:!1}),$.a.getRepliedPostsWithUserInfo(e).then(function(e){var t=[];e.posts.forEach(function(e){return t.push(Q.a.unzip(e.postContent))}),Promise.all(t).then(function(t){e.posts.map(function(e,a){return e.postContent=b.EditorState.createWithContent(Object(b.convertFromRaw)(JSON.parse(t[a]))),e}),a.setState({replyPosts:e.posts,totalCount:e.totalCount,finished:!0})})})},e.threadBodyState.bindUpdateThreadBodyFunc(a.updateRepliedPosts),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.updateRepliedPosts()}},{key:"render",value:function(){var e=this.props.classes;return f.a.createElement(m.Fragment,null,this.state.replyPosts.map(function(t,a){return f.a.createElement(j.a,{key:t.postAddr,item:!0,className:e.gridItem},f.a.createElement(S.a,{elevation:24,className:e.card},f.a.createElement(k.a,{avatar:f.a.createElement(B.a,{"aria-label":"Recipe"},f.a.createElement(W.a,null)),action:"#"+(2+a),title:t.userInfo.username,subheader:t.requestTime.calendar()}),f.a.createElement(T.a,{className:e.cardContent},f.a.createElement(y.Editor,{toolbarHidden:!0,editorState:t.postContent,readOnly:!0}))))}),f.a.createElement(j.a,{item:!0,className:e.gridItem},f.a.createElement("div",{className:e.refreshBtnDiv},this.state.finished?f.a.createElement(P.a,{key:"inherit",in:!0,unmountOnExit:!0},f.a.createElement(D.a,{onClick:this.updateRepliedPosts,className:e.fabGreen,color:"inherit"},f.a.createElement(_.a,null))):f.a.createElement(K.a,{size:56,className:e.circularProgress}))))}}]),t}(m.Component))||n)||n,te=Object(v.withStyles)(Z)(ee),ae=Object(g.b)("navState","threadBodyState","googleOAuthState","notificationSnackState")(r=Object(g.c)(r=function(t){function a(){var t,n;Object(l.a)(this,a);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return(n=Object(p.a)(this,(t=Object(d.a)(a)).call.apply(t,[this].concat(i)))).state={authorAddr:"",threadAddr:"",threadContent:b.EditorState.createEmpty(),threadIndex:"",threadTitle:"",requestTime:"",authorInfo:{},up:0,down:0},n.submitVote=function(){var t=Object(s.a)(o.a.mark(function t(a,r){var i,s,l,u,p,d,h,m;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.props,s=i.googleOAuthState,l=i.notificationSnackState,s.isRegistered){t.next=3;break}return t.abrupt("return",l.triggerOpen("Please login first!"));case 3:return t.prev=3,u=X.a.getUserInfo(),p=u.userAddr,d=n.props.match.params.threadAddr,h=(new Date).getTime().toString(),m=X.a.signSignature(e.concat([e.from(p,"utf8"),e.from(d,"utf8"),e.from(a,"utf8"),e.from(h,"utf8")])),t.next=10,$.a.submitNewVote(p,d,a,h,m).then(function(){n.setState(Object(c.a)({},r,n.state[r]+1)),l.triggerOpen("Vote the thread successfully!")});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),l.showUnknownError();case 15:case"end":return t.stop()}},t,this,[[3,12]])}));return function(e,a){return t.apply(this,arguments)}}(),n.submitUpVote=function(){n.submitVote("1","up")},n.submitDownVote=function(){n.submitVote("-1","down")},n}return Object(h.a)(a,t),Object(u.a)(a,[{key:"componentWillMount",value:function(){this.props.threadBodyState.setThreadAddr(this.props.match.params.threadAddr)}},{key:"componentDidMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,a,n,r,i,c,s,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.navState,n=t.notificationSnackState,a.setIndexTitleMode(!1),a.updateNavTitle(),a.setReplyBtnState(),r=this.props.match.params.threadAddr,e.prev=5,e.next=8,$.a.getThread(r);case 8:return i=e.sent,a.updateNavTitle(i.threadTitle),e.next=12,Q.a.unzip(i.threadContent);case 12:return c=e.sent,i.threadContent=b.EditorState.createWithContent(Object(b.convertFromRaw)(JSON.parse(c))),this.setState(i),e.next=17,$.a.getUserInfo(i.authorAddr);case 17:return s=e.sent,this.setState({authorInfo:s}),e.next=21,$.a.getTotalVoted(r);case 21:l=e.sent,this.setState({up:l.up,down:l.down}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),n.showUnknownError();case 28:case"end":return e.stop()}},e,this,[[5,25]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.props.navState;e.updateNavTitle(),e.setIndexTitleMode(!0),e.clearCreateReplyBtnState()}},{key:"render",value:function(){var e=this.props.classes;return f.a.createElement(j.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:e.gridContainer},f.a.createElement(j.a,{item:!0,className:e.gridItem},f.a.createElement(S.a,{className:e.card,elevation:24},f.a.createElement(k.a,{avatar:f.a.createElement(B.a,{"aria-label":"Recipe"},f.a.createElement(W.a,null)),action:"#1",title:this.state.authorInfo.username,subheader:this.state.requestTime?this.state.requestTime.calendar():this.state.requestTime}),f.a.createElement(T.a,{className:e.cardContent},f.a.createElement(y.Editor,{toolbarHidden:!0,editorState:this.state.threadContent,readOnly:!0})),f.a.createElement(R.a,{className:e.actions,disableActionSpacing:!0},f.a.createElement(N.a,{onClick:this.submitUpVote,"aria-label":"Vote Up"},f.a.createElement(V.a,null)),this.state.up,f.a.createElement(N.a,{onClick:this.submitDownVote,"aria-label":"Vote Down"},f.a.createElement(Y.a,null)),this.state.down))),f.a.createElement(te,{threadAddr:this.props.match.params.threadAddr}))}}]),a}(m.Component))||r)||r;t.a=Object(v.withStyles)(Z)(ae)}).call(this,a(37).Buffer)},414:function(e,t,a){"use strict";(function(e){var n,r=a(22),i=a.n(r),o=a(46),c=a(9),s=a(10),l=a(30),u=a(28),p=a(31),d=a(195),h=a(0),m=a.n(h),f=a(20),g=(a(3),a(940)),b=a(937),y=a(70),v=a(29),O=a(190),j=a.n(O),E=a(45),S=a.n(E),w=a(32),k=a.n(w),C=a(19),T=a.n(C),x=a(77),R=a.n(x),A=a(67),B=a.n(A),I=a(187),N=a.n(I),U=a(188),P=a.n(U),L=a(41),D=a(52),M=Object(f.b)("navState","googleOAuthState","notificationSnackState")(n=function(t){function a(){var t,n;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),p=0;p<r;p++)s[p]=arguments[p];return(n=Object(l.a)(this,(t=Object(u.a)(a)).call.apply(t,[this].concat(s)))).state={aggered:!1,inputUsername:"",inputError:!1,disableBtn:!1,disableCheckbox:!1,disableInput:!1},n.inputUsernameChange=function(e){n.setState({inputUsername:e.target.value,inputError:!1})},n.checkboxChange=function(e){n.setState({aggered:e.target.checked})},n.handleBtnSubmit=function(){var t=Object(o.a)(i.a.mark(function t(a){var r,o,c,s,l,u,p,d,h,m,f;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.props,o=r.history,c=r.googleOAuthState,s=r.notificationSnackState,n.state.inputUsername&&a.preventDefault(),l=n.state.inputUsername.trim()){t.next=7;break}return n.setState({inputError:!0}),s.triggerOpen("Username cannot contain space only!"),t.abrupt("return");case 7:return n.setState({disableBtn:!0,disableCheckbox:!0,disableInput:!0}),u=L.a.createKeyPair(),p=e.from(u.publicKey).toString("base64"),d=(new Date).getTime().toString(),h=e.concat([e.from(l,"utf8"),e.from(u.publicKey),e.from(d,"utf8")]),m=L.a.signSignature(h,u.secretKey),t.next=15,D.a.submitNewUserContract(l,p,d,m);case 15:return f=t.sent,console.log(f),t.next=19,L.a.register(l,u,d,f.data.hash);case 19:c.isRegistered=!0,c.setUserInfo(L.a.getUserInfo()),s.triggerOpen("Registration succeeded!"),o.push("/");case 23:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n}return Object(p.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.navState,a=e.googleOAuthState,n=e.notificationSnackState;t.updateNavTitle(),a.isSignedIn&&!a.isRegistered&&n.triggerOpen("Please complete the registration. Thanks.")}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.googleOAuthState;return!a.isSignedIn||a.isRegistered?m.a.createElement(g.a,{to:"/"}):m.a.createElement(k.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:t.gridContainer},m.a.createElement(k.a,{item:!0,className:t.gridItem},m.a.createElement(S.a,{elevation:24,square:!0,className:t.paper},m.a.createElement(T.a,{variant:"h5",align:"center"},"Registration"),m.a.createElement(B.a,{style:{marginTop:"2%"}}),m.a.createElement("form",{action:"#",className:t.container,autoComplete:"off"},m.a.createElement(R.a,{label:"Enter your username",error:this.state.inputError,className:t.textField,disabled:this.state.disableInput,margin:"normal",variant:"outlined",type:"text",fullWidth:!0,required:!0,onChange:this.inputUsernameChange}),m.a.createElement(N.a,{className:t.checkbox,control:m.a.createElement(P.a,{onChange:this.checkboxChange,disabled:this.state.disableCheckbox}),label:m.a.createElement("div",null,"I accept and agree to the ",m.a.createElement(b.a,{to:"/terms"},"Term of Service"),".")}),m.a.createElement(y.a,{disabled:!this.state.aggered||this.state.disableBtn,type:"submit",variant:"contained",className:t.submitBtn,onClick:this.handleBtnSubmit,color:"primary"},"Continue",m.a.createElement(j.a,{className:t.sendIcon}))))))}}]),a}(h.Component))||n;t.a=Object(v.withStyles)(function(e){return{gridContainer:{flexGrow:1,marginTop:20},gridItem:{height:"40%",width:"40%",marginBottom:10},paper:Object(d.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},checkbox:{width:"100%",marginLeft:e.spacing.unit,marginRight:e.spacing.unit},submitBtn:{margin:"0 auto"},sendIcon:{marginLeft:e.spacing.unit}}})(M)}).call(this,a(37).Buffer)},472:function(e,t,a){e.exports=a(931)},484:function(e,t){},485:function(e,t,a){},487:function(e,t,a){},52:function(e,t,a){"use strict";var n=a(22),r=a.n(n),i=a(46),o=a(9),c=a(10),s=a(695),l=a(146),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localhost",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(o.a)(this,e),this.baseURL="".concat(n?"https":"http","://").concat(t).concat(a?":"+a:a,"/"),n&&(this.baseURL="https://".concat(t,"/"))}return Object(c.a)(e,[{key:"getRecentThreads",value:function(){var e=Object(i.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get(this.baseURL+"api/recent-threads");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getThread",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={threadAddr:t},e.next=3,s.get(this.baseURL+"api/thread",{params:a});case 3:return(n=e.sent.data).requestTime=l(parseInt(n.requestTime)),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={userAddr:t},e.next=3,s.get(this.baseURL+"api/user-info",{params:a});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRepliedPosts",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a,n,i,o,c=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:1,n=c.length>2&&void 0!==c[2]?c[2]:100,i={threadAddr:t,page:a,perPage:n},e.next=5,s.get(this.baseURL+"api/replied-posts",{params:i});case 5:return(o=e.sent.data).posts.map(function(e){return e.requestTime=l(parseInt(e.requestTime)),e}),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRepliedPostsWithUserInfo",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a,n,i,o,c,s=this,l=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:1,n=l.length>2&&void 0!==l[2]?l[2]:100,e.next=4,this.getRepliedPosts(t,a,n);case 4:if(i=e.sent){e.next=7;break}return e.abrupt("return",{});case 7:return o=[],i.posts.forEach(function(e){o.push(s.getUserInfo(e.userAddr))}),e.next=11,Promise.all(o);case 11:return c=e.sent,i.posts.map(function(e,t){return e.userInfo=c[t],delete e.userInfo.publicKeyBase64,e}),e.abrupt("return",i);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalVoted",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={threadAddr:t},e.next=3,s.get(this.baseURL+"api/total-voted",{params:a});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitNewUserContract",value:function(e,t,a,n){return s.post(this.baseURL+"api/new-user-contract",{username:e,publicKey:t,requestTime:a,signature:n})}},{key:"submitNewThread",value:function(e,t,a,n,r){return s.post(this.baseURL+"api/new-thread",{authorAddr:e,threadTitle:t,threadContent:a,requestTime:n,signature:r})}},{key:"submitNewReply",value:function(e,t,a,n,r){return s.post(this.baseURL+"api/new-reply-post",{userAddr:e,threadAddr:t,postContent:a,requestTime:n,signature:r})}},{key:"submitNewVote",value:function(e,t,a,n,r){return s.post(this.baseURL+"api/new-vote",{userAddr:e,threadAddr:t,vote:a,requestTime:n,signature:r})}}]),e}();t.a=new u("vv.nathanlam11.tk/fyp","",!0)},714:function(e,t){},716:function(e,t){},777:function(e,t,a){},884:function(e,t){},885:function(e,t){},931:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(10),i=a(30),o=a(28),c=a(31);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s,l,u,p,d,h,m,f,g,b,y,v,O,j,E,S,w,k,C,T,x,R,A,B,I,N,U,P,L,D,M,F,z,K,q,W,G,V,H,Y,J,_,$,Q,X,Z=a(0),ee=a.n(Z),te=a(943),ae=a(942),ne=a(938),re=a(25),ie=a.n(re),oe=a(20),ce=a(88),se=(a(477),a(49)),le=a(14),ue=(a(121),a(6)),pe=(s=ue.d.bound,l=ue.d.bound,u=ue.d.bound,p=ue.d.bound,d=ue.d.bound,h=ue.d.bound,m=function(){function e(){Object(n.a)(this,e),Object(se.a)(this,"navTitle",f,this),Object(se.a)(this,"indexTitleMode",g,this),Object(se.a)(this,"createReplyBtnState",b,this)}return Object(r.a)(e,[{key:"updateNavTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.navTitle=e}},{key:"setIndexTitleMode",value:function(e){this.indexTitleMode=e}},{key:"setCreateBtnState",value:function(){this.createReplyBtnState="add"}},{key:"setReplyBtnState",value:function(){this.createReplyBtnState="reply"}},{key:"clearCreateReplyBtnState",value:function(){this.createReplyBtnState=""}},{key:"createReplyBtnClick",value:function(){console.log("createReplyBtnClick")}},{key:"getModalEditorTitle",get:function(){return"add"===this.createReplyBtnState?"New Thread:":"reply"===this.createReplyBtnState?"New Reply:":""}},{key:"getModalEditorBtnTxt",get:function(){return"add"===this.createReplyBtnState?"Create":"reply"===this.createReplyBtnState?"Reply":""}}]),e}(),f=Object(le.a)(m.prototype,"navTitle",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=Object(le.a)(m.prototype,"indexTitleMode",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=Object(le.a)(m.prototype,"createReplyBtnState",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(le.a)(m.prototype,"updateNavTitle",[s],Object.getOwnPropertyDescriptor(m.prototype,"updateNavTitle"),m.prototype),Object(le.a)(m.prototype,"setIndexTitleMode",[l],Object.getOwnPropertyDescriptor(m.prototype,"setIndexTitleMode"),m.prototype),Object(le.a)(m.prototype,"setCreateBtnState",[u],Object.getOwnPropertyDescriptor(m.prototype,"setCreateBtnState"),m.prototype),Object(le.a)(m.prototype,"setReplyBtnState",[p],Object.getOwnPropertyDescriptor(m.prototype,"setReplyBtnState"),m.prototype),Object(le.a)(m.prototype,"clearCreateReplyBtnState",[d],Object.getOwnPropertyDescriptor(m.prototype,"clearCreateReplyBtnState"),m.prototype),Object(le.a)(m.prototype,"createReplyBtnClick",[h],Object.getOwnPropertyDescriptor(m.prototype,"createReplyBtnClick"),m.prototype),Object(le.a)(m.prototype,"getModalEditorTitle",[ue.e],Object.getOwnPropertyDescriptor(m.prototype,"getModalEditorTitle"),m.prototype),Object(le.a)(m.prototype,"getModalEditorBtnTxt",[ue.e],Object.getOwnPropertyDescriptor(m.prototype,"getModalEditorBtnTxt"),m.prototype),m),de=a(41),he=(y=ue.d.bound,v=ue.d.bound,O=ue.d.bound,j=ue.d.bound,E=ue.d.bound,S=function(){function e(){Object(n.a)(this,e),Object(se.a)(this,"signinStatus",w,this),Object(se.a)(this,"loginBtnStr",k,this),Object(se.a)(this,"isSignedIn",C,this),Object(se.a)(this,"isRegistered",T,this),Object(se.a)(this,"userInfo",x,this)}return Object(r.a)(e,[{key:"setUserInfo",value:function(e){var t=e.username,a=void 0===t?"":t,n=e.userAddr,r=void 0===n?"":n,i=e.createTime,o=void 0===i?"":i,c=e.publicKeyBuff,s=void 0===c?null:c;this.userInfo.username=a,this.userInfo.userAddr=r,this.userInfo.createTime=o,this.userInfo.publicKeyBuff=s}},{key:"onLoginSuccess",value:function(){this.signinStatus="You are currently signed in and have granted access to this app.",this.loginBtnStr="Logout",this.isSignedIn=!0}},{key:"onLoggedOut",value:function(){this.signinStatus="You have not authorized this app or you are signed out.",this.loginBtnStr="Login",this.isSignedIn=!1}},{key:"onClickOAuth",value:function(){de.a.handleAuthClick()}},{key:"clearState",value:function(){this.signinStatus="",this.loginBtnStr="Login",this.isSignedIn=!1,this.isRegistered=!1,this.userInfo={username:"",userAddr:"",createTime:"",publicKeyBuff:null}}}]),e}(),w=Object(le.a)(S.prototype,"signinStatus",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=Object(le.a)(S.prototype,"loginBtnStr",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=Object(le.a)(S.prototype,"isSignedIn",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=Object(le.a)(S.prototype,"isRegistered",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=Object(le.a)(S.prototype,"userInfo",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",userAddr:"",createTime:"",publicKeyBuff:null}}}),Object(le.a)(S.prototype,"setUserInfo",[y],Object.getOwnPropertyDescriptor(S.prototype,"setUserInfo"),S.prototype),Object(le.a)(S.prototype,"onLoginSuccess",[v],Object.getOwnPropertyDescriptor(S.prototype,"onLoginSuccess"),S.prototype),Object(le.a)(S.prototype,"onLoggedOut",[O],Object.getOwnPropertyDescriptor(S.prototype,"onLoggedOut"),S.prototype),Object(le.a)(S.prototype,"onClickOAuth",[j],Object.getOwnPropertyDescriptor(S.prototype,"onClickOAuth"),S.prototype),Object(le.a)(S.prototype,"clearState",[E],Object.getOwnPropertyDescriptor(S.prototype,"clearState"),S.prototype),S),me=(R=ue.d.bound,A=ue.d.bound,B=function(){function e(){Object(n.a)(this,e),Object(se.a)(this,"isModalEditorOpen",I,this)}return Object(r.a)(e,[{key:"setModalEditorOpen",value:function(){this.isModalEditorOpen=!0}},{key:"setModalEditorClose",value:function(){this.isModalEditorOpen=!1}}]),e}(),I=Object(le.a)(B.prototype,"isModalEditorOpen",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(le.a)(B.prototype,"setModalEditorOpen",[R],Object.getOwnPropertyDescriptor(B.prototype,"setModalEditorOpen"),B.prototype),Object(le.a)(B.prototype,"setModalEditorClose",[A],Object.getOwnPropertyDescriptor(B.prototype,"setModalEditorClose"),B.prototype),B),fe=(N=ue.d.bound,U=ue.d.bound,P=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"bindUpdateThreadListFunc",value:function(e){this.updateThreadListFunc=e}},{key:"callUpdateThreadList",value:function(){this.updateThreadListFunc&&this.updateThreadListFunc()}}]),e}(),Object(le.a)(P.prototype,"bindUpdateThreadListFunc",[N],Object.getOwnPropertyDescriptor(P.prototype,"bindUpdateThreadListFunc"),P.prototype),Object(le.a)(P.prototype,"callUpdateThreadList",[U],Object.getOwnPropertyDescriptor(P.prototype,"callUpdateThreadList"),P.prototype),P),ge=(L=ue.d.bound,D=ue.d.bound,M=ue.d.bound,F=function(){function e(){Object(n.a)(this,e),Object(se.a)(this,"threadAddr",z,this)}return Object(r.a)(e,[{key:"setThreadAddr",value:function(e){this.threadAddr=e}},{key:"bindUpdateThreadBodyFunc",value:function(e){this.updateThreadBodyFunc=e}},{key:"callUpdateThreadBody",value:function(){this.updateThreadBodyFunc&&this.updateThreadBodyFunc()}}]),e}(),z=Object(le.a)(F.prototype,"threadAddr",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(le.a)(F.prototype,"setThreadAddr",[L],Object.getOwnPropertyDescriptor(F.prototype,"setThreadAddr"),F.prototype),Object(le.a)(F.prototype,"bindUpdateThreadBodyFunc",[D],Object.getOwnPropertyDescriptor(F.prototype,"bindUpdateThreadBodyFunc"),F.prototype),Object(le.a)(F.prototype,"callUpdateThreadBody",[M],Object.getOwnPropertyDescriptor(F.prototype,"callUpdateThreadBody"),F.prototype),F),be=(K=ue.d.bound,q=ue.d.bound,W=ue.d.bound,G=function(){function e(){Object(n.a)(this,e),Object(se.a)(this,"open",V,this),Object(se.a)(this,"message",H,this)}return Object(r.a)(e,[{key:"triggerOpen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.message=e,this.open=!0}},{key:"handleClose",value:function(){this.open=!1}},{key:"showUnknownError",value:function(){this.triggerOpen("Sorry! An error occurred.")}}]),e}(),V=Object(le.a)(G.prototype,"open",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=Object(le.a)(G.prototype,"message",[ue.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(le.a)(G.prototype,"triggerOpen",[K],Object.getOwnPropertyDescriptor(G.prototype,"triggerOpen"),G.prototype),Object(le.a)(G.prototype,"handleClose",[q],Object.getOwnPropertyDescriptor(G.prototype,"handleClose"),G.prototype),Object(le.a)(G.prototype,"showUnknownError",[W],Object.getOwnPropertyDescriptor(G.prototype,"showUnknownError"),G.prototype),G),ye=(a(485),a(937)),ve=a(941),Oe=a(29),je=a(182),Ee=a.n(je),Se=a(183),we=a.n(Se),ke=a(19),Ce=a.n(ke),Te=a(66),xe=a.n(Te),Re=a(401),Ae=a.n(Re),Be=a(148),Ie=a(264),Ne=a.n(Ie),Ue=a(144),Pe=a.n(Ue),Le=a(32),De=a.n(Le),Me=a(100),Fe=a.n(Me),ze=a(402),Ke=a.n(ze),qe=a(403),We=a.n(qe),Ge=a(99),Ve=a.n(Ge),He=a(181),Ye=a.n(He),Je=a(115),_e=a.n(Je),$e=a(145),Qe=a.n($e),Xe=a(67),Ze=a.n(Xe),et=a(116),tt=a.n(et),at=a(117),nt=a.n(at),rt=a(118),it=a.n(rt),ot=a(396),ct=a.n(ot),st=a(394),lt=a.n(st),ut=a(395),pt=a.n(ut),dt=a(397),ht=a.n(dt),mt=a(398),ft=a.n(mt),gt=(a(487),Object(oe.b)("googleOAuthState")(Y=Object(oe.c)(Y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).handleOAuthLoginOut=function(){var e=a.props.googleOAuthState;de.a.clearState(),e.clearState(),e.onClickOAuth()},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.googleOAuthState;return"Logout"===e.loginBtnStr?ee.a.createElement(_e.a,{variant:"contained",color:"secondary",onClick:this.handleOAuthLoginOut},ee.a.createElement(lt.a,null),e.loginBtnStr):"Login"===e.loginBtnStr?ee.a.createElement(_e.a,{style:{textTransform:"none"},onClick:this.handleOAuthLoginOut,className:"google-button"},ee.a.createElement("span",{className:"google-button__icon"},ee.a.createElement("svg",{viewBox:"0 0 366 372",xmlns:"http://www.w3.org/2000/svg"},ee.a.createElement("path",{d:"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z",id:"Shape",fill:"#EA4335"}),ee.a.createElement("path",{d:"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z",id:"Shape",fill:"#FBBC05"}),ee.a.createElement("path",{d:"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z",id:"Shape",fill:"#4285F4"}),ee.a.createElement("path",{d:"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z",fill:"#34A853"}))),ee.a.createElement("span",{className:"google-button__text"},"Sign in with Google")):""}}]),t}(ee.a.Component))||Y)||Y),bt=Object(oe.b)("googleOAuthState")(J=Object(oe.c)(J=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={isOpened:a.props.isOpened},a.toggleDrawer=function(e){return function(){a.setState({isOpened:e})}},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.googleOAuthState.isRegistered?ee.a.createElement(tt.a,{button:!0,key:"Profile",component:function(e){return ee.a.createElement(ye.a,Object.assign({to:"/profile"},e))}},ee.a.createElement(nt.a,null,ee.a.createElement(pt.a,null)),ee.a.createElement(it.a,{primary:"Profile"})):"";return ee.a.createElement("div",null,ee.a.createElement(xe.a,{className:t.menuButton,onClick:this.toggleDrawer(!0),color:"inherit","aria-label":"Menu"},ee.a.createElement(ct.a,null)),ee.a.createElement(Ye.a,{open:this.state.isOpened,onClose:this.toggleDrawer(!1)},ee.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer(!1),onKeyDown:this.toggleDrawer(!1)},ee.a.createElement("div",{className:t.list},ee.a.createElement(Qe.a,null,a,ee.a.createElement(tt.a,{button:!0,key:"About",component:function(e){return ee.a.createElement(ye.a,Object.assign({to:"/about"},e))}},ee.a.createElement(nt.a,null,ee.a.createElement(ht.a,null)),ee.a.createElement(it.a,{primary:"About"})),ee.a.createElement(tt.a,{button:!0,key:"Terms of Service",component:function(e){return ee.a.createElement(ye.a,Object.assign({to:"/terms"},e))}},ee.a.createElement(nt.a,null,ee.a.createElement(ft.a,null)),ee.a.createElement(it.a,{primary:"Terms of Service"}))))),ee.a.createElement(Ze.a,null),ee.a.createElement(De.a,{container:!0,direction:"column",justify:"space-between",alignItems:"center",style:{padding:20}},ee.a.createElement(De.a,{item:!0},ee.a.createElement(gt,null)),ee.a.createElement(De.a,{item:!0,style:{position:"absolute",bottom:"3%"}},ee.a.createElement(Ce.a,{component:"p",color:"textSecondary",align:"center"},"\xa9 2019 fyp.nathanlam11.tk."),ee.a.createElement(Ce.a,{component:"p",color:"textSecondary",align:"center"},"All rights reserved.")))))}}]),t}(ee.a.Component))||J)||J,yt=Object(Oe.withStyles)({list:{width:250},fullList:{width:"auto"},menuButton:{marginLeft:-12}})(bt),vt=a(399),Ot=a.n(vt),jt=a(97),Et=a.n(jt),St=a(45),wt=a.n(St),kt=a(400),Ct=Object(oe.b)("navState","createReplyActionState")(_=Object(oe.c)(_=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.navState,n=e.createReplyActionState;return ee.a.createElement(Et.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:n.isModalEditorOpen,onClose:n.setModalEditorClose},ee.a.createElement(wt.a,{elevation:1,square:!0,className:t.paper},ee.a.createElement(Ce.a,{variant:"h6",id:"modal-title"},a.getModalEditorTitle),ee.a.createElement(kt.a,null)))}}]),t}(Z.Component))||_)||_,Tt=Object(Oe.withStyles)(function(e){return{paper:{position:"absolute",width:100*e.spacing.unit,maxWidth:"100%",height:58*e.spacing.unit,maxHeight:"90%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},sendIcon:{marginLeft:e.spacing.unit}}})(Ct),xt=Pe()({palette:{primary:Be.blue}}),Rt=Object(oe.b)("googleOAuthState","navState","createReplyActionState","threadListState")($=Object(oe.c)($=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.navState,n=e.googleOAuthState,r=e.createReplyActionState,i=e.threadListState,o=ee.a.createElement(De.a,{item:!0},ee.a.createElement(Ce.a,{variant:"h6",color:"inherit",className:t.grow},a.navTitle));a.indexTitleMode||(o=ee.a.createElement(De.a,{item:!0,xs:9},ee.a.createElement(xe.a,{color:"inherit",style:{marginRight:10},onClick:this.props.history.goBack},ee.a.createElement(Ae.a,null)),ee.a.createElement(Ce.a,{variant:"h6",color:"inherit",className:t.grow},a.navTitle)));var c="";return n.isRegistered&&"add"===a.createReplyBtnState?c=ee.a.createElement(Ve.a,{key:"primary",in:!0,unmountOnExit:!0},ee.a.createElement(Fe.a,{color:"primary",size:"medium","aria-label":"Add",className:t.fab,onClick:r.setModalEditorOpen},ee.a.createElement(Ke.a,null))):n.isRegistered&&"reply"===a.createReplyBtnState&&(c=ee.a.createElement(Ve.a,{key:"secondary",in:!0,unmountOnExit:!0},ee.a.createElement(Fe.a,{color:"secondary",size:"medium","aria-label":"Reply",className:t.fab,onClick:r.setModalEditorOpen},ee.a.createElement(We.a,null)))),ee.a.createElement(Ne.a,{theme:xt},ee.a.createElement("div",{className:t.root},ee.a.createElement(Ee.a,{position:"static",elevation:10,className:t.appBar},ee.a.createElement(we.a,null,ee.a.createElement(De.a,{container:!0,spacing:0,justify:"space-between",alignItems:"center"},ee.a.createElement(De.a,{item:!0},ee.a.createElement(yt,null)),o,ee.a.createElement(De.a,{item:!0},ee.a.createElement(ye.a,{onClick:i.callUpdateThreadList,to:"/"},ee.a.createElement("img",{src:Ot.a,style:{maxWidth:"45px",verticalAlign:"middle"},alt:"logo"})))))),c),ee.a.createElement(Tt,null))}}]),t}(ee.a.Component))||$)||$,At=Object(ve.a)(Object(Oe.withStyles)(function(e){return{appBar:{color:Be.pink},root:{flexGrow:1},grow:{flexGrow:1,display:"inline-block",verticalAlign:"middle"},menuButton:{marginLeft:-12},fab:{position:"fixed",margin:e.spacing.unit,bottom:3*e.spacing.unit,right:1*e.spacing.unit,zIndex:1e3}}})(Rt)),Bt=a(940),It=(a(777),a(52)),Nt=Object(oe.b)("googleOAuthState")(Q=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={isRedirectRegistration:!1},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.googleOAuthState;de.a.init(function(a){a?(t.onLoginSuccess(),de.a.userPrepare().then(function(a){a?It.a.getUserInfo(de.a.getUserInfo().userAddr).then(function(){t.isRegistered=a,t.setUserInfo(de.a.getUserInfo()),e.setState({isRedirectRegistration:!a})}).catch(function(a){"Tx not found"===a.response.data.error.message&&(t.isRegistered=!1,e.setState({isRedirectRegistration:!0}))}):(t.isRegistered=a,e.setState({isRedirectRegistration:!a}))})):t.onLoggedOut()})}},{key:"render",value:function(){this.props.classes;return this.state.isRedirectRegistration?ee.a.createElement(Bt.a,{to:"/registration"}):""}}]),t}(Z.Component))||Q,Ut=a(195),Pt=a(266),Lt=a(53),Dt=a(3),Mt=a.n(Dt),Ft=a(146),zt=a.n(Ft),Kt=a(939),qt=a(149),Wt=a.n(qt),Gt=a(184),Vt=a.n(Gt),Ht=a(120),Yt=function(e){var t;return{root:{},table:{fontFamily:e.typography.fontFamily},flexContainer:{display:"flex",alignItems:"center",boxSizing:"border-box"},tableRow:{cursor:"pointer"},tableRowHover:{"&:hover":{backgroundColor:e.palette.grey[200]}},tableCell:{flex:1},noClick:{cursor:"initial"},paper:(t={height:"calc(100vh - 56px)"},Object(Lt.a)(t,"".concat(e.breakpoints.up("xs")," and (orientation: landscape)"),{height:"calc(100vh - 48px)"}),Object(Lt.a)(t,e.breakpoints.up("sm"),{height:"calc(100vh - 64px)"}),Object(Lt.a)(t,"width",140*e.spacing.unit),Object(Lt.a)(t,"maxWidth","100%"),t)}},Jt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).getRowClassName=function(e){var t=e.index,n=a.props,r=n.classes,i=n.rowClassName,o=n.onRowClick;return Mt()(r.tableRow,r.flexContainer,i,Object(Lt.a)({},r.tableRowHover,-1!==t&&null!=o))},a.cellRenderer=function(e){var t=e.cellData,n=e.columnIndex,r=void 0===n?null:n,i=a.props,o=i.columns,c=i.classes,s=i.rowHeight,l=i.onRowClick,u=a.props.loadSuccess?t:ee.a.createElement(Kt.a,{active:!0,title:{width:"100%"},paragraph:{rows:0,marginTop:0}});return ee.a.createElement(Wt.a,{component:"div",className:Mt()(c.tableCell,c.flexContainer,Object(Lt.a)({},c.noClick,null==l)),variant:"body",style:{height:s},align:null!=r&&o[r].numeric?"right":"left"},u)},a.headerRenderer=function(e){var t,n=e.label,r=e.columnIndex,i=e.dataKey,o=e.sortBy,c=e.sortDirection,s=a.props,l=s.headerHeight,u=s.columns,p=s.classes,d=s.sort,h=(t={},Object(Lt.a)(t,Ht.c.ASC,"asc"),Object(Lt.a)(t,Ht.c.DESC,"desc"),t),m=u[r].disableSort||null==d?n:ee.a.createElement(Vt.a,{active:i===o,direction:h[c]},n);return ee.a.createElement(Wt.a,{component:"div",className:Mt()(p.tableCell,p.flexContainer,p.noClick),variant:"head",style:{height:l},align:u[r].numeric?"right":"left"},m)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.columns,r=Object(Pt.a)(t,["classes","columns"]);return ee.a.createElement(Ht.a,null,function(t){var i=t.height,o=t.width;return ee.a.createElement(Ht.d,Object.assign({className:a.table,height:i,width:o},r,{rowClassName:e.getRowClassName}),n.map(function(t,n){var r,i=t.cellContentRenderer,o=void 0===i?null:i,c=t.className,s=t.dataKey,l=Object(Pt.a)(t,["cellContentRenderer","className","dataKey"]);return r=null!=o?function(t){return e.cellRenderer({cellData:o(t),columnIndex:n})}:e.cellRenderer,ee.a.createElement(Ht.b,Object.assign({key:s,headerRenderer:function(t){return e.headerRenderer(Object(Ut.a)({},t,{columnIndex:n}))},className:Mt()(a.flexContainer,c),cellRenderer:r,dataKey:s},l))}))})}}]),t}(ee.a.PureComponent);Jt.defaultProps={headerHeight:56,rowHeight:56};var _t,$t,Qt=Object(Oe.withStyles)(Yt)(Jt),Xt=Object(oe.b)("navState","threadListState")(X=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={loadSuccess:!1,rows:Array(10).fill("")},a.updateThreadList=function(){if("add"===a.props.navState.createReplyBtnState){a.setState({loadSuccess:!1,rows:Array(10).fill("")});var e=new Promise(function(e){return setTimeout(e,200)});Promise.all([e,It.a.getRecentThreads()]).then(function(e){e[1].map(function(e){return e.requestTime=zt()(parseInt(e.requestTime)).calendar(),e}),a.setState({loadSuccess:!0,rows:e[1]})})}},e.threadListState.bindUpdateThreadListFunc(a.updateThreadList),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this.props.navState;e.setIndexTitleMode(!0),e.updateNavTitle("Threads"),e.setCreateBtnState(),this.updateThreadList()}},{key:"componentWillUnmount",value:function(){var e=this.props.navState;e.updateNavTitle(),e.clearCreateReplyBtnState()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.rows;return ee.a.createElement(De.a,{container:!0,justify:"center",alignItems:"center"},ee.a.createElement(wt.a,{elevation:24,square:!0,className:t.paper},ee.a.createElement(Qt,{loadSuccess:this.state.loadSuccess,rowCount:a.length,rowGetter:function(e){var t=e.index;return a[t]},onRowClick:function(t){return e.props.history.push("/thread/".concat(t.rowData.threadAddr))},columns:[{width:120,flexGrow:1,label:"Title",dataKey:"threadTitle"},{width:100,label:"Vote",dataKey:"totalVote",numeric:!0},{width:100,label:"Replies",dataKey:"totalReplies",numeric:!0},{width:100,label:"Author",dataKey:"authorName"},{width:150,label:"Time",dataKey:"requestTime"}]})))}}]),t}(ee.a.Component))||X,Zt=Object(Oe.withStyles)(Yt)(Object(ve.a)(Xt)),ea=a(410),ta=a(414),aa=a(70),na=a(189),ra=a.n(na),ia=a(415),oa=a.n(ia),ca=Object(oe.b)("notificationSnackState")(_t=Object(oe.c)(_t=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.notificationSnackState;return ee.a.createElement(ra.a,{autoHideDuration:5e3,className:t.snackbar,anchorOrigin:{vertical:"top",horizontal:"right"},open:a.open,onClose:a.handleClose,ContentProps:{"aria-describedby":"message-id"},message:a.message,action:[ee.a.createElement(aa.a,{key:"gotit",color:"secondary",size:"small",onClick:a.handleClose},"Got It!"),ee.a.createElement(xe.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:a.handleClose},ee.a.createElement(oa.a,null))]})}}]),t}(Z.Component))||_t)||_t,sa=Object(Oe.withStyles)(function(e){return{close:{padding:e.spacing.unit/2},snackbar:{top:e.spacing.unit}}})(ca),la=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return ee.a.createElement(De.a,{container:!0,justify:"center",alignItems:"center"},ee.a.createElement(wt.a,{className:e.paper,square:!0,elevation:10},ee.a.createElement(Ce.a,{variant:"h4",component:"h4",align:"center"},"About"),ee.a.createElement(Ze.a,null),ee.a.createElement(Ce.a,{paragraph:!0,component:"p"}),ee.a.createElement(Ce.a,{paragraph:!0,component:"p"})))}}]),t}(Z.Component),ua=Object(Oe.withStyles)(function(e){return{paper:{padding:3*e.spacing.unit,width:100*e.spacing.unit,maxWidth:"100%"}}})(la),pa=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return ee.a.createElement(De.a,{container:!0,justify:"center",alignItems:"center"},ee.a.createElement(wt.a,{className:e.paper,square:!0,elevation:10},ee.a.createElement(Ce.a,{variant:"h4",component:"h4",align:"center"},"Terms of Service and Disclaimer"),ee.a.createElement(Ze.a,null),ee.a.createElement(Ce.a,{paragraph:!0,component:"p"}),ee.a.createElement(Ce.a,{paragraph:!0,component:"p"}),ee.a.createElement("ol",{style:{fontWeight:"bold"}},ee.a.createElement("li",null,ee.a.createElement(Ce.a,{paragraph:!0,component:"p"},ee.a.createElement("strong",null,"Acceptance of Terms")),ee.a.createElement(Ce.a,{paragraph:!0,component:"p"},"Welcome to the forum ",ee.a.createElement("a",{href:"http://fyp.nathanlam11.tk"},"fyp.nathanlam11.tk"),". It is also under the domain name ",ee.a.createElement("strong",null,"nathanlam11.tk")," by Nathan Lam. This forum is a part of university final year project created by Nathan Lam which provides the service only for academic and evaluation purpose. The following are the terms and conditions for the use of this Forum.")),ee.a.createElement("li",null,ee.a.createElement(Ce.a,{paragraph:!0,component:"p"},ee.a.createElement("strong",null,"Description of use and service")),ee.a.createElement(Ce.a,{paragraph:!0,component:"p"},'This forum is providing user with discussion through the Internet. You understand and agree that the service is only for academic and evaluation purpose. You also understand and agree that the service is provided to you on an "as is" basis. ',ee.a.createElement("a",{href:"http://fyp.nathanlam11.tk"},"fyp.nathanlam11.tk")," disclaims any liability as a result of any data deletion, interruption or any failures or personalized settings. ",ee.a.createElement("a",{href:"http://fyp.nathanlam11.tk"},"fyp.nathanlam11.tk")," reserves the right to without giving any prior notice to you deactivate any or all of the service (including user account, discussion threads and reply posts etc.) to maintain forum working normally that ",ee.a.createElement("a",{href:"http://fyp.nathanlam11.tk"},"fyp.nathanlam11.tk")," thinks appropriate.")),ee.a.createElement("li",null,ee.a.createElement(Ce.a,{paragraph:!0,component:"p"},ee.a.createElement("strong",null,"Registration obligation of user")),ee.a.createElement(Ce.a,{paragraph:!0,component:"p"},"In order to take part in the discussion on the forum, you agree to authorize your Google account and allow ",ee.a.createElement("a",{href:"http://fyp.nathanlam11.tk"},"fyp.nathanlam11.tk")," to access your Google drive ",ee.a.createElement("strong",null,"only for storing your registration information")," through Google OAuth and Google APIs. ",ee.a.createElement("a",{href:"http://fyp.nathanlam11.tk"},"fyp.nathanlam11.tk")," disclaims any liability as a result of ",ee.a.createElement("strong",null,"loss")," or leak your registration information because of improper user's operation or Google's policy.")),ee.a.createElement("li",null,ee.a.createElement(Ce.a,{paragraph:!0,component:"p"},ee.a.createElement("strong",null,"User behavior")),ee.a.createElement(Ce.a,{paragraph:!0,component:"p"},"You understand and confirm that the third party content providers may be solely responsible for their information data, video, music, sound, graphics, photographs, text, news or other contents are posted publicly or transmitted privately and ",ee.a.createElement("a",{href:"http://fyp.nathanlam11.tk"},"fyp.nathanlam11.tk")," takes no responsibility for those contents. You agree and undertake not to use the service for any of illegal, damaging, threatening and abusing privacy infringing, obscene, immoral, discriminating, indecent.",ee.a.createElement("a",{href:"http://fyp.nathanlam11.tk"},"fyp.nathanlam11.tk")," reserves the right to deactivate the user who are violate terms of use.")))))}}]),t}(Z.Component),da=Object(Oe.withStyles)(function(e){return{paper:{padding:3*e.spacing.unit,width:140*e.spacing.unit,maxWidth:"100%",maxHeight:"100%"}}})(pa),ha=a(103),ma=a.n(ha),fa=a(77),ga=a.n(fa),ba=a(102),ya=a.n(ba),va=a(151),Oa=a.n(va),ja=a(417),Ea=a.n(ja),Sa=a(101),wa=a.n(Sa),ka=a(416),Ca=a.n(ka),Ta=Object(oe.b)("googleOAuthState")($t=Object(oe.c)($t=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.googleOAuthState;if(!a.isRegistered)return ee.a.createElement(Bt.a,{to:"/"});var n=a.userInfo.createTime?zt()(parseInt(a.userInfo.createTime)).format("Do MMM YYYY"):"",r=a.userInfo.publicKeyBuff?Ca.a.createHash("sha256").update(a.userInfo.publicKeyBuff).digest("hex"):"";return ee.a.createElement(De.a,{container:!0,justify:"center",alignItems:"center"},ee.a.createElement(aa.b,{className:t.paper,square:!0,elevation:10},ee.a.createElement(Ce.a,{variant:"h6",component:"h6",align:"center"},ee.a.createElement(Ea.a,{style:{verticalAlign:"sub"}})," Profile"),ee.a.createElement(Ze.a,null),ee.a.createElement(wa.a,{avatar:ee.a.createElement(ya.a,{"aria-label":"Recipe"},ee.a.createElement(Oa.a,null)),title:a.userInfo.username,subheader:"Registered on: "+n}),ee.a.createElement(ma.a,null,ee.a.createElement(ga.a,{label:"User Address",className:t.textField,value:a.userInfo.userAddr,fullWidth:!0,margin:"normal",variant:"filled",disabled:!0}),ee.a.createElement(ga.a,{label:"User ID",className:t.textField,value:r,fullWidth:!0,margin:"normal",variant:"filled",disabled:!0}))))}}]),t}(Z.Component))||$t)||$t,xa=Object(Oe.withStyles)(function(e){return{paper:{padding:5*e.spacing.unit,width:100*e.spacing.unit,maxWidth:"100%",maxHeight:"100%"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,maxWidth:"97%"}}})(Ta),Ra={navState:new pe,googleOAuthState:new he,createReplyActionState:new me,threadListState:new fe,threadBodyState:new ge,notificationSnackState:new be},Aa=Object(ce.a)({}),Ba=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){this.props.classes;return ee.a.createElement("div",null,ee.a.createElement(Tt,null))}}]),t}(ee.a.Component);ie.a.render(ee.a.createElement(oe.a,Ra,ee.a.createElement(te.a,{history:Aa},ee.a.createElement(Z.Fragment,null,ee.a.createElement(Nt,null),ee.a.createElement(At,null),ee.a.createElement(sa,null),ee.a.createElement(ae.a,null,ee.a.createElement(ne.a,{path:"/",exact:!0,component:Zt}),ee.a.createElement(ne.a,{path:"/about",component:ua}),ee.a.createElement(ne.a,{path:"/profile",component:xa}),ee.a.createElement(ne.a,{path:"/terms",component:da}),ee.a.createElement(ne.a,{path:"/registration",component:ta.a}),ee.a.createElement(ne.a,{path:"/thread/:threadAddr",component:ea.a}),ee.a.createElement(ne.a,{path:"/SS",component:Ba}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[472,2,1]]]);
//# sourceMappingURL=main.ac1e0c50.chunk.js.map