{"version":3,"sources":["Utils/ZlibHelper.js","Plugin/GoogleOAuth.js","Icons/logox.svg","Components/WysiwygEditor.js","Contents/ThreadBody.js","Contents/Registration.js","Adapters/ForumAjaxAdapter.js","serviceWorker.js","Stores/NavState.js","Stores/GoogleOAuthState.js","Stores/CreateReplyActionState.js","Stores/ThreadListState.js","Stores/ThreadBodyState.js","Stores/NotificationSnackState.js","Layout/TempDrawer.js","Components/CreateReplyModalCombo.js","Layout/Nav.js","App.js","Contents/ThreadList.js","Components/NotificationSnack.js","Contents/About.js","Contents/Terms.js","Contents/Profile.js","index.js"],"names":["ZlibHelper","unzippedData","isOutputBase64","arguments","length","undefined","dataBuff","Buffer","from","Promise","resolve","reject","zlib","gzip","err","buffer","toString","zippedData","isOutputUtf8","unzip","gapi","window","nacl","require","configFileName","GoogleAuth","configFileId","userInfo","username","userAddr","createTime","publicKeyBuff","privateKeyBuff","publicKeyBase64","privateKeyBase64","_isRegistered","isSignedIn","get","isAuthorized","currentUser","hasGrantedScopes","getConfigId","listFunc","client","drive","files","list","spaces","fields","execute","response","id","trySetCredential","getFunt","fileId","alt","result","getConfigById","then","data","some","val","checkConfig","publicKey","secretKey","createConfig","createFunc","create","resource","name","parents","console","log","uploadConfig","jsonStr","req","request","path","method","params","uploadType","body","_callee","keyPair","I_Git_fyp_react_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","t0","sent","stop","this","_callee2","_context2","abrupt","__webpack_exports__","init","setSignedInState","load","discoveryDocs","clientId","scope","auth2","getAuthInstance","listen","handleAuthClick","signOut","signIn","userPrepare","createKeyPair","sign","register","signSignature","message","optionPrivateKeyBuff","msgBuff","signedBuff","detached","isRegistered","getUserInfo","clearState","module","exports","__webpack_require__","p","removeDefaultContentProps","rawContent","blocks","map","type","depth","inlineStyleRanges","entityRanges","Object","keys","EditorConvertToHTML","inject","observer","state","title","threadTitleInputErr","editorState","EditorState","createEmpty","onEditorStateChange","_this","setState","handleChange","event","I_Git_fyp_react_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__","target","value","submitNewThread","_this$props","createReplyActionState","threadListState","notificationSnackState","contentObj","contentZipped","time","signBase64","props","trim","triggerOpen","convertToRaw","getCurrentContent","JSON","stringify","Date","getTime","GoogleOAuth","concat","forumAjaxAdapter","setModalEditorClose","callUpdateThreadList","submitNewReply","_this$props2","threadBodyState","_GoogleOAuth$getUserI","threadAddr","callUpdateThreadBody","submitToBC","navState","createReplyBtnState","_this$props3","classes","titleField","react__WEBPACK_IMPORTED_MODULE_8___default","createElement","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_16___default","required","fullWidth","label","className","textField","margin","autoComplete","onChange","error","react__WEBPACK_IMPORTED_MODULE_8__","style","marginBottom","react_draft_wysiwyg__WEBPACK_IMPORTED_MODULE_11__","wrapperClassName","editorClassName","editorStyle","border","height","_material_ui_core__WEBPACK_IMPORTED_MODULE_13__","variant","onClick","color","submitBtn","getModalEditorBtnTxt","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_15___default","sendIcon","Component","withStyles","theme","marginRight","spacing","unit","marginLeft","palette","common","black","backgroundColor","amber","&:hover","marginTop","styles","gridContainer","flexGrow","gridItem","width","maxWidth","card","padding","cardContent","refreshBtnDiv","fabGreen","white","green","display","circularProgress","RepliesBody","I_Git_fyp_react_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","I_Git_fyp_react_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__","I_Git_fyp_react_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","call","replyPosts","totalCount","finished","updateRepliedPosts","getRepliedPostsWithUserInfo","r","promises","posts","forEach","push","postContent","all","unzippeds","index","createWithContent","convertFromRaw","parse","bindUpdateThreadBodyFunc","post","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_14___default","key","postAddr","item","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_15___default","elevation","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_16___default","avatar","_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_19___default","aria-label","_material_ui_icons_Person__WEBPACK_IMPORTED_MODULE_25___default","action","subheader","requestTime","calendar","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_17___default","react_draft_wysiwyg__WEBPACK_IMPORTED_MODULE_12__","toolbarHidden","readOnly","_material_ui_core_Zoom__WEBPACK_IMPORTED_MODULE_21___default","in","unmountOnExit","_material_ui_core_Fab__WEBPACK_IMPORTED_MODULE_22___default","_material_ui_icons_Refresh__WEBPACK_IMPORTED_MODULE_28___default","_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_24___default","size","RepliesBodyStyled","ThreadBody","authorAddr","threadContent","threadIndex","threadTitle","authorInfo","up","down","submitVote","vote","updown","_this2$props","googleOAuthState","_this2","match","submitNewVote","I_Git_fyp_react_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","showUnknownError","submitUpVote","submitDownVote","setThreadAddr","setIndexTitleMode","updateNavTitle","setReplyBtnState","getThread","threadData","unzippedContent","getTotalVoted","totalVoted","clearCreateReplyBtnState","container","direction","justify","alignItems","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_18___default","actions","disableActionSpacing","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_20___default","_material_ui_icons_ThumbUp__WEBPACK_IMPORTED_MODULE_26___default","_material_ui_icons_ThumbDown__WEBPACK_IMPORTED_MODULE_27___default","Registration","aggered","inputUsername","inputError","disableBtn","disableCheckbox","disableInput","inputUsernameChange","checkboxChange","checked","handleBtnSubmit","history","date","buf","ucRes","preventDefault","submitNewUserContract","hash","setUserInfo","react_router_dom__WEBPACK_IMPORTED_MODULE_11__","to","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_17___default","_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_16___default","square","paper","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_18___default","align","_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_20___default","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default","disabled","_material_ui_core_FormControlLabel__WEBPACK_IMPORTED_MODULE_21___default","checkbox","control","_material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_22___default","react_router_dom__WEBPACK_IMPORTED_MODULE_12__","I_Git_fyp_react_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_7__","mixins","gutters","paddingTop","paddingBottom","flexWrap","axios","moment","ForumAjaxAdapter","host","port","useHttps","I_Git_fyp_react_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","baseURL","queryParams","parseInt","page","perPage","getRepliedPosts","res","allPromises","userInfos","signature","Boolean","location","hostname","NavState","bound","navTitle","bool","indexTitleMode","observable","computed","GoogleOAuthState","_ref$username","_ref","_ref$userAddr","_ref$createTime","_ref$publicKeyBuff","signinStatus","loginBtnStr","CreateReplyActionState","isModalEditorOpen","ThreadListState","func","updateThreadListFunc","ThreadBodyState","updateThreadBodyFunc","NotificationSnackState","msg","open","LoginButton","handleOAuthLoginOut","onClickOAuth","react_default","Button_default","PowerSettingsNew_default","textTransform","viewBox","xmlns","d","fill","React","TemporaryDrawer","isOpened","toggleDrawer","showProfileItem","ListItem_default","button","component","Link","assign","ListItemIcon_default","AccountBox_default","ListItemText_default","primary","IconButton_default","menuButton","Menu_default","Drawer_default","onClose","tabIndex","role","onKeyDown","List_default","Help_default","Info_default","Divider_default","Grid_default","TempDrawer_LoginButton","position","bottom","Typography_default","fullList","CreateReplyModal","Modal_default","aria-labelledby","aria-describedby","Paper_default","closeBtn","Close_default","getModalEditorTitle","WysiwygEditor","minHeight","maxHeight","background","boxShadow","shadows","outline","top","left","transform","float","muiThemeX","createMuiTheme","blue","ButtonAppBar","titlePart","grow","xs","goBack","ArrowBack_default","createReplyBtn","Zoom_default","Fab_default","fab","setModalEditorOpen","Add_default","Reply_default","MuiThemeProvider_default","root","AppBar_default","appBar","Toolbar_default","TempDrawer","src","logo","verticalAlign","CreateReplyModalCombo","withRouter","pink","right","zIndex","App","isRedirectRegistration","isPass","onLoginSuccess","catch","e","onLoggedOut","Redirect","_paper","table","fontFamily","typography","flexContainer","boxSizing","tableRow","cursor","tableRowHover","grey","tableCell","flex","noClick","defineProperty","breakpoints","MuiVirtualizedTable","getRowClassName","rowClassName","onRowClick","classNames","cellRenderer","_ref2","cellData","_ref2$columnIndex","columnIndex","columns","rowHeight","dataOrSkeleton","loadSuccess","skeleton","active","paragraph","rows","TableCell_default","numeric","headerRenderer","_ref3","_direction","dataKey","sortBy","sortDirection","headerHeight","sort","SortDirection","ASC","DESC","inner","disableSort","TableSortLabel_default","_this$props4","tableProps","objectWithoutProperties","dist_es","_ref4","_ref5","renderer","_ref5$cellContentRend","cellContentRenderer","other","cellRendererProps","headerProps","objectSpread","PureComponent","defaultProps","WrappedVirtualizedTable","ReactVirtualizedTable","_this3","classCallCheck","possibleConstructorReturn","getPrototypeOf","Array","updateThreadList","timeout","setTimeout","getRecentThreads","bindUpdateThreadListFunc","setCreateBtnState","_this4","rowCount","rowGetter","_ref6","rowData","NotificationSnack","Snackbar_default","autoHideDuration","snackbar","anchorOrigin","vertical","horizontal","handleClose","ContentProps","index_es","close","About","Terms","fontWeight","href","Profile","createDay","format","userId","crypto","createHash","update","digest","Face_default","CardHeader_default","Avatar_default","Person_default","CardContent_default","TextField_default","stores","createBrowserHistory","SS","ReactDOM","render","index_module","Router","react","src_App_0","Nav","Components_NotificationSnack","Switch","Route","exact","ThreadList","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"4IAEMA,oGACUC,GAAqC,IAAvBC,IAAuBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GACzCG,EAAW,KAGf,OAFsCA,EAAV,kBAAjBL,EAAsCM,EAAOC,KAAKP,EAAc,QAC3DA,EACT,IAAIQ,QAAQ,SAACC,EAASC,GACzBC,IAAKC,KAAKP,EAAU,SAACQ,EAAKC,GACtB,GAAID,EAAK,OAAOH,EAAOG,GACvBJ,EAAQR,EAAiBa,EAAOC,SAAS,UAAYD,qCAKpDE,GAAiC,IAArBC,IAAqBf,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GACtCG,EAAW,KAGf,OAFoCA,EAAV,kBAAfW,EAAoCV,EAAOC,KAAKS,EAAY,UACvDA,EACT,IAAIR,QAAQ,SAACC,EAASC,GACzBC,IAAKO,MAAMb,EAAU,SAACQ,EAAKC,GACvB,GAAID,EAAK,OAAOH,EAAOG,GACvBJ,EAAQQ,EAAeH,EAAOC,SAAS,QAAUD,gBAMlDf,2GC5BToB,EAAOC,OAAOD,KAEdE,EAAOC,EAAQ,KAEfC,EAAiB,cACnBC,EAAa,KACbC,EAAe,GACfC,EAAW,CACXC,SAAU,GACVC,SAAU,GACVC,WAAY,GACZC,cAAe,MAEfA,EAAgB,KAAMC,EAAiB,KACvCC,EAAkB,GAAIC,EAAmB,GACzCC,GAAgB,EAqBpB,SAASC,IACL,QAAKX,GAGEA,EAAWW,WAAWC,MAGjC,SAASC,IAEL,OADab,EAAWc,YAAYF,MACxBG,iBAAiB,iDAwCjC,SAASC,IACL,IAAMC,EAAWtB,EAAKuB,OAAOC,MAAMC,MAAMC,KAAK,CAC1CC,OAAU,gBACVC,OAAU,oBAEd,OAAO,IAAIvC,QAAQ,SAACC,EAASC,GACzB+B,EAASO,QAAQ,SAACC,GACd,GAAIA,EAASL,MAAMzC,OAAS,EAAG,OAAOM,EAAQwC,EAASL,MAAM,GAAGM,IAChEzC,QAkBZ,SAAS0C,IACL,OAdJ,SAAuBD,GACnB,IAAME,EAAUjC,EAAKuB,OAAOC,MAAMC,MAAMR,IAAI,CACxCiB,OAAUH,EACVI,IAAO,UAEX,OAAO,IAAI9C,QAAQ,SAACC,EAASC,GACzB0C,EAAQJ,QAAQ,SAAUC,GAEtBxC,EAAQwC,EAASM,YAMlBC,CAAc/B,GAAcgC,KAAK,SAACC,GAErC,OAxCR,SAAqBA,GAGjB,MAFyB,CAAC,YAAa,YAAa,cAE5BC,KAAK,SAACC,GAC1B,IAAKF,EAAKE,GACN,OAAO,IAmCPC,CAAYH,IACZxB,GAAgB,GACT,IAEXF,EAAkB0B,EAAKI,UACvB7B,EAAmByB,EAAKK,UACxBjC,EAAgBxB,EAAOC,KAAKyB,EAAiB,UAC7CD,EAAiBzB,EAAOC,KAAK0B,EAAkB,UAC/CP,EAASC,SAAW+B,EAAK/B,SACzBD,EAASE,SAAW8B,EAAK9B,SACzBF,EAASG,WAAa6B,EAAK7B,WAC3BH,EAASI,cAAgBA,EACzBI,GAAgB,GACT,KAIf,SAAS8B,IACL,IAAMC,EAAa9C,EAAKuB,OAAOC,MAAMC,MAAMsB,OAAO,CAC9CC,SAAY,CAACC,KAAQ7C,EAAgB8C,QAAW,CAAC,kBACjDtB,OAAU,OAGd,OADAuB,QAAQC,IAAI,oBACL,IAAI/D,QAAQ,SAACC,EAASC,GACzBuD,EAAWjB,QAAQ,SAACC,GAEhBxC,EAAQwC,EAASC,QAK7B,SAASsB,EAAatB,EAAIuB,GACtB,IAAMC,EAAMvD,EAAKuB,OAAOiC,QAAQ,CAC5BC,KAAQ,0BAA4B1B,EACpC2B,OAAU,QACVC,OAAU,CAACC,WAAc,SACzBC,KAAQP,IAGZ,OADAH,QAAQC,IAAI,oBACL,IAAI/D,QAAQ,SAACC,EAASC,GACzBgE,EAAI1B,QAAQ,SAACC,GAETxC,EAAQwC,kDAKpB,SAAAgC,EAAwBtD,EAAUuD,EAASrD,EAAYD,GAAvD,IAAAsB,EAAA,OAAAiC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAF,EAAAG,GACehE,EADf6D,EAAAG,GAAA,CAAAH,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EACqCxB,IADrC,OAAAsB,EAAAG,GAAAH,EAAAI,KAAA,cACUxC,EADVoC,EAAAG,GAGI3D,EAAgBxB,EAAOC,KAAK2E,EAAQpB,WACpC/B,EAAiBzB,EAAOC,KAAK2E,EAAQnB,WACrC/B,EAAkBF,EAAcf,SAAS,UACzCkB,EAAmBF,EAAehB,SAAS,UAC3CW,EAASC,SAAWA,EACpBD,EAASE,SAAWA,EACpBF,EAASG,WAAaA,EACtBH,EAASI,cAAgBA,EAV7BwD,EAAAE,KAAA,GAWUhB,EAAatB,EAAI,CACnBvB,SAAYA,EACZmC,UAAa9B,EACb+B,UAAa9B,EACbJ,WAAcA,EACdD,SAAYA,IAhBpB,QAkBIH,EAAeyB,EAlBnB,yBAAAoC,EAAAK,SAAAV,EAAAW,2EAqBA,SAAAC,IAAA,IAAA3C,EAAA,OAAAiC,EAAAC,EAAAC,KAAA,SAAAS,GAAA,cAAAA,EAAAP,KAAAO,EAAAN,MAAA,cAAAM,EAAAN,KAAA,EACqBhD,IADrB,UACUU,EADV4C,EAAAJ,KAAA,CAAAI,EAAAN,KAAA,eAIQtD,GAAgB,EAJxB4D,EAAAC,OAAA,UAKe,GALf,cAOItE,EAAeyB,EAPnB4C,EAAAC,OAAA,SAQW5C,KARX,wBAAA2C,EAAAH,SAAAE,EAAAD,gCAkCeI,EAAA,GACXC,KAxMJ,SAAcC,GACV/E,EAAKgF,KAAK,eAAgB,WACtBhF,EAAKuB,OAAOuD,KAAK,CACbG,cAAiB,CAAC,8DAClBC,SAAY,2EACZC,MAAS,kDACV7C,KAAK,YACJjC,EAAaL,EAAKoF,MAAMC,mBAGbrE,WAAWsE,OAAO,SAACtE,GAC1B+D,EAAiB/D,GAAcE,OAGnC6D,EAAiB/D,KAAgBE,UA2LzCF,aACAE,eACAqE,gBA5KJ,WACQlF,EAAWW,WAAWC,MAEtBZ,EAAWmF,UAGXnF,EAAWoF,UAuKfpF,aACAqF,uDACAC,cApKJ,WACI,OAAOzF,EAAK0F,KAAK7B,WAoKjB/B,mBACA6D,2DACAC,cAnKJ,SAAuBC,EAASC,GAC5B,IAAIC,EAAUF,EACS,kBAAZE,IACPA,EAAU9G,EAAOC,KAAK2G,EAAS,SAEnC,IAAMG,EAAahG,EAAK0F,KAAKO,SAASF,EAASD,GAAwBpF,GACvE,OAAOzB,EAAOC,KAAK8G,GAAYtG,SAAS,WA8JxCwG,aAlCJ,WACI,OAAOrF,GAkCPsF,YA/BJ,WACI,OAAO9F,GA+BP+F,WA5BJ,WACIhG,EAAe,GACfC,EAAW,CACPC,SAAU,GACVC,SAAU,GACVC,WAAY,GACZC,cAAe,MAEnBA,EAAgB,KAChBC,EAAiB,KACjBC,EAAkB,GAClBC,EAAmB,GACnBC,GAAgB,mDCrNpBwF,EAAAC,QAAiBC,EAAAC,EAAuB,+SCmCxC,SAASC,EAA0BC,GAS/B,OARAA,EAAWC,OAAOC,IAAI,SAACrE,GAMnB,MALiB,aAAbA,EAAIsE,aAA4BtE,EAAIsE,KACtB,IAAdtE,EAAIuE,cAAoBvE,EAAIuE,MACK,IAAjCvE,EAAIwE,kBAAkBjI,eAAqByD,EAAIwE,kBACnB,IAA5BxE,EAAIyE,aAAalI,eAAqByD,EAAIyE,aACT,IAAjCC,OAAOC,KAAK3E,EAAIF,MAAMvD,eAAqByD,EAAIF,KAC5CE,IAEJmE,MAKLS,EAFLC,YAAO,WAAY,yBAA0B,kBAAmB,kBAAmB,4BACnFC,yNAEGC,MAAQ,CACJC,MAAO,GACPC,qBAAqB,EACrBC,YAAaC,cAAYC,iBAG7BC,oBAAsB,SAACH,GACnBI,EAAKC,SAAS,CACVL,mBAIRM,aAAe,SAAAhF,GAAI,OAAI,SAAAiF,GACnBH,EAAKC,SAALb,OAAAgB,EAAA,EAAAhB,CAAA,GAAgBlE,EAAOiF,EAAME,OAAOC,YAGxCC,qCAAkB,SAAAxE,IAAA,IAAAyE,EAAAC,EAAAC,EAAAC,EAAAjB,EAAAkB,EAAAC,EAAAC,EAAAC,EAAA,OAAA9E,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAkE,EAC4DR,EAAKgB,MAAxEP,EADOD,EACPC,uBAAwBC,EADjBF,EACiBE,gBAAiBC,EADlCH,EACkCG,uBAC1CjB,EAAQM,EAAKP,MAAMC,MAAMuB,OAFjB,CAAA7E,EAAAE,KAAA,eAIV0D,EAAKC,SAAS,CAACN,qBAAqB,IACpCgB,EAAuBO,YAAY,oCALzB9E,EAAAS,OAAA,wBASd+B,EADMgC,EAAaO,uBAAanB,EAAKP,MAAMG,YAAYwB,sBARzChF,EAAAE,KAAA,GAUczF,IAAWa,KAAK2J,KAAKC,UAAUV,IAV7C,QAURC,EAVQzE,EAAAI,KAWRsE,GAAO,IAAIS,MAAOC,UAAU3J,WAC5BkJ,EAAaU,IAAY1D,cAAc3G,EAAOsK,OAAO,CACvDtK,EAAOC,KAAKoK,IAAYnD,cAAc5F,SAAU,QAChDtB,EAAOC,KAAKqI,EAAO,QACnBtI,EAAOC,KAAKwJ,EAAe,QAC3BzJ,EAAOC,KAAKyJ,EAAM,WAEtBa,IAAiBpB,gBAAgBkB,IAAYnD,cAAc5F,SAAUgH,EAAOmB,EAAeC,EAAMC,GAC5FxG,KAAK,WACFkG,EAAuBmB,sBACvBlB,EAAgBmB,uBAChBlB,EAAuBO,YAAY,qCAtB7B,yBAAA9E,EAAAK,SAAAV,EAAAW,WA0BlBoF,oCAAiB,SAAAnF,IAAA,IAAAoF,EAAAtB,EAAAuB,EAAArB,EAAAsB,EAAAvJ,EAAAkI,EAAAC,EAAAC,EAAAC,EAAA,OAAA9E,EAAAC,EAAAC,KAAA,SAAAS,GAAA,cAAAA,EAAAP,KAAAO,EAAAN,MAAA,cAAAyF,EAC6D/B,EAAKgB,MAAxEP,EADMsB,EACNtB,uBAAwBuB,EADlBD,EACkBC,gBAAiBrB,EADnCoB,EACmCpB,uBADnCsB,EAEMR,IAAYnD,cAAxB5F,EAFMuJ,EAENvJ,SAEPkG,EADMgC,EAAaO,uBAAanB,EAAKP,MAAMG,YAAYwB,sBAH1CxE,EAAAN,KAAA,EAKezF,IAAWa,KAAK2J,KAAKC,UAAUV,IAL9C,OAKPC,EALOjE,EAAAJ,KAMPsE,GAAO,IAAIS,MAAOC,UAAU3J,WAC5BkJ,EAAaU,IAAY1D,cAAc3G,EAAOsK,OAAO,CACvDtK,EAAOC,KAAKqB,EAAU,QACtBtB,EAAOC,KAAK2K,EAAgBE,WAAY,QACxC9K,EAAOC,KAAKwJ,EAAe,QAC3BzJ,EAAOC,KAAKyJ,EAAM,WAEtBa,IAAiBG,eAAepJ,EAAUsJ,EAAgBE,WAAYrB,EAAeC,EAAMC,GACtFxG,KAAK,WACFkG,EAAuBmB,sBACvBI,EAAgBG,uBAChBxB,EAAuBO,YAAY,yBAjB9B,yBAAAtE,EAAAH,SAAAE,EAAAD,WAqBjB0F,WAAa,WAAM,IACRC,EAAYrC,EAAKgB,MAAjBqB,SAC8B,QAAjCA,EAASC,oBAA+BtC,EAAKO,kBACP,UAAjC8B,EAASC,qBAAiCtC,EAAK8B,0FAGnD,IAAAS,EACuB7F,KAAKsE,MAA1BwB,EADFD,EACEC,QAASH,EADXE,EACWF,SACTzC,EAAelD,KAAK+C,MAApBG,YACD6C,EAA8C,QAAjCJ,EAASC,oBACxBI,EAAAxG,EAAAyG,cAACC,EAAA1G,EAAD,CACI2G,UAAQ,EACRC,WAAS,EACTC,MAAM,QACNC,UAAWR,EAAQS,UACnBC,OAAO,SACPC,aAAa,MACbC,SAAU1G,KAAKwD,aAAa,SAC5BmD,MAAO3G,KAAK+C,MAAME,sBAEtB,GACJ,OACI+C,EAAAxG,EAAAyG,cAACW,EAAA,SAAD,KACKb,EACDC,EAAAxG,EAAAyG,cAAA,OAAKY,MAAO,CAACC,aAAc,MAC3Bd,EAAAxG,EAAAyG,cAACc,EAAA,OAAD,CACI7D,YAAaA,EACb8D,iBAAiB,eACjBC,gBAAgB,cAChB5D,oBAAqBrD,KAAKqD,oBAC1B6D,YAAa,CAACC,OAAQ,oBAAqBC,OAAQ,UAEvDpB,EAAAxG,EAAAyG,cAACoB,EAAA,EAAD,CAAQC,QAAQ,YAAYC,QAASvH,KAAK0F,WAAY8B,MAAM,UAAUlB,UAAWR,EAAQ2B,WACpF9B,EAAS+B,qBACV1B,EAAAxG,EAAAyG,cAAC0B,EAAAnI,EAAD,CAAU8G,UAAWR,EAAQ8B,oBAlGfC,qBAyGnBC,yBAzIA,SAAAC,GAAK,MAAK,CACrBxB,UAAW,CACPyB,YAAaD,EAAME,QAAQC,MAE/BN,SAAU,CACNO,WAAYJ,EAAME,QAAQC,MAE9BT,UAAW,CACPD,MAAOO,EAAMK,QAAQC,OAAOC,MAC5BC,gBAAiBC,IAAK,KACtBC,UAAW,CACPF,gBAAiBC,IAAK,MAE1BE,UAAgC,EAArBX,EAAME,QAAQC,KACzBpB,aAAciB,EAAME,QAAQC,QA2HrBJ,CAAmBlF,wfCrH5B+F,EAAS,SAAAZ,GAAK,MAAK,CACrBa,cAAe,CACXC,SAAU,EACVH,UAAW,GAEfI,SAAU,CACNC,MAA4B,IAArBhB,EAAME,QAAQC,KACrBc,SAAU,OACVlC,aAAc,IAElBmC,KAAM,CACFC,QAA8B,EAArBnB,EAAME,QAAQC,MAE3BiB,YAAa,GACbC,cAAe,CACXF,QAA8B,EAArBnB,EAAME,QAAQC,MAE3BmB,SAAU,CACN7B,MAAOO,EAAMK,QAAQC,OAAOiB,MAC5Bf,gBAAiBgB,IAAM,KACvBd,UAAW,CACPF,gBAAiBgB,IAAM,MAE3BC,QAAS,OACThD,OAAQ,UAEZiD,iBAAkB,CACdD,QAAS,QACThD,OAAQ,YAMVkD,GAFL7G,YAAO,WAAY,qBACnBC,0BAEG,SAAA4G,EAAYpF,GAAO,IAAAhB,EAAA,OAAAZ,OAAAiH,EAAA,EAAAjH,CAAA1C,KAAA0J,IACfpG,EAAAZ,OAAAkH,EAAA,EAAAlH,CAAA1C,KAAA0C,OAAAmH,EAAA,EAAAnH,CAAAgH,GAAAI,KAAA9J,KAAMsE,KAIVvB,MAAQ,CACJgH,WAAY,GACZC,WAAY,EACZC,UAAU,GARK3G,EAWnB4G,mBAAqB,WAAM,IAChB1E,EAAclC,EAAKgB,MAAnBkB,WACPlC,EAAKC,SAAS,CAAC0G,UAAU,IACzBhF,IAAiBkF,4BAA4B3E,GAAY3H,KAAK,SAAAuM,GAC1D,IAAMC,EAAW,GACjBD,EAAEE,MAAMC,QAAQ,SAAAvM,GAAG,OAAIqM,EAASG,KAAKrQ,IAAWmB,MAAM0C,EAAIyM,gBAC1D7P,QAAQ8P,IAAIL,GAAUxM,KAAK,SAAC8M,GACxBP,EAAEE,MAAMjI,IAAI,SAACrE,EAAK4M,GAEd,OADA5M,EAAIyM,YAActH,cAAY0H,kBAAkBC,yBAAenG,KAAKoG,MAAMJ,EAAUC,MAC7E5M,IAEXsF,EAAKC,SAAS,CAACwG,WAAYK,EAAEE,MAAON,WAAYI,EAAEJ,WAAYC,UAAU,SApBhF3F,EAAMgB,gBAAgB0F,yBAAyB1H,EAAK4G,oBAFrC5G,mFA6BftD,KAAKkK,sDAGA,IACEpE,EAAW9F,KAAKsE,MAAhBwB,QACP,OACIE,EAAAxG,EAAAyG,cAACW,EAAA,SAAD,KACK5G,KAAK+C,MAAMgH,WAAW1H,IAAI,SAAC4I,EAAML,GAC9B,OAAQ5E,EAAAxG,EAAAyG,cAACiF,EAAA1L,EAAD,CAAM2L,IAAKF,EAAKG,SAAUC,MAAI,EAAC/E,UAAWR,EAAQgD,UACtD9C,EAAAxG,EAAAyG,cAACqF,EAAA9L,EAAD,CAAM+L,UAAW,GAAIjF,UAAWR,EAAQmD,MACpCjD,EAAAxG,EAAAyG,cAACuF,EAAAhM,EAAD,CACIiM,OACIzF,EAAAxG,EAAAyG,cAACyF,EAAAlM,EAAD,CAAQmM,aAAW,UACf3F,EAAAxG,EAAAyG,cAAC2F,EAAApM,EAAD,OAGRqM,OAAQ,KAAO,EAAIjB,GACnB5H,MAAOiI,EAAKnP,SAASC,SACrB+P,UAAWb,EAAKc,YAAYC,aAEhChG,EAAAxG,EAAAyG,cAACgG,EAAAzM,EAAD,CAAa8G,UAAWR,EAAQqD,aAC5BnD,EAAAxG,EAAAyG,cAACiG,EAAA,OAAD,CAAQC,eAAa,EAACjJ,YAAa+H,EAAKR,YAAa2B,UAAU,SAK/EpG,EAAAxG,EAAAyG,cAACiF,EAAA1L,EAAD,CAAM6L,MAAI,EAAC/E,UAAWR,EAAQgD,UAC1B9C,EAAAxG,EAAAyG,cAAA,OAAKK,UAAWR,EAAQsD,eACnBpJ,KAAK+C,MAAMkH,SACRjE,EAAAxG,EAAAyG,cAACoG,EAAA7M,EAAD,CACI2L,IAAI,UACJmB,IAAE,EACFC,eAAa,GAEbvG,EAAAxG,EAAAyG,cAACuG,EAAAhN,EAAD,CAAK+H,QAASvH,KAAKkK,mBAAoB5D,UAAWR,EAAQuD,SAAU7B,MAAM,WACtExB,EAAAxG,EAAAyG,cAACwG,EAAAjN,EAAD,QAGPwG,EAAAxG,EAAAyG,cAACyG,EAAAlN,EAAD,CAAkBmN,KAAM,GAAIrG,UAAWR,EAAQ2D,6BApElD5B,qBA4EpB+E,GAAoB9E,qBAAWa,EAAXb,CAAmB4B,IAIvCmD,GAFLhK,YAAO,WAAY,kBAAmB,mBAAoB,4BAC1DC,yNAEGC,MAAQ,CACJ+J,WAAY,GACZtH,WAAY,GACZuH,cAAe5J,cAAYC,cAC3B4J,YAAa,GACbC,YAAa,GACblB,YAAa,GACbmB,WAAY,GACZC,GAAI,EACJC,KAAM,KAqCVC,iDAAa,SAAAhO,EAAOiO,EAAMC,GAAb,IAAAC,EAAAC,EAAAxJ,EAAAsB,EAAAvJ,EAAAwJ,EAAApB,EAAAC,EAAA,OAAA9E,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAA4N,EAC0CE,EAAKpJ,MAAjDmJ,EADED,EACFC,iBAAkBxJ,EADhBuJ,EACgBvJ,uBACpBwJ,EAAiB9L,aAFb,CAAAjC,EAAAE,KAAA,eAAAF,EAAAS,OAAA,SAEkC8D,EAAuBO,YAAY,wBAFrE,cAAA9E,EAAAC,KAAA,EAAA4F,EAIcR,IAAYnD,cAAxB5F,EAJFuJ,EAIEvJ,SACAwJ,EAAckI,EAAKpJ,MAAMqJ,MAAMzO,OAA/BsG,WACDpB,GAAO,IAAIS,MAAOC,UAAU3J,WAC5BkJ,EAAaU,IAAY1D,cAAc3G,EAAOsK,OAAO,CACvDtK,EAAOC,KAAKqB,EAAU,QACtBtB,EAAOC,KAAK6K,EAAY,QACxB9K,EAAOC,KAAK2S,EAAM,QAClB5S,EAAOC,KAAKyJ,EAAM,WAXjB1E,EAAAE,KAAA,GAaCqF,IAAiB2I,cAAc5R,EAAUwJ,EAAY8H,EAAMlJ,EAAMC,GAClExG,KAAK,WACF6P,EAAKnK,SAALb,OAAAmL,EAAA,EAAAnL,CAAA,GAAgB6K,EAASG,EAAK3K,MAAMwK,GAAU,IAC9CtJ,EAAuBO,YAAY,mCAhBtC,QAAA9E,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAG,GAAAH,EAAA,SAmBLuE,EAAuB6J,mBAnBlB,yBAAApO,EAAAK,SAAAV,EAAAW,KAAA,uEAuBb+N,aAAe,WACXL,EAAKL,WAAW,IAAK,SAGzBW,eAAiB,WACbN,EAAKL,WAAW,KAAM,6FA7DIrN,KAAKsE,MAAxBgB,gBACS2I,cAAcjO,KAAKsE,MAAMqJ,MAAMzO,OAAOsG,6LAIXxF,KAAKsE,MAAzCqB,aAAU1B,2BACjB0B,EAASuI,mBAAkB,GAC3BvI,EAASwI,iBACTxI,EAASyI,mBACF5I,EAAcxF,KAAKsE,MAAMqJ,MAAMzO,OAA/BsG,6BAEsBP,IAAiBoJ,UAAU7I,iBAA9C8I,SAEN3I,EAASwI,eAAeG,EAAWrB,uBACL9S,IAAWmB,MAAMgT,EAAWvB,8BAApDwB,SACND,EAAWvB,cAAgB5J,cAAY0H,kBAAkBC,yBAAenG,KAAKoG,MAAMwD,KACnFvO,KAAKuD,SAAS+K,aACWrJ,IAAiBrD,YAAY0M,EAAWxB,2BAA3DI,SACNlN,KAAKuD,SAAS,CAAC2J,WAAYA,cACFjI,IAAiBuJ,cAAchJ,WAAlDiJ,SACNzO,KAAKuD,SAAS,CAAC4J,GAAIsB,EAAWtB,GAAIC,KAAMqB,EAAWrB,yDAEnDnJ,EAAuB6J,8KAIR,IACZnI,EAAY3F,KAAKsE,MAAjBqB,SACPA,EAASwI,iBACTxI,EAASuI,mBAAkB,GAC3BvI,EAAS+I,4DAkCJ,IACE5I,EAAW9F,KAAKsE,MAAhBwB,QACP,OACIE,EAAAxG,EAAAyG,cAACiF,EAAA1L,EAAD,CAAMmP,WAAS,EAACC,UAAU,SAASC,QAAQ,SAASC,WAAW,SACzDxI,UAAWR,EAAQ8C,eACrB5C,EAAAxG,EAAAyG,cAACiF,EAAA1L,EAAD,CAAM6L,MAAI,EAAC/E,UAAWR,EAAQgD,UAC1B9C,EAAAxG,EAAAyG,cAACqF,EAAA9L,EAAD,CAAM8G,UAAWR,EAAQmD,KAAMsC,UAAW,IACtCvF,EAAAxG,EAAAyG,cAACuF,EAAAhM,EAAD,CACIiM,OACIzF,EAAAxG,EAAAyG,cAACyF,EAAAlM,EAAD,CAAQmM,aAAW,UACf3F,EAAAxG,EAAAyG,cAAC2F,EAAApM,EAAD,OAGRqM,OAAO,KACP7I,MAAOhD,KAAK+C,MAAMmK,WAAWnR,SAC7B+P,UAAW9L,KAAK+C,MAAMgJ,YAAc/L,KAAK+C,MAAMgJ,YAAYC,WAAahM,KAAK+C,MAAMgJ,cAEvF/F,EAAAxG,EAAAyG,cAACgG,EAAAzM,EAAD,CAAa8G,UAAWR,EAAQqD,aAC5BnD,EAAAxG,EAAAyG,cAACiG,EAAA,OAAD,CAAQC,eAAa,EAACjJ,YAAalD,KAAK+C,MAAMgK,cAAeX,UAAU,KAE3EpG,EAAAxG,EAAAyG,cAAC8I,EAAAvP,EAAD,CAAa8G,UAAWR,EAAQkJ,QAASC,sBAAoB,GACzDjJ,EAAAxG,EAAAyG,cAACiJ,EAAA1P,EAAD,CAAY+H,QAASvH,KAAK+N,aAAcpC,aAAW,WAC/C3F,EAAAxG,EAAAyG,cAACkJ,EAAA3P,EAAD,OAEHQ,KAAK+C,MAAMoK,GACZnH,EAAAxG,EAAAyG,cAACiJ,EAAA1P,EAAD,CAAY+H,QAASvH,KAAKgO,eAAgBrC,aAAW,aACjD3F,EAAAxG,EAAAyG,cAACmJ,EAAA5P,EAAD,OAEHQ,KAAK+C,MAAMqK,QAIxBpH,EAAAxG,EAAAyG,cAAC2G,GAAD,CAAmBpH,WAAYxF,KAAKsE,MAAMqJ,MAAMzO,OAAOsG,qBA9G9CqC,qBAoHVC,yBAAWa,EAAXb,CAAmB+E,wXCnN5BwC,EADLxM,YAAO,WAAY,mBAAoB,uOAEpCE,MAAQ,CACJuM,SAAS,EACTC,cAAe,GACfC,YAAY,EACZC,YAAY,EACZC,iBAAiB,EACjBC,cAAc,KAWlBC,oBAAsB,SAAAnM,GAClBH,EAAKC,SAAS,CAACgM,cAAe9L,EAAME,OAAOC,MAAO4L,YAAY,OAGlEK,eAAiB,SAAApM,GACbH,EAAKC,SAAS,CAAC+L,QAAS7L,EAAME,OAAOmM,aAGzCC,sDAAkB,SAAA1Q,EAAMoE,GAAN,IAAAK,EAAAkM,EAAAvC,EAAAxJ,EAAAlI,EAAAuD,EAAAlD,EAAA6T,EAAAC,EAAA7L,EAAA8L,EAAA,OAAA5Q,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAkE,EAC8CR,EAAKgB,MAA1D0L,EADOlM,EACPkM,QAASvC,EADF3J,EACE2J,iBAAkBxJ,EADpBH,EACoBG,uBAC9BX,EAAKP,MAAMwM,eACX9L,EAAM2M,iBAGJrU,EAAWuH,EAAKP,MAAMwM,cAAchL,OAN5B,CAAA7E,EAAAE,KAAA,eAQV0D,EAAKC,SAAS,CAACiM,YAAY,IAC3BvL,EAAuBO,YAAY,uCATzB9E,EAAAS,OAAA,wBAYdmD,EAAKC,SAAS,CAACkM,YAAY,EAAMC,iBAAiB,EAAMC,cAAc,IAEhErQ,EAAUyF,IAAY7D,gBACtB9E,EAAkB1B,EAAOC,KAAK2E,EAAQpB,WAAW/C,SAAS,UAC1D8U,GAAO,IAAIpL,MAAOC,UAAU3J,WAC5B+U,EAAMxV,EAAOsK,OAAO,CACtBtK,EAAOC,KAAKoB,EAAU,QACtBrB,EAAOC,KAAK2E,EAAQpB,WACpBxD,EAAOC,KAAKsV,EAAM,UAEhB5L,EAAaU,IAAY1D,cAAc6O,EAAK5Q,EAAQnB,WAtB5CuB,EAAAE,KAAA,GA0BMqF,IAAiBoL,sBAAsBtU,EAAUK,EAAiB6T,EAAM5L,GA1B9E,eA0BR8L,EA1BQzQ,EAAAI,KA2BdpB,QAAQC,IAAIwR,GA3BEzQ,EAAAE,KAAA,GA4BRmF,IAAY3D,SAASrF,EAAUuD,EAAS2Q,EAAME,EAAMrS,KAAKwS,MA5BjD,QA6Bd7C,EAAiB9L,cAAe,EAChC8L,EAAiB8C,YAAYxL,IAAYnD,eACzCqC,EAAuBO,YAAY,2BAEnCwL,EAAQxF,KAAK,KAjCC,yBAAA9K,EAAAK,SAAAV,EAAAW,kJAhBE,IAAAqF,EAC6CrF,KAAKsE,MAA3DqB,EADSN,EACTM,SAAU8H,EADDpI,EACCoI,iBAAkBxJ,EADnBoB,EACmBpB,uBACnC0B,EAASwI,iBACLV,EAAiBlR,aAAekR,EAAiB9L,cACjDsC,EAAuBO,YAAY,8EAgDlC,IAAAqB,EAC+B7F,KAAKsE,MAAlCwB,EADFD,EACEC,QAAS2H,EADX5H,EACW4H,iBAChB,OAAKA,EAAiBlR,YAAckR,EAAiB9L,aAC1CqE,EAAAxG,EAAAyG,cAACuK,EAAA,EAAD,CAAUC,GAAG,MAGpBzK,EAAAxG,EAAAyG,cAACyK,EAAAlR,EAAD,CAAMmP,WAAS,EAACC,UAAU,SAASC,QAAQ,SAASC,WAAW,SACzDxI,UAAWR,EAAQ8C,eACrB5C,EAAAxG,EAAAyG,cAACyK,EAAAlR,EAAD,CAAM6L,MAAI,EAAC/E,UAAWR,EAAQgD,UAC1B9C,EAAAxG,EAAAyG,cAAC0K,EAAAnR,EAAD,CAAO+L,UAAW,GAAIqF,QAAQ,EAAMtK,UAAWR,EAAQ+K,OACnD7K,EAAAxG,EAAAyG,cAAC6K,EAAAtR,EAAD,CAAY8H,QAAQ,KAAKyJ,MAAM,UAA/B,gBAGA/K,EAAAxG,EAAAyG,cAAC+K,EAAAxR,EAAD,CAASqH,MAAO,CAAC6B,UAAW,QAC5B1C,EAAAxG,EAAAyG,cAAA,QAAM4F,OAAO,IAAIvF,UAAWR,EAAQ6I,UAAWlI,aAAa,OACxDT,EAAAxG,EAAAyG,cAACgL,EAAAzR,EAAD,CACI6G,MAAM,sBACNM,MAAO3G,KAAK+C,MAAMyM,WAClBlJ,UAAWR,EAAQS,UACnB2K,SAAUlR,KAAK+C,MAAM4M,aACrBnJ,OAAO,SACPc,QAAQ,WACRhF,KAAK,OACL8D,WAAS,EACTD,UAAQ,EACRO,SAAU1G,KAAK4P,sBAGnB5J,EAAAxG,EAAAyG,cAACkL,EAAA3R,EAAD,CAAkB8G,UAAWR,EAAQsL,SACnBC,QACIrL,EAAAxG,EAAAyG,cAACqL,EAAA9R,EAAD,CAEIkH,SAAU1G,KAAK6P,eACfqB,SAAUlR,KAAK+C,MAAM2M,kBAG7BrJ,MAAOL,EAAAxG,EAAAyG,cAAA,wCAA+BD,EAAAxG,EAAAyG,cAACsL,EAAA,EAAD,CAAMd,GAAI,UAAV,mBAA/B,OAIzBzK,EAAAxG,EAAAyG,cAACoB,EAAA,EAAD,CAAQ6J,UAAWlR,KAAK+C,MAAMuM,SAAWtP,KAAK+C,MAAM0M,WAAYnN,KAAK,SAC7DgF,QAAQ,YACRhB,UAAWR,EAAQ2B,UACnBF,QAASvH,KAAK+P,gBACdvI,MAAM,WAJd,WAMIxB,EAAAxG,EAAAyG,cAAC0B,EAAAnI,EAAD,CAAU8G,UAAWR,EAAQ8B,uBA5GlCC,iBAsHZC,yBA3JA,SAAAC,GAAK,MAAK,CACrBa,cAAe,CACXC,SAAU,EACVH,UAAW,IAEfI,SAAU,CACN1B,OAAQ,MACR2B,MAAO,MACPjC,aAAc,IAElB+J,MAAMnO,OAAA8O,EAAA,EAAA9O,CAAA,GACCqF,EAAM0J,OAAOC,UADf,CAEDC,WAAiC,EAArB5J,EAAME,QAAQC,KAC1B0J,cAAoC,EAArB7J,EAAME,QAAQC,OAEjCyG,UAAW,CACPnF,QAAS,OACTqI,SAAU,QAEdtL,UAAW,CACP4B,WAAYJ,EAAME,QAAQC,KAC1BF,YAAaD,EAAME,QAAQC,MAE/BkJ,SAAU,CACNrI,MAAO,OACPZ,WAAYJ,EAAME,QAAQC,KAC1BF,YAAaD,EAAME,QAAQC,MAE/BT,UAAW,CACPjB,OAAQ,UAEZoB,SAAU,CACNO,WAAYJ,EAAME,QAAQC,QA2HnBJ,CAAmBuH,gNC9K5ByC,EAAQpW,EAAQ,KAChBqW,EAASrW,EAAQ,KAEjBsW,aACF,SAAAA,IAA6D,IAAjDC,EAAiD3X,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA1C,YAAa4X,EAA6B5X,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAtB,GAAI6X,EAAkB7X,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAAAoI,OAAA0P,EAAA,EAAA1P,CAAA1C,KAAAgS,GACzDhS,KAAKqS,QAAL,GAAArN,OAAkBmN,EAAW,QAAU,OAAvC,OAAAnN,OAAmDiN,GAAnDjN,OAA0DkN,EAAO,IAAMA,EAAOA,EAA9E,KACIC,IAAUnS,KAAKqS,QAAL,WAAArN,OAA0BiN,EAA1B,6LAIAH,EAAMtV,IAAIwD,KAAKqS,QAAU,6DAAuBvU,kLAGlD0H,kFACN8M,EAAc,CAAC9M,WAAYA,YACbsM,EAAMtV,IAAIwD,KAAKqS,QAAU,aAAc,CAACnT,OAAQoT,kBAA9DxU,SAA6EA,MAC9EiO,YAAcgG,EAAOQ,SAASzU,EAAKiO,gCACjCjO,kLAGO9B,gFACRsW,EAAc,CAACtW,SAAUA,YACjB8V,EAAMtV,IAAIwD,KAAKqS,QAAU,gBAAiB,CAACnT,OAAQoT,2CAAexU,yLAG9D0H,kGAAYgN,iCAAO,EAAGC,iCAAU,IAC5CH,EAAc,CAAC9M,WAAYA,EAAYgN,KAAMA,EAAMC,QAASA,YAC9CX,EAAMtV,IAAIwD,KAAKqS,QAAU,oBAAqB,CAACnT,OAAQoT,kBAArExU,SAAoFA,MACrFwM,MAAMjI,IAAI,SAACrE,GAEZ,OADAA,EAAI+N,YAAcgG,EAAOQ,SAASvU,EAAI+N,cAC/B/N,sBAEJF,kMAGuB0H,2GAAYgN,iCAAO,EAAGC,iCAAU,aAC3CzS,KAAK0S,gBAAgBlN,EAAYgN,EAAMC,aAApDE,kDAEK,kBAELC,EAAc,GACpBD,EAAIrI,MAAMC,QAAQ,SAACU,GACf2H,EAAYpI,KAAKlH,EAAK1B,YAAYqJ,EAAKjP,uBAEnBpB,QAAQ8P,IAAIkI,kBAA9BC,SACNF,EAAIrI,MAAMjI,IAAI,SAACrE,EAAK4M,GAGhB,OAFA5M,EAAIlC,SAAW+W,EAAUjI,UAClB5M,EAAIlC,SAASM,gBACb4B,sBAEJ2U,qLAGSnN,gFACV8M,EAAc,CAAC9M,WAAYA,YACnBsM,EAAMtV,IAAIwD,KAAKqS,QAAU,kBAAmB,CAACnT,OAAQoT,2CAAexU,uJAGhE/B,EAAUmC,EAAW6N,EAAa+G,GACpD,OAAOhB,EAAM7G,KAAKjL,KAAKqS,QAAU,wBAAyB,CAACtW,WAAUmC,YAAW6N,cAAa+G,sDAGjFhG,EAAYG,EAAaF,EAAehB,EAAa+G,GACjE,OAAOhB,EAAM7G,KAAKjL,KAAKqS,QAAU,iBAAkB,CAC/CvF,aACAG,cACAF,gBACAhB,cACA+G,qDAIO9W,EAAUwJ,EAAYiF,EAAasB,EAAa+G,GAC3D,OAAOhB,EAAM7G,KAAKjL,KAAKqS,QAAU,qBAAsB,CACnDrW,WACAwJ,aACAiF,cACAsB,cACA+G,oDAIM9W,EAAUwJ,EAAY8H,EAAMvB,EAAa+G,GACnD,OAAOhB,EAAM7G,KAAKjL,KAAKqS,QAAU,eAAgB,CAC7CrW,WACAwJ,aACA8H,OACAvB,cACA+G,uBAKG1S,EAAA,MAAI4R,EAAiB,wBAAyB,IAAI,6LCjF7Ce,QACa,cAA7BvX,OAAOwX,SAASC,UAEa,UAA7BzX,OAAOwX,SAASC,UAEhBzX,OAAOwX,SAASC,SAAStF,MACrB,0RC0BOuF,MArCVrH,KAAOsH,QAIPtH,KAAOsH,QAIPtH,KAAOsH,QAIPtH,KAAOsH,QAIPtH,KAAOsH,QAIPtH,KAAOsH,iPApBiC,IAAZnQ,EAAY1I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GACjC0F,KAAKoT,SAAWpQ,4CAGYqQ,GAC5BrT,KAAKsT,eAAiBD,8CAItBrT,KAAK4F,oBAAsB,iDAI3B5F,KAAK4F,oBAAsB,2DAI3B5F,KAAK4F,oBAAsB,iDAI3BlH,QAAQC,IAAI,mEAIZ,MAAiC,QAA7BqB,KAAK4F,oBAAsC,cACT,UAA7B5F,KAAK4F,oBAAwC,aAC/C,gDAIP,MAAiC,QAA7B5F,KAAK4F,oBAAsC,SACT,UAA7B5F,KAAK4F,oBAAwC,QAC/C,mDArCV2N,8EAAsB,mDACtBA,+EAA4B,uDAC5BA,8EAAiC,0zBA0BjCC,uIAMAA,mGCMUC,MAhCV5H,KAAOsH,QAOPtH,KAAOsH,QAMPtH,KAAOsH,QAMPtH,KAAOsH,QAIPtH,KAAOsH,qTAvByF,IAAAO,EAAAC,EAAtE5X,gBAAsE,IAAA2X,EAA3D,GAA2DA,EAAAE,EAAAD,EAAvD3X,gBAAuD,IAAA4X,EAA5C,GAA4CA,EAAAC,EAAAF,EAAxC1X,kBAAwC,IAAA4X,EAA3B,GAA2BA,EAAAC,EAAAH,EAAvBzX,qBAAuB,IAAA4X,EAAP,KAAOA,EAC7F9T,KAAKlE,SAASC,SAAWA,EACzBiE,KAAKlE,SAASE,SAAWA,EACzBgE,KAAKlE,SAASG,WAAaA,EAC3B+D,KAAKlE,SAASI,cAAgBA,2CAI9B8D,KAAK+T,aAAe,mEACpB/T,KAAKgU,YAAc,SACnBhU,KAAKzD,YAAa,wCAIlByD,KAAK+T,aAAe,0DACpB/T,KAAKgU,YAAc,QACnBhU,KAAKzD,YAAa,yCAIlBwI,KAAYjE,uDAIZd,KAAK+T,aAAe,GACpB/T,KAAKgU,YAAc,QACnBhU,KAAKzD,YAAa,EAClByD,KAAK2B,cAAe,EACpB3B,KAAKlE,SAAW,CAACC,SAAU,GAAIC,SAAU,GAAIC,WAAY,GAAIC,cAAe,0DAlC/EqX,8EAA0B,gDAC1BA,8EAAyB,+CACzBA,+EAAwB,gDACxBA,+EAA0B,4CAC1BA,8EAAsB,CAACxX,SAAU,GAAIC,SAAU,GAAIC,WAAY,GAAIC,cAAe,ilBCKxE+X,MATVpI,KAAOsH,QAIPtH,KAAOsH,mKAHJnT,KAAKkU,mBAAoB,gDAIzBlU,KAAKkU,mBAAoB,2DAP5BX,+EAA+B,4QCSrBY,MATVtI,KAAOsH,QAIPtH,KAAOsH,yHAJ+BiB,GACnCpU,KAAKqU,qBAAuBD,iDAIxBpU,KAAKqU,sBAAsBrU,KAAKqU,qTCU7BC,MAbVzI,KAAOsH,QAIPtH,KAAOsH,QAIPtH,KAAOsH,qJARoB3N,GACxBxF,KAAKwF,WAAaA,mDAGiB4O,GACnCpU,KAAKuU,qBAAuBH,iDAIxBpU,KAAKuU,sBAAsBvU,KAAKuU,yEAXvChB,8EAAwB,kZCiBdiB,MAdV3I,KAAOsH,QAKPtH,KAAOsH,QAIPtH,KAAOsH,mLAT4B,IAAVsB,EAAUna,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAC5B0F,KAAKsB,QAAUmT,EACfzU,KAAK0U,MAAO,wCAIZ1U,KAAK0U,MAAO,6CAIZ1U,KAAKwE,YAAY,yEAbpB+O,+EAAkB,2CAClBA,8EAAqB,+4BCqCpBoB,WAFL9R,aAAO,sBACPC,0NAGG8R,oBAAsB,WAAM,IACjBnH,EAAoBnK,EAAKgB,MAAzBmJ,iBACP1I,KAAYlD,aACZ4L,EAAiB5L,aACjB4L,EAAiBoH,wFAGZ,IACEpH,EAAoBzN,KAAKsE,MAAzBmJ,iBACP,MAAqC,WAAjCA,EAAiBuG,YACVc,GAAAtV,EAAAyG,cAAC8O,GAAAvV,EAAD,CAAQ8H,QAAQ,YAAYE,MAAM,YAAYD,QAASvH,KAAK4U,qBAC/DE,GAAAtV,EAAAyG,cAAC+O,GAAAxV,EAAD,MACCiO,EAAiBuG,aAGW,UAAjCvG,EAAiBuG,YACVc,GAAAtV,EAAAyG,cAAC8O,GAAAvV,EAAD,CAAQqH,MAAO,CAACoO,cAAe,QAAS1N,QAASvH,KAAK4U,oBAAqBtO,UAAU,iBACtGwO,GAAAtV,EAAAyG,cAAA,QAAMK,UAAU,uBACdwO,GAAAtV,EAAAyG,cAAA,OAAKiP,QAAQ,cAAcC,MAAM,8BAC7BL,GAAAtV,EAAAyG,cAAA,QACImP,EAAE,uRACF9X,GAAG,QAAQ+X,KAAK,YACpBP,GAAAtV,EAAAyG,cAAA,QACImP,EAAE,sJACF9X,GAAG,QAAQ+X,KAAK,YACpBP,GAAAtV,EAAAyG,cAAA,QACImP,EAAE,iJACF9X,GAAG,QAAQ+X,KAAK,YACpBP,GAAAtV,EAAAyG,cAAA,QACImP,EAAE,+QACFC,KAAK,cAGDP,GAAAtV,EAAAyG,cAAA,QAAMK,UAAU,uBAAhB,wBAGD,UAtCWgP,KAAMzN,oBA4C1B0N,GAFL1S,aAAO,sBACPC,0NAEGC,MAAQ,CACJyS,SAAU9H,EAAKpJ,MAAMkR,YAGzBC,aAAe,SAACf,GAAD,OAAU,WACrBhH,EAAKnK,SAAS,CACViS,SAAUd,8EAIT,IAAA5Q,EAC+B9D,KAAKsE,MAAlCwB,EADFhC,EACEgC,QACD4P,EAFD5R,EACW2J,iBACyB9L,aACrCmT,GAAAtV,EAAAyG,cAAC0P,GAAAnW,EAAD,CAAUoW,QAAM,EAACzK,IAAI,UAAU0K,UAAW,SAAAvR,GAAK,OAAIwQ,GAAAtV,EAAAyG,cAAC6P,GAAA,EAADpT,OAAAqT,OAAA,CAAMtF,GAAG,YAAenM,MACvEwQ,GAAAtV,EAAAyG,cAAC+P,GAAAxW,EAAD,KAAcsV,GAAAtV,EAAAyG,cAACgQ,GAAAzW,EAAD,OACdsV,GAAAtV,EAAAyG,cAACiQ,GAAA1W,EAAD,CAAc2W,QAAQ,aAE1B,GACJ,OACIrB,GAAAtV,EAAAyG,cAAA,WACI6O,GAAAtV,EAAAyG,cAACmQ,GAAA5W,EAAD,CAAY8G,UAAWR,EAAQuQ,WAAY9O,QAASvH,KAAKyV,cAAa,GAAOjO,MAAM,UACvEmE,aAAW,QACnBmJ,GAAAtV,EAAAyG,cAACqQ,GAAA9W,EAAD,OAEJsV,GAAAtV,EAAAyG,cAACsQ,GAAA/W,EAAD,CAAQkV,KAAM1U,KAAK+C,MAAMyS,SAAUgB,QAASxW,KAAKyV,cAAa,IAC1DX,GAAAtV,EAAAyG,cAAA,OACIwQ,SAAU,EACVC,KAAK,SACLnP,QAASvH,KAAKyV,cAAa,GAC3BkB,UAAW3W,KAAKyV,cAAa,IAE7BX,GAAAtV,EAAAyG,cAAA,OAAKK,UAAWR,EAAQ7I,MACpB6X,GAAAtV,EAAAyG,cAAC2Q,GAAApX,EAAD,KACKkW,EACDZ,GAAAtV,EAAAyG,cAAC0P,GAAAnW,EAAD,CAAUoW,QAAM,EAACzK,IAAI,QAAQ0K,UAAW,SAAAvR,GAAK,OAAIwQ,GAAAtV,EAAAyG,cAAC6P,GAAA,EAADpT,OAAAqT,OAAA,CAAMtF,GAAG,UAAanM,MACnEwQ,GAAAtV,EAAAyG,cAAC+P,GAAAxW,EAAD,KAAcsV,GAAAtV,EAAAyG,cAAC4Q,GAAArX,EAAD,OACdsV,GAAAtV,EAAAyG,cAACiQ,GAAA1W,EAAD,CAAc2W,QAAQ,WAE1BrB,GAAAtV,EAAAyG,cAAC0P,GAAAnW,EAAD,CAAUoW,QAAM,EAACzK,IAAI,mBACX0K,UAAW,SAAAvR,GAAK,OAAIwQ,GAAAtV,EAAAyG,cAAC6P,GAAA,EAADpT,OAAAqT,OAAA,CAAMtF,GAAG,UAAanM,MAChDwQ,GAAAtV,EAAAyG,cAAC+P,GAAAxW,EAAD,KAAcsV,GAAAtV,EAAAyG,cAAC6Q,GAAAtX,EAAD,OACdsV,GAAAtV,EAAAyG,cAACiQ,GAAA1W,EAAD,CAAc2W,QAAQ,yBAKtCrB,GAAAtV,EAAAyG,cAAC8Q,GAAAvX,EAAD,MACAsV,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAMmP,WAAS,EAACC,UAAU,SAASC,QAAQ,gBAAgBC,WAAW,SAChEjI,MAAO,CAACqC,QAAS,KACnB4L,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAM6L,MAAI,GACNyJ,GAAAtV,EAAAyG,cAACgR,GAAD,OAEJnC,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAM6L,MAAI,EAACxE,MAAO,CAACqQ,SAAU,WAAYC,OAAQ,OAC7CrC,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYqW,UAAU,IAAIrO,MAAM,gBAAgBuJ,MAAM,UAAtD,iCAGA+D,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYqW,UAAU,IAAIrO,MAAM,gBAAgBuJ,MAAM,UAAtD,mCAzDEuE,KAAMzN,mBAwErBC,yBAlIA,CACX7K,KAAM,CACF8L,MAAO,KAEXsO,SAAU,CACNtO,MAAO,QAEXsN,WAAY,CACRlO,YAAa,KA0HNL,CAAmByN,gGCtH5B+B,GAFLzU,aAAO,WAAY,4BACnBC,gMAEY,IAAAgB,EAC+C9D,KAAKsE,MAAlDwB,EADFhC,EACEgC,QAASH,EADX7B,EACW6B,SAAU5B,EADrBD,EACqBC,uBAC1B,OACI+Q,GAAAtV,EAAAyG,cAACsR,GAAA/X,EAAD,CACIgY,kBAAgB,qBAChBC,mBAAiB,2BACjB/C,KAAM3Q,EAAuBmQ,kBAC7BsC,QAASzS,EAAuBmB,qBAEhC4P,GAAAtV,EAAAyG,cAACyR,GAAAlY,EAAD,CAAO+L,UAAW,EAAGqF,QAAM,EAACtK,UAAWR,EAAQ+K,OAC3CiE,GAAAtV,EAAAyG,cAACmQ,GAAA5W,EAAD,CAAY8G,UAAWR,EAAQ6R,SAAUpQ,QAASxD,EAAuBmB,qBACrE4P,GAAAtV,EAAAyG,cAAC2R,GAAApY,EAAD,OAEJsV,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAY8H,QAAQ,KAAKhK,GAAG,eACvBqI,EAASkS,qBAEd/C,GAAAtV,EAAAyG,cAAC6R,GAAA,EAAD,eAjBWjQ,qBAwBhBC,yBAlDA,SAAAC,GAAK,MAAK,CACrB8I,MAAO,CACHqG,SAAU,WACVnO,MAA4B,IAArBhB,EAAME,QAAQC,KACrBc,SAAU,OACV+O,UAAgC,GAArBhQ,EAAME,QAAQC,KACzB8P,UAAW,MACXzP,gBAAiBR,EAAMK,QAAQ6P,WAAWpH,MAC1CqH,UAAWnQ,EAAMoQ,QAAQ,GACzBjP,QAA8B,EAArBnB,EAAME,QAAQC,KACvBkQ,QAAS,OACTC,IAAK,MACLC,KAAM,MACNC,UAAW,yBAEf3Q,SAAU,CACNO,WAAYJ,EAAME,QAAQC,MAE9ByP,SAAU,CACNa,MAAO,WA+BA1Q,CAAmBwP,ICvC5BmB,GAAYC,KAAe,CAC7BtQ,QAAS,CACL+N,QAASwC,WA+BXC,GAFL/V,aAAO,mBAAoB,WAAY,yBAA0B,qBACjEC,0NAEGC,MAAQ,wHAMC,IAAAe,EACkF9D,KAAKsE,MAArFwB,EADFhC,EACEgC,QAASH,EADX7B,EACW6B,SAAU8H,EADrB3J,EACqB2J,iBAAkB1J,EADvCD,EACuCC,uBAAwBC,EAD/DF,EAC+DE,gBAChE6U,EACA/D,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAM6L,MAAI,GACNyJ,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAY8H,QAAQ,KAAKE,MAAM,UAAUlB,UAAWR,EAAQgT,MACvDnT,EAASyN,WAIjBzN,EAAS2N,iBAAgBuF,EAC1B/D,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAM6L,MAAI,EAAC0N,GAAI,GACXjE,GAAAtV,EAAAyG,cAACmQ,GAAA5W,EAAD,CAAYgI,MAAM,UAAUX,MAAO,CAACmB,YAAa,IAAKT,QAASvH,KAAKsE,MAAM0L,QAAQgJ,QAC9ElE,GAAAtV,EAAAyG,cAACgT,GAAAzZ,EAAD,OAEJsV,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAY8H,QAAQ,KAAKE,MAAM,UAAUlB,UAAWR,EAAQgT,MACvDnT,EAASyN,YAItB,IAAI8F,EAAiB,GA4BrB,OA3BIzL,EAAiB9L,cAAiD,QAAjCgE,EAASC,oBAC1CsT,EACIpE,GAAAtV,EAAAyG,cAACkT,GAAA3Z,EAAD,CACI2L,IAAI,UACJmB,IAAI,EACJC,eAAa,GAEbuI,GAAAtV,EAAAyG,cAACmT,GAAA5Z,EAAD,CAAKgI,MAAM,UAAUmF,KAAK,SAAShB,aAAW,MAAMrF,UAAWR,EAAQuT,IAClE9R,QAASxD,EAAuBuV,oBACjCxE,GAAAtV,EAAAyG,cAACsT,GAAA/Z,EAAD,QAILiO,EAAiB9L,cAAiD,UAAjCgE,EAASC,sBACjDsT,EACIpE,GAAAtV,EAAAyG,cAACkT,GAAA3Z,EAAD,CACI2L,IAAI,YACJmB,IAAI,EACJC,eAAa,GAEbuI,GAAAtV,EAAAyG,cAACmT,GAAA5Z,EAAD,CAAKgI,MAAM,YAAYmF,KAAK,SAAShB,aAAW,QAAQrF,UAAWR,EAAQuT,IACtE9R,QAASxD,EAAuBuV,oBACjCxE,GAAAtV,EAAAyG,cAACuT,GAAAha,EAAD,SAMZsV,GAAAtV,EAAAyG,cAACwT,GAAAja,EAAD,CAAkBuI,MAAO0Q,IACrB3D,GAAAtV,EAAAyG,cAAA,OAAKK,UAAWR,EAAQ4T,MACpB5E,GAAAtV,EAAAyG,cAAC0T,GAAAna,EAAD,CAAQ0X,SAAS,SAAS3L,UAAW,GAAIjF,UAAWR,EAAQ8T,QACxD9E,GAAAtV,EAAAyG,cAAC4T,GAAAra,EAAD,KACIsV,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAMmP,WAAS,EAAC1G,QAAS,EAAG4G,QAAQ,gBAAgBC,WAAW,UAC3DgG,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAM6L,MAAI,GACNyJ,GAAAtV,EAAAyG,cAAC6T,GAAD,OAEHjB,EACD/D,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAM6L,MAAI,GACNyJ,GAAAtV,EAAAyG,cAAC6P,GAAA,EAAD,CAAMvO,QAASvD,EAAgBmB,qBAAsBsL,GAAG,KAAIqE,GAAAtV,EAAAyG,cAAA,OAAK8T,IAAKC,KAAMnT,MAAO,CAC/EmC,SAAU,OACViR,cAAe,UAE8Cvc,IAAI,cAKpFwb,GAELpE,GAAAtV,EAAAyG,cAACiU,GAAD,cA5EW5E,KAAMzN,mBAsFlBsS,gBAAWrS,sBAjHX,SAAAC,GAAK,MAAK,CACrB6R,OAAQ,CACJpS,MAAO4S,SAEXV,KAAM,CACF7Q,SAAU,GAEdiQ,KAAM,CACFjQ,SAAU,EACVW,QAAS,eACTyQ,cAAe,UAEnB5D,WAAY,CACRlO,YAAa,IAGjBkR,IAAK,CACDnC,SAAU,QACV1Q,OAAQuB,EAAME,QAAQC,KACtBiP,OAA6B,EAArBpP,EAAME,QAAQC,KACtBmS,MAA4B,EAArBtS,EAAME,QAAQC,KACrBoS,OAAQ,OA4FUxS,CAAmB8Q,iCC5E9B2B,GA1Dd1X,aAAO,iOAGJE,MAAQ,CACJyX,wBAAwB,uFAGP,IAAA9M,EAAA1N,KACXyN,EAAmBzN,KAAKsE,MAAMmJ,iBACpC1I,KAAY1E,KAAK,SAACoa,GACVA,GACAhN,EAAiBiN,iBACjB3V,KAAY9D,cAAcpD,KAAK,SAAC8D,GASxBA,EAIAsD,KAAiBrD,YAAYmD,KAAYnD,cAAc5F,UAClD6B,KAAK,WACF4P,EAAiB9L,aAAeA,EAChC8L,EAAiB8C,YAAYxL,KAAYnD,eACzC8L,EAAKnK,SAAS,CAACiX,wBAAyB7Y,MAE3CgZ,MAAM,SAACC,GACkC,iBAAlCA,EAAEvd,SAASS,KAAK6I,MAAMrF,UACtBmM,EAAiB9L,cAAe,EAChC+L,EAAKnK,SAAS,CAACiX,wBAAwB,QAInD/M,EAAiB9L,aAAeA,EAChC+L,EAAKnK,SAAS,CAACiX,wBAAyB7Y,QAKhD8L,EAAiBoN,iDAMP7a,KAAKsE,MAAhBwB,QACP,OAAI9F,KAAK+C,MAAMyX,uBACJ1F,GAAAtV,EAAAyG,cAAC6U,GAAA,EAAD,CAAUrK,GAAG,kBAEjB,UArDG5I,oJCOZc,GAAS,SAAAZ,GAAK,IAAAgT,EAAA,MAAK,CACrBrB,KAAM,GACNsB,MAAO,CACHC,WAAYlT,EAAMmT,WAAWD,YAEjCE,cAAe,CACX3R,QAAS,OACTsF,WAAY,SACZsM,UAAW,cAEfC,SAAU,CACNC,OAAQ,WAEZC,cAAe,CACX9S,UAAW,CACPF,gBAAiBR,EAAMK,QAAQoT,KAAK,OAG5CC,UAAW,CACPC,KAAM,GAEVC,QAAS,CACLL,OAAQ,WAEZzK,OAAKkK,EAAA,CACD3T,OAAQ,sBADP1E,OAAAkZ,GAAA,EAAAlZ,CAAAqY,EAAA,GAAA/V,OAEG+C,EAAM8T,YAAY1O,GAAG,MAFxB,iCAE+D,CAC5D/F,OAAQ,uBAHX1E,OAAAkZ,GAAA,EAAAlZ,CAAAqY,EAKAhT,EAAM8T,YAAY1O,GAAG,MAAQ,CAC1B/F,OAAQ,uBANX1E,OAAAkZ,GAAA,EAAAlZ,CAAAqY,EAAA,QAQ2B,IAArBhT,EAAME,QAAQC,MARpBxF,OAAAkZ,GAAA,EAAAlZ,CAAAqY,EAAA,WASS,QATTA,KAaHe,8MAMFC,gBAAkB,SAAApI,GAAa,IAAX/I,EAAW+I,EAAX/I,MAAW9G,EACiBR,EAAKgB,MAA1CwB,EADoBhC,EACpBgC,QAASkW,EADWlY,EACXkY,aAAcC,EADHnY,EACGmY,WAE9B,OAAOC,KAAWpW,EAAQuV,SAAUvV,EAAQqV,cAAea,EAA1CtZ,OAAAkZ,GAAA,EAAAlZ,CAAA,GACZoD,EAAQyV,eAA2B,IAAX3Q,GAA8B,MAAdqR,OAIjDE,aAAe,SAAAC,GAAoC,IAAlCC,EAAkCD,EAAlCC,SAAkCC,EAAAF,EAAxBG,mBAAwB,IAAAD,EAAV,KAAUA,EAAAjX,EACG/B,EAAKgB,MAAhDkY,EADwCnX,EACxCmX,QAAS1W,EAD+BT,EAC/BS,QAAS2W,EADsBpX,EACtBoX,UAAWR,EADW5W,EACX4W,WAC9BS,EAAiBpZ,EAAKgB,MAAMqY,YAAcN,EAC5CvH,GAAAtV,EAAAyG,cAAC2W,GAAA,EAAD,CAAUC,QAAM,EAAC7Z,MAAO,CAAC+F,MAAO,QAAS+T,UAAW,CAACC,KAAM,EAAGrU,UAAW,KAC7E,OACIoM,GAAAtV,EAAAyG,cAAC+W,GAAAxd,EAAD,CACIqW,UAAU,MACVvP,UAAW4V,KAAWpW,EAAQ2V,UAAW3V,EAAQqV,cAA5BzY,OAAAkZ,GAAA,EAAAlZ,CAAA,GAChBoD,EAAQ6V,QAAwB,MAAdM,IAEvB3U,QAAQ,OACRT,MAAO,CAACO,OAAQqV,GAChB1L,MAAuB,MAAfwL,GAAuBC,EAAQD,GAAaU,QAAoB,QAAU,QAIjFP,MAKbQ,eAAiB,SAAAC,GAA0D,IAAAC,EAAxD/W,EAAwD8W,EAAxD9W,MAAOkW,EAAiDY,EAAjDZ,YAAac,EAAoCF,EAApCE,QAASC,EAA2BH,EAA3BG,OAAQC,EAAmBJ,EAAnBI,cAAmB1X,EACxBvC,EAAKgB,MAA7CkZ,EADgE3X,EAChE2X,aAAchB,EADkD3W,EAClD2W,QAAS1W,EADyCD,EACzCC,QAAS2X,EADgC5X,EAChC4X,KACjC7O,GAASwO,EAAA,GAAA1a,OAAAkZ,GAAA,EAAAlZ,CAAA0a,EACVM,KAAcC,IAAM,OADVjb,OAAAkZ,GAAA,EAAAlZ,CAAA0a,EAEVM,KAAcE,KAAO,QAFXR,GAKTS,EACDrB,EAAQD,GAAauB,aAAuB,MAARL,EAKjCpX,EAJAyO,GAAAtV,EAAAyG,cAAC8X,GAAAve,EAAD,CAAgBqd,OAAQQ,IAAYC,EAAQ1O,UAAWA,EAAU2O,IAC5DlX,GAMb,OACIyO,GAAAtV,EAAAyG,cAAC+W,GAAAxd,EAAD,CACIqW,UAAU,MACVvP,UAAW4V,KAAWpW,EAAQ2V,UAAW3V,EAAQqV,cAAerV,EAAQ6V,SACxErU,QAAQ,OACRT,MAAO,CAACO,OAAQoW,GAChBzM,MAAOyL,EAAQD,GAAaU,QAAmB,QAAU,QAExDY,yHAKJ,IAAAnQ,EAAA1N,KAAAge,EACqChe,KAAKsE,MAAxCwB,EADFkY,EACElY,QAAS0W,EADXwB,EACWxB,QAAYyB,EADvBvb,OAAAwb,GAAA,EAAAxb,CAAAsb,EAAA,uBAEL,OACIlJ,GAAAtV,EAAAyG,cAACkY,GAAA,EAAD,KACK,SAAAC,GAAA,IAAEhX,EAAFgX,EAAEhX,OAAQ2B,EAAVqV,EAAUrV,MAAV,OACG+L,GAAAtV,EAAAyG,cAACkY,GAAA,EAADzb,OAAAqT,OAAA,CACIzP,UAAWR,EAAQkV,MACnB5T,OAAQA,EACR2B,MAAOA,GACHkV,EAJR,CAKIjC,aAActO,EAAKqO,kBAIlBS,EAAQna,IAAI,SAAAgc,EAA6DzT,GAAU,IAC5E0T,EAD4EC,EAAAF,EAArEG,2BAAqE,IAAAD,EAA/C,KAA+CA,EAAzCjY,EAAyC+X,EAAzC/X,UAAW+W,EAA8BgB,EAA9BhB,QAAYoB,EAAkB/b,OAAAwb,GAAA,EAAAxb,CAAA2b,EAAA,+CAYhF,OATIC,EADuB,MAAvBE,EACW,SAAAE,GAAiB,OACxBhR,EAAKyO,aAAa,CACdE,SAAUmC,EAAoBE,GAC9BnC,YAAa3R,KAGV8C,EAAKyO,aAIhBrH,GAAAtV,EAAAyG,cAACkY,GAAA,EAADzb,OAAAqT,OAAA,CACI5K,IAAKkS,EACLH,eAAgB,SAAAyB,GAAW,OACvBjR,EAAKwP,eAALxa,OAAAkc,GAAA,EAAAlc,CAAA,GACOic,EADP,CAEIpC,YAAa3R,MAGrBtE,UAAW4V,KAAWpW,EAAQqV,cAAe7U,GAC7C6V,aAAcmC,EACdjB,QAASA,GACLoB,gBAtGNnJ,KAAMuJ,eAkIxC/C,GAAoBgD,aAAe,CAC/BtB,aAAc,GACdf,UAAW,IAGf,UAAMsC,GAA0BjX,sBAAWa,GAAXb,CAAmBgU,IAG7CkD,GADLnc,aAAO,WAAY,iCAEhB,SAAAmc,EAAY1a,GAAO,IAAA2a,EAAA,OAAAvc,OAAAwc,EAAA,EAAAxc,CAAA1C,KAAAgf,IACfC,EAAAvc,OAAAyc,EAAA,EAAAzc,CAAA1C,KAAA0C,OAAA0c,EAAA,EAAA1c,CAAAsc,GAAAlV,KAAA9J,KAAMsE,KAIVvB,MAAQ,CACJ4Z,aAAa,EACbI,KAAMsC,MAAM,IAAIhK,KAAK,KAPN4J,EAUnBK,iBAAmB,WAEf,GAA4B,QADEL,EAAK3a,MAAMqB,SAAlCC,oBAC4B,CAC/BqZ,EAAK1b,SAAS,CAACoZ,aAAa,EAAOI,KAAMsC,MAAM,IAAIhK,KAAK,MACxD,IAAMkK,EAAU,IAAI3kB,QAAQ,SAAAC,GAAO,OAAI2kB,WAAW3kB,EAAS,OAC3DD,QAAQ8P,IAAI,CAAC6U,EAASta,KAAiBwa,qBAAqB5hB,KAAK,SAAC8U,GAC9DA,EAAI,GAAGtQ,IAAI,SAACrE,GAER,OADAA,EAAI+N,YAAcgG,KAAOQ,SAASvU,EAAI+N,cAAcC,WAC7ChO,IAEXihB,EAAK1b,SAAS,CAACoZ,aAAa,EAAMI,KAAMpK,EAAI,SAlBpDrO,EAAMN,gBAAgB0b,yBAAyBT,EAAKK,kBAFrCL,iIA8Bf,IAAMtZ,EAAW3F,KAAKsE,MAAMqB,SAC5BA,EAASuI,mBAAkB,GAC3BvI,EAASwI,eAAe,WACxBxI,EAASga,oBACT3f,KAAKsf,kEAIL,IAAM3Z,EAAW3F,KAAKsE,MAAMqB,SAC5BA,EAASwI,iBACTxI,EAAS+I,4DAGJ,IAAAkR,EAAA5f,KACE8F,EAAW9F,KAAKsE,MAAhBwB,QACDiX,EAAO/c,KAAK+C,MAAMga,KACxB,OACIjI,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAMmP,WAAS,EAACE,QAAQ,SAASC,WAAW,UACxCgG,GAAAtV,EAAAyG,cAACyR,GAAAlY,EAAD,CAAO+L,UAAW,GAAIqF,QAAM,EAACtK,UAAWR,EAAQ+K,OAE5CiE,GAAAtV,EAAAyG,cAAC8Y,GAAD,CACIpC,YAAa3c,KAAK+C,MAAM4Z,YACxBkD,SAAU9C,EAAKxiB,OACfulB,UAAW,SAAAC,GAAA,IAAEnV,EAAFmV,EAAEnV,MAAF,OAAamS,EAAKnS,IAC7BqR,WAAY,SAAAxY,GAAK,OAAImc,EAAKtb,MAAM0L,QAAQxF,KAAnB,WAAAxF,OAAmCvB,EAAMuc,QAAQxa,cACtEgX,QAAS,CACL,CAEIzT,MAAO,IACPF,SAAU,EACVxC,MAAO,QACPgX,QAAS,eAEb,CACItU,MAAO,IACP1C,MAAO,OACPgX,QAAS,YACTJ,SAAS,GAEb,CACIlU,MAAO,IACP1C,MAAO,UACPgX,QAAS,eACTJ,SAAS,GAEb,CACIlU,MAAO,IACP1C,MAAO,SACPgX,QAAS,cAEb,CACItU,MAAO,IACP1C,MAAO,OACPgX,QAAS,2BApFL/H,KAAMzN,eA8F3BC,yBAAWa,GAAXb,CAAmBqS,aAAW6E,uDCxQvCiB,GAFLpd,aAAO,6BACPC,iMAEY,IAAAgB,EACqC9D,KAAKsE,MAAxCwB,EADFhC,EACEgC,QAAS7B,EADXH,EACWG,uBAChB,OACI6Q,GAAAtV,EAAAyG,cAACia,GAAA1gB,EAAD,CACI2gB,iBAAkB,IAClB7Z,UAAWR,EAAQsa,SACnBC,aAAc,CAACC,SAAU,MAAOC,WAAY,SAC5C7L,KAAMzQ,EAAuByQ,KAC7B8B,QAASvS,EAAuBuc,YAChCC,aAAc,CACVhJ,mBAAoB,cAExBnW,QAAS2C,EAAuB3C,QAChCuK,OAAQ,CACJiJ,GAAAtV,EAAAyG,cAACya,GAAA,EAAD,CAAQvV,IAAI,QAAQ3D,MAAM,YAAYmF,KAAK,QAAQpF,QAAStD,EAAuBuc,aAAnF,WAGA1L,GAAAtV,EAAAyG,cAACmQ,GAAA5W,EAAD,CACI2L,IAAI,QACJQ,aAAW,QACXnE,MAAM,UACNlB,UAAWR,EAAQ6a,MACnBpZ,QAAStD,EAAuBuc,aAEhC1L,GAAAtV,EAAAyG,cAAC2R,GAAApY,EAAD,iBAzBQqI,uBAiCjBC,yBA7CA,SAAAC,GAAK,MAAK,CACrB4Y,MAAO,CACHzX,QAASnB,EAAME,QAAQC,KAAO,GAElCkY,SAAU,CACN/H,IAAKtQ,EAAME,QAAQC,QAwCZJ,CAAmBmY,IClC5BW,oLACO,IACE9a,EAAW9F,KAAKsE,MAAhBwB,QACP,OACIgP,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAMmP,WAAS,EAACE,QAAQ,SAASC,WAAW,UACxCgG,GAAAtV,EAAAyG,cAACyR,GAAAlY,EAAD,CAAO8G,UAAWR,EAAQ+K,MAAOD,QAAM,EAACrF,UAAW,IAC/CuJ,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAY8H,QAAQ,KAAKuO,UAAU,KAAK9E,MAAM,UAA9C,SAGA+D,GAAAtV,EAAAyG,cAAC8Q,GAAAvX,EAAD,MACAsV,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,MAChCf,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,eAXhChO,aAkBLC,yBA3BA,SAAAC,GAAK,MAAK,CACrB8I,MAAO,CACH3H,QAA8B,EAArBnB,EAAME,QAAQC,KAEvBa,MAA4B,IAArBhB,EAAME,QAAQC,KACrBc,SAAU,UAsBHlB,CAAmB8Y,ICrB5BC,oLACO,IACE/a,EAAW9F,KAAKsE,MAAhBwB,QACP,OACIgP,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAMmP,WAAS,EAACE,QAAQ,SAASC,WAAW,UACxCgG,GAAAtV,EAAAyG,cAACyR,GAAAlY,EAAD,CAAO8G,UAAWR,EAAQ+K,MAAOD,QAAM,EAACrF,UAAW,IAC/CuJ,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAY8H,QAAQ,KAAKuO,UAAU,KAAK9E,MAAM,UAA9C,mCAGA+D,GAAAtV,EAAAyG,cAAC8Q,GAAAvX,EAAD,MACAsV,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,MAChCf,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,MAEhCf,GAAAtV,EAAAyG,cAAA,MAAIY,MAAO,CAACia,WAAY,SACpBhM,GAAAtV,EAAAyG,cAAA,UACI6O,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,KAC5Bf,GAAAtV,EAAAyG,cAAA,sCAEJ6O,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,KAAhC,wBACyBf,GAAAtV,EAAAyG,cAAA,KAAG8a,KAAK,6BAAR,sBADzB,sCAE+BjM,GAAAtV,EAAAyG,cAAA,gCAF/B,2OAQJ6O,GAAAtV,EAAAyG,cAAA,UACI6O,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,KAC5Bf,GAAAtV,EAAAyG,cAAA,iDAEJ6O,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,KAAhC,oPAIWf,GAAAtV,EAAAyG,cAAA,KAAG8a,KAAK,6BAAR,sBAJX,qHAM2DjM,GAAAtV,EAAAyG,cAAA,KACvD8a,KAAK,6BADkD,sBAN3D,gNAU4CjM,GAAAtV,EAAAyG,cAAA,KACxC8a,KAAK,6BADmC,sBAV5C,yBAcJjM,GAAAtV,EAAAyG,cAAA,UACI6O,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,KAC5Bf,GAAAtV,EAAAyG,cAAA,kDAEJ6O,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,KAAhC,8GAE6Bf,GAAAtV,EAAAyG,cAAA,KAAG8a,KAAK,6BAAR,sBAF7B,gCAIiBjM,GAAAtV,EAAAyG,cAAA,gEAJjB,0CAKkC6O,GAAAtV,EAAAyG,cAAA,KAC9B8a,KAAK,6BADyB,sBALlC,2CAOiCjM,GAAAtV,EAAAyG,cAAA,sBAPjC,oGAWJ6O,GAAAtV,EAAAyG,cAAA,UACI6O,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,KAC5Bf,GAAAtV,EAAAyG,cAAA,gCAEJ6O,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAYsd,WAAS,EAACjH,UAAU,KAAhC,qPAK8Bf,GAAAtV,EAAAyG,cAAA,KAC1B8a,KAAK,6BADqB,sBAL9B,oNAWIjM,GAAAtV,EAAAyG,cAAA,KAAG8a,KAAK,6BAAR,sBAXJ,uFA/DRlZ,aAqFLC,yBA/FA,SAAAC,GAAK,MAAK,CACrB8I,MAAO,CACH3H,QAA8B,EAArBnB,EAAME,QAAQC,KAEvBa,MAA4B,IAArBhB,EAAME,QAAQC,KACrBc,SAAU,OACVgP,UAAW,UAyFJlQ,CAAmB+Y,sJCjE5BG,GAFLne,aAAO,uBACPC,iMAEY,IAAAgB,EAC+B9D,KAAKsE,MAAlCwB,EADFhC,EACEgC,QAAS2H,EADX3J,EACW2J,iBAChB,IAAKA,EAAiB9L,aAClB,OAAOmT,GAAAtV,EAAAyG,cAAC6U,GAAA,EAAD,CAAUrK,GAAG,MAExB,IAAMwQ,EAAYxT,EAAiB3R,SAASG,WAAa8V,KAAOQ,SAAS9E,EAAiB3R,SAASG,aAAailB,OAAO,eAAiB,GAClIC,EAAS1T,EAAiB3R,SAASI,cAAgBklB,KAAOC,WAAW,UAAUC,OAAO7T,EAAiB3R,SAASI,eAAeqlB,OAAO,OAAS,GACrJ,OACIzM,GAAAtV,EAAAyG,cAAC+Q,GAAAxX,EAAD,CAAMmP,WAAS,EAACE,QAAQ,SAASC,WAAW,UACxCgG,GAAAtV,EAAAyG,cAACya,GAAA,EAAD,CAAMpa,UAAWR,EAAQ+K,MAAOD,QAAM,EAACrF,UAAW,IAC9CuJ,GAAAtV,EAAAyG,cAACmR,GAAA5X,EAAD,CAAY8H,QAAQ,KAAKuO,UAAU,KAAK9E,MAAM,UAC1C+D,GAAAtV,EAAAyG,cAACub,GAAAhiB,EAAD,CAAWqH,MAAO,CAACoT,cAAe,SADtC,YAGAnF,GAAAtV,EAAAyG,cAAC8Q,GAAAvX,EAAD,MACAsV,GAAAtV,EAAAyG,cAACwb,GAAAjiB,EAAD,CACIiM,OACIqJ,GAAAtV,EAAAyG,cAACyb,GAAAliB,EAAD,CAAQmM,aAAW,UACfmJ,GAAAtV,EAAAyG,cAAC0b,GAAAniB,EAAD,OAGRwD,MAAOyK,EAAiB3R,SAASC,SACjC+P,UAAW,kBAAoBmV,IAEnCnM,GAAAtV,EAAAyG,cAAC2b,GAAApiB,EAAD,KACIsV,GAAAtV,EAAAyG,cAAC4b,GAAAriB,EAAD,CACI6G,MAAM,eACNC,UAAWR,EAAQS,UACnB3C,MAAO6J,EAAiB3R,SAASE,SACjCoK,WAAS,EACTI,OAAO,SACPc,QAAQ,SACR4J,UAAQ,IAEZ4D,GAAAtV,EAAAyG,cAAC4b,GAAAriB,EAAD,CACI6G,MAAM,UACNC,UAAWR,EAAQS,UACnB3C,MAAOud,EACP/a,WAAS,EACTI,OAAO,SACPc,QAAQ,SACR4J,UAAQ,cAzCdrJ,uBAkDPC,yBApEA,SAAAC,GAAK,MAAK,CACrB8I,MAAO,CACH3H,QAA8B,EAArBnB,EAAME,QAAQC,KAEvBa,MAA4B,IAArBhB,EAAME,QAAQC,KACrBc,SAAU,OACVgP,UAAW,QAEfzR,UAAW,CACP4B,WAAYJ,EAAME,QAAQC,KAC1BF,YAAaD,EAAME,QAAQC,KAC3Bc,SAAU,SAyDHlB,CAAmBkZ,IC5D5Bc,GAAS,CACXnc,SAAU,IAAIuN,GACdzF,iBAAkB,IAAIgG,GACtB1P,uBAAwB,IAAIkQ,GAC5BjQ,gBAAiB,IAAImQ,GACrB7O,gBAAiB,IAAIgP,GACrBrQ,uBAAwB,IAAIuQ,IAE1BxE,GAAU+R,aAAqB,IAG/BC,oLAGoBhiB,KAAKsE,MAAhBwB,QACP,OACIgP,GAAAtV,EAAAyG,cAAA,WACI6O,GAAAtV,EAAAyG,cAACiU,GAAD,cANC5E,KAAMzN,WAavBoa,KAASC,OACLpN,GAAAtV,EAAAyG,cAACkc,GAAA,EAAaL,GACVhN,GAAAtV,EAAAyG,cAACmc,GAAA,EAAD,CAAQpS,QAASA,IACb8E,GAAAtV,EAAAyG,cAACoc,EAAA,SAAD,KACIvN,GAAAtV,EAAAyG,cAACqc,GAAD,MACAxN,GAAAtV,EAAAyG,cAACsc,GAAD,MACAzN,GAAAtV,EAAAyG,cAACuc,GAAD,MACA1N,GAAAtV,EAAAyG,cAACwc,GAAA,EAAD,KACI3N,GAAAtV,EAAAyG,cAACyc,GAAA,EAAD,CAAO1jB,KAAK,IAAI2jB,OAAK,EAAC9M,UAAW+M,KACjC9N,GAAAtV,EAAAyG,cAACyc,GAAA,EAAD,CAAO1jB,KAAK,SAAS6W,UAAW+K,KAChC9L,GAAAtV,EAAAyG,cAACyc,GAAA,EAAD,CAAO1jB,KAAK,WAAW6W,UAAWmL,KAClClM,GAAAtV,EAAAyG,cAACyc,GAAA,EAAD,CAAO1jB,KAAK,SAAS6W,UAAWgL,KAChC/L,GAAAtV,EAAAyG,cAACyc,GAAA,EAAD,CAAO1jB,KAAK,gBAAgB6W,UAAWxG,OACvCyF,GAAAtV,EAAAyG,cAACyc,GAAA,EAAD,CAAO1jB,KAAK,sBAAsB6W,UAAWhJ,OAC7CiI,GAAAtV,EAAAyG,cAACyc,GAAA,EAAD,CAAO1jB,KAAK,MAAM6W,UAAWmM,SAK9Ca,SAASC,eAAe,ShB0DnB,kBAAmBC,WACnBA,UAAUC,cAAcC,MAAMplB,KAAK,SAAAqlB,GAC/BA,EAAaC","file":"static/js/main.0e00f19a.chunk.js","sourcesContent":["import zlib from 'zlib';\r\n\r\nclass ZlibHelper {\r\n    static gzip(unzippedData, isOutputBase64 = true) {\r\n        let dataBuff = null;\r\n        if (typeof unzippedData === 'string') dataBuff = Buffer.from(unzippedData, 'utf8');\r\n        else dataBuff = unzippedData;\r\n        return new Promise((resolve, reject) => {\r\n            zlib.gzip(dataBuff, (err, buffer) => {\r\n                if (err) return reject(err);\r\n                resolve(isOutputBase64 ? buffer.toString('base64') : buffer);\r\n            });\r\n        });\r\n    }\r\n\r\n    static unzip(zippedData, isOutputUtf8 = true) {\r\n        let dataBuff = null;\r\n        if (typeof zippedData === 'string') dataBuff = Buffer.from(zippedData, 'base64');\r\n        else dataBuff = zippedData;\r\n        return new Promise((resolve, reject) => {\r\n            zlib.unzip(dataBuff, (err, buffer) => {\r\n                if (err) return reject(err);\r\n                resolve(isOutputUtf8 ? buffer.toString('utf8') : buffer);\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default ZlibHelper;","const gapi = window.gapi;\r\n\r\nconst nacl = require('tweetnacl');\r\n\r\nconst configFileName = 'config.json';\r\nlet GoogleAuth = null;\r\nlet configFileId = '';\r\nlet userInfo = {\r\n    username: '',\r\n    userAddr: '',\r\n    createTime: '',\r\n    publicKeyBuff: null\r\n};\r\nlet publicKeyBuff = null, privateKeyBuff = null;\r\nlet publicKeyBase64 = '', privateKeyBase64 = '';\r\nlet _isRegistered = false;\r\n\r\nfunction init(setSignedInState) {\r\n    gapi.load('client:auth2', () => {\r\n        gapi.client.init({\r\n            'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'],\r\n            'clientId': '559605306816-6kkqs7b13i832b96t3qsj50h97jlh1sc.apps.googleusercontent.com',\r\n            'scope': 'https://www.googleapis.com/auth/drive.appdata'\r\n        }).then(() => {\r\n            GoogleAuth = gapi.auth2.getAuthInstance();\r\n\r\n            // Listen for sign-in state changes.\r\n            GoogleAuth.isSignedIn.listen((isSignedIn) => {\r\n                setSignedInState(isSignedIn && isAuthorized());\r\n            });\r\n\r\n            setSignedInState(isSignedIn() && isAuthorized());\r\n        });\r\n    });\r\n}\r\n\r\nfunction isSignedIn() {\r\n    if (!GoogleAuth) {\r\n        return false;\r\n    }\r\n    return GoogleAuth.isSignedIn.get();\r\n}\r\n\r\nfunction isAuthorized() {\r\n    const user = GoogleAuth.currentUser.get();\r\n    return user.hasGrantedScopes('https://www.googleapis.com/auth/drive.appdata');\r\n}\r\n\r\nfunction handleAuthClick() {\r\n    if (GoogleAuth.isSignedIn.get()) {\r\n        // User is authorized and has clicked 'Sign out' button.\r\n        GoogleAuth.signOut();\r\n    } else {\r\n        // User is not signed in. Start Google auth flow.\r\n        GoogleAuth.signIn();\r\n    }\r\n}\r\n\r\n////--------------------------------nacl\r\nfunction createKeyPair() {\r\n    return nacl.sign.keyPair();\r\n}\r\n\r\nfunction signSignature(message, optionPrivateKeyBuff) {\r\n    let msgBuff = message;\r\n    if (typeof msgBuff === 'string') {\r\n        msgBuff = Buffer.from(message, 'utf8');\r\n    }\r\n    const signedBuff = nacl.sign.detached(msgBuff, optionPrivateKeyBuff || privateKeyBuff);\r\n    return Buffer.from(signedBuff).toString('base64');\r\n}\r\n\r\n////--------------------------------nacl\r\n\r\nfunction checkConfig(data) {\r\n    const configProperties = ['publicKey', 'secretKey', 'createTime'];\r\n    // const configProperties = ['username', 'publicKey', 'secretKey', 'createTime', 'userAddr'];\r\n    return configProperties.some((val) => {\r\n        if (!data[val]) {\r\n            return true;\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction getConfigId() {\r\n    const listFunc = gapi.client.drive.files.list({\r\n        'spaces': 'appDataFolder',\r\n        'fields': 'files(id, name)'\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        listFunc.execute((response) => {\r\n            if (response.files.length > 0) return resolve(response.files[0].id);\r\n            resolve();\r\n        });\r\n    });\r\n}\r\n\r\nfunction getConfigById(id) {\r\n    const getFunt = gapi.client.drive.files.get({\r\n        'fileId': id,\r\n        'alt': 'media'\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        getFunt.execute(function (response) {\r\n            // console.log(response);\r\n            resolve(response.result);\r\n        });\r\n    });\r\n}\r\n\r\nfunction trySetCredential() {\r\n    return getConfigById(configFileId).then((data) => {\r\n        // console.log(data);\r\n        if (checkConfig(data)) {\r\n            _isRegistered = false;\r\n            return false;\r\n        }\r\n        publicKeyBase64 = data.publicKey;\r\n        privateKeyBase64 = data.secretKey;\r\n        publicKeyBuff = Buffer.from(publicKeyBase64, 'base64');\r\n        privateKeyBuff = Buffer.from(privateKeyBase64, 'base64');\r\n        userInfo.username = data.username;\r\n        userInfo.userAddr = data.userAddr;\r\n        userInfo.createTime = data.createTime;\r\n        userInfo.publicKeyBuff = publicKeyBuff;\r\n        _isRegistered = true;\r\n        return true;\r\n    });\r\n}\r\n\r\nfunction createConfig() {\r\n    const createFunc = gapi.client.drive.files.create({\r\n        'resource': {'name': configFileName, 'parents': ['appDataFolder']},\r\n        'fields': 'id'\r\n    });\r\n    console.log('create config...');\r\n    return new Promise((resolve, reject) => {\r\n        createFunc.execute((response) => {\r\n            // console.log(response);\r\n            resolve(response.id);\r\n        });\r\n    });\r\n}\r\n\r\nfunction uploadConfig(id, jsonStr) {\r\n    const req = gapi.client.request({\r\n        'path': '/upload/drive/v3/files/' + id,\r\n        'method': 'PATCH',\r\n        'params': {'uploadType': 'media'},\r\n        'body': jsonStr\r\n    });\r\n    console.log('upload config...');\r\n    return new Promise((resolve, reject) => {\r\n        req.execute((response) => {\r\n            // console.log(response);\r\n            resolve(response);\r\n        });\r\n    });\r\n}\r\n\r\nasync function register(username, keyPair, createTime, userAddr) {\r\n    const id = configFileId || await createConfig();\r\n    // const keyPair = createKeyPair();\r\n    publicKeyBuff = Buffer.from(keyPair.publicKey);\r\n    privateKeyBuff = Buffer.from(keyPair.secretKey);\r\n    publicKeyBase64 = publicKeyBuff.toString('base64');\r\n    privateKeyBase64 = privateKeyBuff.toString('base64');\r\n    userInfo.username = username;\r\n    userInfo.userAddr = userAddr;\r\n    userInfo.createTime = createTime;\r\n    userInfo.publicKeyBuff = publicKeyBuff;\r\n    await uploadConfig(id, {\r\n        'username': username,\r\n        'publicKey': publicKeyBase64,\r\n        'secretKey': privateKeyBase64,\r\n        'createTime': createTime,\r\n        'userAddr': userAddr\r\n    });\r\n    configFileId = id;\r\n}\r\n\r\nasync function userPrepare() {\r\n    const id = await getConfigId();\r\n    // console.log(id);\r\n    if (!id) {\r\n        _isRegistered = false;\r\n        return false;\r\n    }\r\n    configFileId = id;\r\n    return trySetCredential();\r\n}\r\n\r\nfunction isRegistered() {\r\n    return _isRegistered;\r\n}\r\n\r\nfunction getUserInfo() {\r\n    return userInfo;\r\n}\r\n\r\nfunction clearState() {\r\n    configFileId = '';\r\n    userInfo = {\r\n        username: '',\r\n        userAddr: '',\r\n        createTime: '',\r\n        publicKeyBuff: null\r\n    };\r\n    publicKeyBuff = null;\r\n    privateKeyBuff = null;\r\n    publicKeyBase64 = '';\r\n    privateKeyBase64 = '';\r\n    _isRegistered = false;\r\n}\r\n\r\nexport default {\r\n    init,\r\n    isSignedIn,\r\n    isAuthorized,\r\n    handleAuthClick,\r\n    GoogleAuth,\r\n    userPrepare,\r\n    createKeyPair,\r\n    trySetCredential,\r\n    register,\r\n    signSignature,\r\n    isRegistered,\r\n    getUserInfo,\r\n    clearState\r\n};","module.exports = __webpack_public_path__ + \"static/media/logox.65db1446.svg\";","import React, {Component, Fragment} from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {EditorState, convertToRaw} from 'draft-js';\r\nimport {Editor} from 'react-draft-wysiwyg';\r\n// import draftToHtml from 'draftjs-to-html';\r\n// import htmlToDraft from 'html-to-draftjs';\r\nimport '../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\n\r\nimport {Button, withStyles} from \"@material-ui/core\";\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport GoogleOAuth from '../Plugin/GoogleOAuth.js';\r\nimport forumAjaxAdapter from '../Adapters/ForumAjaxAdapter';\r\nimport ZlibHelper from '../Utils/ZlibHelper';\r\nimport amber from \"@material-ui/core/colors/amber\";\r\n\r\nconst styles = theme => ({\r\n    textField: {\r\n        marginRight: theme.spacing.unit,\r\n    },\r\n    sendIcon: {\r\n        marginLeft: theme.spacing.unit\r\n    },\r\n    submitBtn: {\r\n        color: theme.palette.common.black,\r\n        backgroundColor: amber['A400'],\r\n        '&:hover': {\r\n            backgroundColor: amber['A700'],\r\n        },\r\n        marginTop: theme.spacing.unit * 3,\r\n        marginBottom: theme.spacing.unit\r\n    }\r\n});\r\n\r\nfunction removeDefaultContentProps(rawContent) {\r\n    rawContent.blocks.map((val) => {\r\n        if (val.type === 'unstyled') delete val.type;\r\n        if (val.depth === 0) delete val.depth;\r\n        if (val.inlineStyleRanges.length === 0) delete val.inlineStyleRanges;\r\n        if (val.entityRanges.length === 0) delete val.entityRanges;\r\n        if (Object.keys(val.data).length === 0) delete val.data;\r\n        return val;\r\n    });\r\n    return rawContent;\r\n}\r\n\r\n@inject('navState', 'createReplyActionState', 'threadListState', 'threadBodyState', 'notificationSnackState')\r\n@observer\r\nclass EditorConvertToHTML extends Component {\r\n    state = {\r\n        title: '',\r\n        threadTitleInputErr: false,\r\n        editorState: EditorState.createEmpty(),\r\n    };\r\n\r\n    onEditorStateChange = (editorState) => {\r\n        this.setState({\r\n            editorState,\r\n        });\r\n    };\r\n\r\n    handleChange = name => event => {\r\n        this.setState({[name]: event.target.value});\r\n    };\r\n\r\n    submitNewThread = async () => {\r\n        const {createReplyActionState, threadListState, notificationSnackState} = this.props;\r\n        const title = this.state.title.trim();\r\n        if (!title) {\r\n            this.setState({threadTitleInputErr: true});\r\n            notificationSnackState.triggerOpen('Title cannot contain space only!');\r\n            return;\r\n        }\r\n        const contentObj = convertToRaw(this.state.editorState.getCurrentContent());\r\n        removeDefaultContentProps(contentObj);\r\n        const contentZipped = await ZlibHelper.gzip(JSON.stringify(contentObj));\r\n        const time = new Date().getTime().toString();\r\n        const signBase64 = GoogleOAuth.signSignature(Buffer.concat([\r\n            Buffer.from(GoogleOAuth.getUserInfo().userAddr, 'utf8'),\r\n            Buffer.from(title, 'utf8'),\r\n            Buffer.from(contentZipped, 'utf8'),\r\n            Buffer.from(time, 'utf8'),\r\n        ]));\r\n        forumAjaxAdapter.submitNewThread(GoogleOAuth.getUserInfo().userAddr, title, contentZipped, time, signBase64)\r\n            .then(() => {\r\n                createReplyActionState.setModalEditorClose();\r\n                threadListState.callUpdateThreadList();\r\n                notificationSnackState.triggerOpen('Create new thread successfully!');\r\n            });\r\n    };\r\n\r\n    submitNewReply = async () => {\r\n        const {createReplyActionState, threadBodyState, notificationSnackState} = this.props;\r\n        const {userAddr} = GoogleOAuth.getUserInfo();\r\n        const contentObj = convertToRaw(this.state.editorState.getCurrentContent());\r\n        removeDefaultContentProps(contentObj);\r\n        const contentZipped = await ZlibHelper.gzip(JSON.stringify(contentObj));\r\n        const time = new Date().getTime().toString();\r\n        const signBase64 = GoogleOAuth.signSignature(Buffer.concat([\r\n            Buffer.from(userAddr, 'utf8'),\r\n            Buffer.from(threadBodyState.threadAddr, 'utf8'),\r\n            Buffer.from(contentZipped, 'utf8'),\r\n            Buffer.from(time, 'utf8'),\r\n        ]));\r\n        forumAjaxAdapter.submitNewReply(userAddr, threadBodyState.threadAddr, contentZipped, time, signBase64)\r\n            .then(() => {\r\n                createReplyActionState.setModalEditorClose();\r\n                threadBodyState.callUpdateThreadBody();\r\n                notificationSnackState.triggerOpen('Reply successfully!');\r\n            });\r\n    };\r\n\r\n    submitToBC = () => {\r\n        const {navState} = this.props;\r\n        if (navState.createReplyBtnState === 'add') this.submitNewThread();\r\n        else if (navState.createReplyBtnState === 'reply') this.submitNewReply();\r\n    };\r\n\r\n    render() {\r\n        const {classes, navState} = this.props;\r\n        const {editorState} = this.state;\r\n        const titleField = navState.createReplyBtnState === 'add' ? (\r\n            <TextField\r\n                required\r\n                fullWidth\r\n                label=\"Title\"\r\n                className={classes.textField}\r\n                margin=\"normal\"\r\n                autoComplete=\"off\"\r\n                onChange={this.handleChange('title')}\r\n                error={this.state.threadTitleInputErr}\r\n            />\r\n        ) : '';\r\n        return (\r\n            <Fragment>\r\n                {titleField}\r\n                <div style={{marginBottom: 20}}/>\r\n                <Editor\r\n                    editorState={editorState}\r\n                    wrapperClassName=\"demo-wrapper\"\r\n                    editorClassName=\"demo-editor\"\r\n                    onEditorStateChange={this.onEditorStateChange}\r\n                    editorStyle={{border: '2px solid #F1F1F1', height: '30vh'}}\r\n                />\r\n                <Button variant=\"contained\" onClick={this.submitToBC} color='inherit' className={classes.submitBtn}>\r\n                    {navState.getModalEditorBtnTxt}\r\n                    <SendIcon className={classes.sendIcon}/>\r\n                </Button>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(EditorConvertToHTML);","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport {Link, withRouter} from 'react-router-dom';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {EditorState, convertToRaw, convertFromRaw} from 'draft-js';\r\nimport {Editor} from 'react-draft-wysiwyg';\r\n\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport green from '@material-ui/core/colors/green';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\r\nimport ThumbDownIcon from '@material-ui/icons/ThumbDown';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport forumAjaxAdapter from '../Adapters/ForumAjaxAdapter';\r\nimport ZlibHelper from '../Utils/ZlibHelper';\r\nimport GoogleOAuth from \"../Plugin/GoogleOAuth\";\r\n\r\nconst styles = theme => ({\r\n    gridContainer: {\r\n        flexGrow: 1,\r\n        marginTop: 5,\r\n    },\r\n    gridItem: {\r\n        width: theme.spacing.unit * 130,\r\n        maxWidth: '100%',\r\n        marginBottom: 10\r\n    },\r\n    card: {\r\n        padding: theme.spacing.unit * 2\r\n    },\r\n    cardContent: {},\r\n    refreshBtnDiv: {\r\n        padding: theme.spacing.unit * 3,\r\n    },\r\n    fabGreen: {\r\n        color: theme.palette.common.white,\r\n        backgroundColor: green[500],\r\n        '&:hover': {\r\n            backgroundColor: green[600],\r\n        },\r\n        display: 'flex',\r\n        margin: '0 auto'\r\n    },\r\n    circularProgress: {\r\n        display: 'block',\r\n        margin: '0 auto'\r\n    }\r\n});\r\n\r\n@inject('navState', 'threadBodyState')\r\n@observer\r\nclass RepliesBody extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        props.threadBodyState.bindUpdateThreadBodyFunc(this.updateRepliedPosts);\r\n    }\r\n\r\n    state = {\r\n        replyPosts: [],\r\n        totalCount: 0,\r\n        finished: false\r\n    };\r\n\r\n    updateRepliedPosts = () => {\r\n        const {threadAddr} = this.props;\r\n        this.setState({finished: false});\r\n        forumAjaxAdapter.getRepliedPostsWithUserInfo(threadAddr).then(r => {\r\n            const promises = [];\r\n            r.posts.forEach(val => promises.push(ZlibHelper.unzip(val.postContent)));\r\n            Promise.all(promises).then((unzippeds) => {\r\n                r.posts.map((val, index) => {\r\n                    val.postContent = EditorState.createWithContent(convertFromRaw(JSON.parse(unzippeds[index])));\r\n                    return val;\r\n                });\r\n                this.setState({replyPosts: r.posts, totalCount: r.totalCount, finished: true});\r\n                // console.log(this.state)\r\n            });\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.updateRepliedPosts();\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <Fragment>\r\n                {this.state.replyPosts.map((post, index) => {\r\n                    return (<Grid key={post.postAddr} item className={classes.gridItem}>\r\n                        <Card elevation={24} className={classes.card}>\r\n                            <CardHeader\r\n                                avatar={\r\n                                    <Avatar aria-label=\"Recipe\">\r\n                                        <PersonIcon/>\r\n                                    </Avatar>\r\n                                }\r\n                                action={'#' + (2 + index)}\r\n                                title={post.userInfo.username}\r\n                                subheader={post.requestTime.calendar()}\r\n                            />\r\n                            <CardContent className={classes.cardContent}>\r\n                                <Editor toolbarHidden editorState={post.postContent} readOnly={true}/>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>);\r\n                })}\r\n                <Grid item className={classes.gridItem}>\r\n                    <div className={classes.refreshBtnDiv}>\r\n                        {this.state.finished ? (\r\n                            <Zoom\r\n                                key='inherit'\r\n                                in\r\n                                unmountOnExit\r\n                            >\r\n                                <Fab onClick={this.updateRepliedPosts} className={classes.fabGreen} color='inherit'>\r\n                                    <RefreshIcon/>\r\n                                </Fab>\r\n                            </Zoom>\r\n                        ) : (<CircularProgress size={56} className={classes.circularProgress}/>)}\r\n                    </div>\r\n                </Grid>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst RepliesBodyStyled = withStyles(styles)(RepliesBody);\r\n\r\n@inject('navState', 'threadBodyState', 'googleOAuthState', 'notificationSnackState')\r\n@observer\r\nclass ThreadBody extends Component {\r\n    state = {\r\n        authorAddr: \"\",\r\n        threadAddr: \"\",\r\n        threadContent: EditorState.createEmpty(),\r\n        threadIndex: \"\",\r\n        threadTitle: \"\",\r\n        requestTime: \"\",\r\n        authorInfo: {},\r\n        up: 0,\r\n        down: 0\r\n    };\r\n\r\n    componentWillMount() {\r\n        const {threadBodyState} = this.props;\r\n        threadBodyState.setThreadAddr(this.props.match.params.threadAddr);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const {navState, notificationSnackState} = this.props;\r\n        navState.setIndexTitleMode(false);\r\n        navState.updateNavTitle();\r\n        navState.setReplyBtnState();\r\n        const {threadAddr} = this.props.match.params;\r\n        try {\r\n            const threadData = await forumAjaxAdapter.getThread(threadAddr);\r\n            // console.log(threadData);\r\n            navState.updateNavTitle(threadData.threadTitle);\r\n            const unzippedContent = await ZlibHelper.unzip(threadData.threadContent);\r\n            threadData.threadContent = EditorState.createWithContent(convertFromRaw(JSON.parse(unzippedContent)));\r\n            this.setState(threadData);\r\n            const authorInfo = await forumAjaxAdapter.getUserInfo(threadData.authorAddr);\r\n            this.setState({authorInfo: authorInfo});\r\n            const totalVoted = await forumAjaxAdapter.getTotalVoted(threadAddr);\r\n            this.setState({up: totalVoted.up, down: totalVoted.down});\r\n        } catch (e) {\r\n            notificationSnackState.showUnknownError();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {navState} = this.props;\r\n        navState.updateNavTitle();\r\n        navState.setIndexTitleMode(true);\r\n        navState.clearCreateReplyBtnState();\r\n    }\r\n\r\n    submitVote = async (vote, updown) => {\r\n        const {googleOAuthState, notificationSnackState} = this.props;\r\n        if (!googleOAuthState.isRegistered) return notificationSnackState.triggerOpen('Please login first!');\r\n        try {\r\n            const {userAddr} = GoogleOAuth.getUserInfo();\r\n            const {threadAddr} = this.props.match.params;\r\n            const time = new Date().getTime().toString();\r\n            const signBase64 = GoogleOAuth.signSignature(Buffer.concat([\r\n                Buffer.from(userAddr, 'utf8'),\r\n                Buffer.from(threadAddr, 'utf8'),\r\n                Buffer.from(vote, 'utf8'),\r\n                Buffer.from(time, 'utf8'),\r\n            ]));\r\n            await forumAjaxAdapter.submitNewVote(userAddr, threadAddr, vote, time, signBase64)\r\n                .then(() => {\r\n                    this.setState({[updown]: this.state[updown] + 1});\r\n                    notificationSnackState.triggerOpen('Vote the thread successfully!');\r\n                });\r\n        } catch (e) {\r\n            notificationSnackState.showUnknownError();\r\n        }\r\n    };\r\n\r\n    submitUpVote = () => {\r\n        this.submitVote('1', 'up');\r\n    };\r\n\r\n    submitDownVote = () => {\r\n        this.submitVote('-1', 'down');\r\n    };\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\"\r\n                  className={classes.gridContainer}>\r\n                <Grid item className={classes.gridItem}>\r\n                    <Card className={classes.card} elevation={24}>\r\n                        <CardHeader\r\n                            avatar={\r\n                                <Avatar aria-label=\"Recipe\">\r\n                                    <PersonIcon/>\r\n                                </Avatar>\r\n                            }\r\n                            action=\"#1\"\r\n                            title={this.state.authorInfo.username}\r\n                            subheader={this.state.requestTime ? this.state.requestTime.calendar() : this.state.requestTime}\r\n                        />\r\n                        <CardContent className={classes.cardContent}>\r\n                            <Editor toolbarHidden editorState={this.state.threadContent} readOnly={true}/>\r\n                        </CardContent>\r\n                        <CardActions className={classes.actions} disableActionSpacing>\r\n                            <IconButton onClick={this.submitUpVote} aria-label=\"Vote Up\">\r\n                                <ThumbUpIcon/>\r\n                            </IconButton>\r\n                            {this.state.up}\r\n                            <IconButton onClick={this.submitDownVote} aria-label=\"Vote Down\">\r\n                                <ThumbDownIcon/>\r\n                            </IconButton>\r\n                            {this.state.down}\r\n                        </CardActions>\r\n                    </Card>\r\n                </Grid>\r\n                <RepliesBodyStyled threadAddr={this.props.match.params.threadAddr}/>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(ThreadBody);\r\n\r\n","import React, {Component} from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport {Link, Redirect} from 'react-router-dom';\r\n\r\nimport {Button, withStyles} from '@material-ui/core';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport GoogleOAuth from '../Plugin/GoogleOAuth';\r\nimport forumAjaxAdapter from '../Adapters/ForumAjaxAdapter';\r\n\r\nconst styles = theme => ({\r\n    gridContainer: {\r\n        flexGrow: 1,\r\n        marginTop: 20,\r\n    },\r\n    gridItem: {\r\n        height: '40%',\r\n        width: '40%',\r\n        marginBottom: 10\r\n    },\r\n    paper: {\r\n        ...theme.mixins.gutters(),\r\n        paddingTop: theme.spacing.unit * 2,\r\n        paddingBottom: theme.spacing.unit * 2,\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n    },\r\n    checkbox: {\r\n        width: '100%',\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n    },\r\n    submitBtn: {\r\n        margin: '0 auto'\r\n    },\r\n    sendIcon: {\r\n        marginLeft: theme.spacing.unit\r\n    }\r\n});\r\n\r\n@inject('navState', 'googleOAuthState', 'notificationSnackState')\r\nclass Registration extends Component {\r\n    state = {\r\n        aggered: false,\r\n        inputUsername: '',\r\n        inputError: false,\r\n        disableBtn: false,\r\n        disableCheckbox: false,\r\n        disableInput: false\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {navState, googleOAuthState, notificationSnackState} = this.props;\r\n        navState.updateNavTitle();\r\n        if (googleOAuthState.isSignedIn && !googleOAuthState.isRegistered) {\r\n            notificationSnackState.triggerOpen('Please complete the registration. Thanks.');\r\n        }\r\n    }\r\n\r\n    inputUsernameChange = event => {\r\n        this.setState({inputUsername: event.target.value, inputError: false});\r\n    };\r\n\r\n    checkboxChange = event => {\r\n        this.setState({aggered: event.target.checked});\r\n    };\r\n\r\n    handleBtnSubmit = async event => {\r\n        const {history, googleOAuthState, notificationSnackState} = this.props;\r\n        if (this.state.inputUsername) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        const username = this.state.inputUsername.trim();\r\n        if (!username) {\r\n            this.setState({inputError: true});\r\n            notificationSnackState.triggerOpen('Username cannot contain space only!');\r\n            return;\r\n        }\r\n        this.setState({disableBtn: true, disableCheckbox: true, disableInput: true});\r\n\r\n        const keyPair = GoogleOAuth.createKeyPair();\r\n        const publicKeyBase64 = Buffer.from(keyPair.publicKey).toString('base64');\r\n        const date = new Date().getTime().toString();\r\n        const buf = Buffer.concat([\r\n            Buffer.from(username, 'utf8'),\r\n            Buffer.from(keyPair.publicKey),\r\n            Buffer.from(date, 'utf8')\r\n        ]);\r\n        const signBase64 = GoogleOAuth.signSignature(buf, keyPair.secretKey);\r\n\r\n        // const checkOAuth = await GoogleOAuth.userPrepare();\r\n        // if (!checkOAuth) {\r\n        const ucRes = await forumAjaxAdapter.submitNewUserContract(username, publicKeyBase64, date, signBase64);\r\n        console.log(ucRes);\r\n        await GoogleOAuth.register(username, keyPair, date, ucRes.data.hash);\r\n        googleOAuthState.isRegistered = true;\r\n        googleOAuthState.setUserInfo(GoogleOAuth.getUserInfo());\r\n        notificationSnackState.triggerOpen('Registration succeeded!');\r\n        // }\r\n        history.push('/');\r\n    };\r\n\r\n    render() {\r\n        const {classes, googleOAuthState} = this.props;\r\n        if (!googleOAuthState.isSignedIn || googleOAuthState.isRegistered) {\r\n            return <Redirect to=\"/\"/>;\r\n        }\r\n        return (\r\n            <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\"\r\n                  className={classes.gridContainer}>\r\n                <Grid item className={classes.gridItem}>\r\n                    <Paper elevation={24} square={true} className={classes.paper}>\r\n                        <Typography variant=\"h5\" align=\"center\">\r\n                            Registration\r\n                        </Typography>\r\n                        <Divider style={{marginTop: '2%'}}/>\r\n                        <form action=\"#\" className={classes.container} autoComplete=\"off\">\r\n                            <TextField\r\n                                label=\"Enter your username\"\r\n                                error={this.state.inputError}\r\n                                className={classes.textField}\r\n                                disabled={this.state.disableInput}\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                type=\"text\"\r\n                                fullWidth\r\n                                required\r\n                                onChange={this.inputUsernameChange}\r\n                            />\r\n\r\n                            <FormControlLabel className={classes.checkbox}\r\n                                              control={\r\n                                                  <Checkbox\r\n                                                      // checked={this.state.checkedA}\r\n                                                      onChange={this.checkboxChange}\r\n                                                      disabled={this.state.disableCheckbox}\r\n                                                  />\r\n                                              }\r\n                                              label={<div>I accept and agree to the <Link to={'/terms'}>Term of\r\n                                                  Service</Link>.</div>}\r\n                            />\r\n\r\n                            <Button disabled={!this.state.aggered || this.state.disableBtn} type=\"submit\"\r\n                                    variant=\"contained\"\r\n                                    className={classes.submitBtn}\r\n                                    onClick={this.handleBtnSubmit}\r\n                                    color=\"primary\">\r\n                                Continue\r\n                                <SendIcon className={classes.sendIcon}/>\r\n                            </Button>\r\n                        </form>\r\n                    </Paper>\r\n                </Grid>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Registration);\r\n","const axios = require('axios');\r\nconst moment = require('moment');\r\n\r\nclass ForumAjaxAdapter {\r\n    constructor(host = 'localhost', port = '', useHttps = false) {\r\n        this.baseURL = `${useHttps ? 'https' : 'http'}://${host}${port ? ':' + port : port}/`;\r\n        if (useHttps) this.baseURL = `https://${host}/`;\r\n    }\r\n\r\n    async getRecentThreads() {\r\n        return (await axios.get(this.baseURL + 'api/recent-threads')).data;\r\n    }\r\n\r\n    async getThread(threadAddr) {\r\n        const queryParams = {threadAddr: threadAddr};\r\n        const data = (await axios.get(this.baseURL + 'api/thread', {params: queryParams})).data;\r\n        data.requestTime = moment(parseInt(data.requestTime));\r\n        return data;\r\n    }\r\n\r\n    async getUserInfo(userAddr) {\r\n        const queryParams = {userAddr: userAddr};\r\n        return (await axios.get(this.baseURL + 'api/user-info', {params: queryParams})).data;\r\n    }\r\n\r\n    async getRepliedPosts(threadAddr, page = 1, perPage = 100) {\r\n        const queryParams = {threadAddr: threadAddr, page: page, perPage: perPage};\r\n        const data = (await axios.get(this.baseURL + 'api/replied-posts', {params: queryParams})).data;\r\n        data.posts.map((val) => {\r\n            val.requestTime = moment(parseInt(val.requestTime));\r\n            return val;\r\n        });\r\n        return data;\r\n    }\r\n\r\n    async getRepliedPostsWithUserInfo(threadAddr, page = 1, perPage = 100) {\r\n        const res = (await this.getRepliedPosts(threadAddr, page, perPage));\r\n        if (!res) {\r\n            return {};\r\n        }\r\n        const allPromises = [];\r\n        res.posts.forEach((post) => {\r\n            allPromises.push(this.getUserInfo(post.userAddr));\r\n        });\r\n        const userInfos = await Promise.all(allPromises);\r\n        res.posts.map((val, index) => {\r\n            val.userInfo = userInfos[index];\r\n            delete val.userInfo.publicKeyBase64;\r\n            return val;\r\n        });\r\n        return res;\r\n    }\r\n\r\n    async getTotalVoted(threadAddr) {\r\n        const queryParams = {threadAddr: threadAddr};\r\n        return (await axios.get(this.baseURL + 'api/total-voted', {params: queryParams})).data;\r\n    }\r\n\r\n    submitNewUserContract(username, publicKey, requestTime, signature) {\r\n        return axios.post(this.baseURL + 'api/new-user-contract', {username, publicKey, requestTime, signature});\r\n    }\r\n\r\n    submitNewThread(authorAddr, threadTitle, threadContent, requestTime, signature) {\r\n        return axios.post(this.baseURL + 'api/new-thread', {\r\n            authorAddr,\r\n            threadTitle,\r\n            threadContent,\r\n            requestTime,\r\n            signature\r\n        });\r\n    }\r\n\r\n    submitNewReply(userAddr, threadAddr, postContent, requestTime, signature) {\r\n        return axios.post(this.baseURL + 'api/new-reply-post', {\r\n            userAddr,\r\n            threadAddr,\r\n            postContent,\r\n            requestTime,\r\n            signature\r\n        });\r\n    }\r\n\r\n    submitNewVote(userAddr, threadAddr, vote, requestTime, signature) {\r\n        return axios.post(this.baseURL + 'api/new-vote', {\r\n            userAddr,\r\n            threadAddr,\r\n            vote,\r\n            requestTime,\r\n            signature\r\n        });\r\n    }\r\n}\r\n\r\nexport default new ForumAjaxAdapter('vv.nathanlam11.tk/fyp', '', true);\r\n// export default new ForumAjaxAdapter('localhost', '8099');","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit http://bit.ly/CRA-PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","import {observable, action, computed} from 'mobx';\r\n\r\nclass NavState {\r\n    @observable navTitle = '';\r\n    @observable indexTitleMode = true;\r\n    @observable createReplyBtnState = '';\r\n\r\n    @action.bound updateNavTitle(title = '') {\r\n        this.navTitle = title;\r\n    }\r\n\r\n    @action.bound setIndexTitleMode(bool) {\r\n        this.indexTitleMode = bool;\r\n    }\r\n\r\n    @action.bound setCreateBtnState() {\r\n        this.createReplyBtnState = 'add';\r\n    }\r\n\r\n    @action.bound setReplyBtnState() {\r\n        this.createReplyBtnState = 'reply';\r\n    }\r\n\r\n    @action.bound clearCreateReplyBtnState() {\r\n        this.createReplyBtnState = '';\r\n    }\r\n\r\n    @action.bound createReplyBtnClick() {\r\n        console.log('createReplyBtnClick');\r\n    }\r\n\r\n    @computed get getModalEditorTitle() {\r\n        if (this.createReplyBtnState === 'add') return 'New Thread:';\r\n        else if (this.createReplyBtnState === 'reply') return 'New Reply:';\r\n        return '';\r\n    }\r\n\r\n    @computed get getModalEditorBtnTxt() {\r\n        if (this.createReplyBtnState === 'add') return 'Create';\r\n        else if (this.createReplyBtnState === 'reply') return 'Reply';\r\n        return '';\r\n    }\r\n}\r\n\r\nexport default NavState;","import {observable, action, computed} from 'mobx';\r\n\r\nimport GoogleOAuth from '../Plugin/GoogleOAuth';\r\n\r\nclass GoogleOAuthState {\r\n    @observable signinStatus = '';\r\n    @observable loginBtnStr = '';\r\n    @observable isSignedIn = false;\r\n    @observable isRegistered = false;\r\n    @observable userInfo = {username: '', userAddr: '', createTime: '', publicKeyBuff: null};\r\n\r\n    @action.bound setUserInfo({username = '', userAddr = '', createTime = '', publicKeyBuff = null}) {\r\n        this.userInfo.username = username;\r\n        this.userInfo.userAddr = userAddr;\r\n        this.userInfo.createTime = createTime;\r\n        this.userInfo.publicKeyBuff = publicKeyBuff;\r\n    }\r\n\r\n    @action.bound onLoginSuccess() {\r\n        this.signinStatus = 'You are currently signed in and have granted access to this app.';\r\n        this.loginBtnStr = 'Logout';\r\n        this.isSignedIn = true;\r\n    }\r\n\r\n    @action.bound onLoggedOut() {\r\n        this.signinStatus = 'You have not authorized this app or you are signed out.';\r\n        this.loginBtnStr = 'Login';\r\n        this.isSignedIn = false;\r\n    }\r\n\r\n    @action.bound onClickOAuth() {\r\n        GoogleOAuth.handleAuthClick();\r\n    }\r\n\r\n    @action.bound clearState() {\r\n        this.signinStatus = '';\r\n        this.loginBtnStr = 'Login';\r\n        this.isSignedIn = false;\r\n        this.isRegistered = false;\r\n        this.userInfo = {username: '', userAddr: '', createTime: '', publicKeyBuff: null};\r\n    }\r\n}\r\n\r\nexport default GoogleOAuthState;","import {observable, action, computed} from 'mobx';\r\n\r\nclass CreateReplyActionState {\r\n    @observable isModalEditorOpen = false;\r\n\r\n    @action.bound setModalEditorOpen() {\r\n        this.isModalEditorOpen = true;\r\n    }\r\n\r\n    @action.bound setModalEditorClose() {\r\n        this.isModalEditorOpen = false;\r\n    }\r\n}\r\n\r\nexport default CreateReplyActionState;","import {observable, action, computed} from 'mobx';\r\n\r\nclass ThreadListState {\r\n    @action.bound bindUpdateThreadListFunc(func) {\r\n        this.updateThreadListFunc = func;\r\n    }\r\n\r\n    @action.bound callUpdateThreadList() {\r\n        if (this.updateThreadListFunc) this.updateThreadListFunc();\r\n    }\r\n}\r\n\r\nexport default ThreadListState;","import {observable, action, computed} from 'mobx';\r\n\r\nclass ThreadBodyState {\r\n    @observable threadAddr = '';\r\n\r\n    @action.bound setThreadAddr(threadAddr) {\r\n        this.threadAddr = threadAddr;\r\n    }\r\n\r\n    @action.bound bindUpdateThreadBodyFunc(func) {\r\n        this.updateThreadBodyFunc = func;\r\n    }\r\n\r\n    @action.bound callUpdateThreadBody() {\r\n        if (this.updateThreadBodyFunc) this.updateThreadBodyFunc();\r\n    }\r\n}\r\n\r\nexport default ThreadBodyState;","import {observable, action, computed} from 'mobx';\r\n\r\nclass NotificationSnackState {\r\n    @observable open = false;\r\n    @observable message = '';\r\n\r\n    @action.bound triggerOpen(msg = '') {\r\n        this.message = msg;\r\n        this.open = true;\r\n    }\r\n\r\n    @action.bound handleClose() {\r\n        this.open = false;\r\n    };\r\n\r\n    @action.bound showUnknownError() {\r\n        this.triggerOpen('Sorry! An error occurred.');\r\n    }\r\n}\r\n\r\nexport default NotificationSnackState;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\n\r\nimport '../Styles/GoogleOAuthStyle.css';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport GoogleOAuth from '../Plugin/GoogleOAuth';\r\n\r\nconst styles = {\r\n    list: {\r\n        width: 250,\r\n    },\r\n    fullList: {\r\n        width: 'auto',\r\n    },\r\n    menuButton: {\r\n        marginLeft: -12,\r\n    },\r\n};\r\n\r\n@inject('googleOAuthState')\r\n@observer\r\nclass LoginButton extends React.Component {\r\n\r\n    handleOAuthLoginOut = () => {\r\n        const {googleOAuthState} = this.props;\r\n        GoogleOAuth.clearState();\r\n        googleOAuthState.clearState();\r\n        googleOAuthState.onClickOAuth();\r\n    };\r\n\r\n    render() {\r\n        const {googleOAuthState} = this.props;\r\n        if (googleOAuthState.loginBtnStr === 'Logout') {\r\n            return <Button variant=\"contained\" color=\"secondary\" onClick={this.handleOAuthLoginOut}>\r\n                <PowerSettingsNewIcon/>\r\n                {googleOAuthState.loginBtnStr}\r\n            </Button>;\r\n        }\r\n        if (googleOAuthState.loginBtnStr === 'Login') {\r\n            return <Button style={{textTransform: \"none\"}} onClick={this.handleOAuthLoginOut} className=\"google-button\">\r\n  <span className=\"google-button__icon\">\r\n    <svg viewBox=\"0 0 366 372\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path\r\n            d=\"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z\"\r\n            id=\"Shape\" fill=\"#EA4335\"/>\r\n        <path\r\n            d=\"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z\"\r\n            id=\"Shape\" fill=\"#FBBC05\"/>\r\n        <path\r\n            d=\"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z\"\r\n            id=\"Shape\" fill=\"#4285F4\"/>\r\n        <path\r\n            d=\"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z\"\r\n            fill=\"#34A853\"/>\r\n        </svg>\r\n  </span>\r\n                <span className=\"google-button__text\">Sign in with Google</span>\r\n            </Button>;\r\n        }\r\n        return '';\r\n    }\r\n}\r\n\r\n@inject('googleOAuthState')\r\n@observer\r\nclass TemporaryDrawer extends React.Component {\r\n    state = {\r\n        isOpened: this.props.isOpened\r\n    };\r\n\r\n    toggleDrawer = (open) => () => {\r\n        this.setState({\r\n            isOpened: open,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {classes, googleOAuthState} = this.props;\r\n        const showProfileItem = googleOAuthState.isRegistered ? (\r\n            <ListItem button key=\"Profile\" component={props => <Link to=\"/profile\" {...props} />}>\r\n                <ListItemIcon><AccountBoxIcon/></ListItemIcon>\r\n                <ListItemText primary=\"Profile\"/>\r\n            </ListItem>\r\n        ) : '';\r\n        return (\r\n            <div>\r\n                <IconButton className={classes.menuButton} onClick={this.toggleDrawer(true)} color=\"inherit\"\r\n                            aria-label=\"Menu\">\r\n                    <MenuIcon/>\r\n                </IconButton>\r\n                <Drawer open={this.state.isOpened} onClose={this.toggleDrawer(false)}>\r\n                    <div\r\n                        tabIndex={0}\r\n                        role=\"button\"\r\n                        onClick={this.toggleDrawer(false)}\r\n                        onKeyDown={this.toggleDrawer(false)}\r\n                    >\r\n                        <div className={classes.list}>\r\n                            <List>\r\n                                {showProfileItem}\r\n                                <ListItem button key=\"About\" component={props => <Link to=\"/about\" {...props} />}>\r\n                                    <ListItemIcon><HelpIcon/></ListItemIcon>\r\n                                    <ListItemText primary=\"About\"/>\r\n                                </ListItem>\r\n                                <ListItem button key=\"Terms of Service\"\r\n                                          component={props => <Link to=\"/terms\" {...props} />}>\r\n                                    <ListItemIcon><InfoIcon/></ListItemIcon>\r\n                                    <ListItemText primary=\"Terms of Service\"/>\r\n                                </ListItem>\r\n                            </List>\r\n                        </div>\r\n                    </div>\r\n                    <Divider/>\r\n                    <Grid container direction=\"column\" justify=\"space-between\" alignItems=\"center\"\r\n                          style={{padding: 20}}>\r\n                        <Grid item>\r\n                            <LoginButton/>\r\n                        </Grid>\r\n                        <Grid item style={{position: 'absolute', bottom: '3%'}}>\r\n                            <Typography component=\"p\" color=\"textSecondary\" align=\"center\">\r\n                                 2019 fyp.nathanlam11.tk.\r\n                            </Typography>\r\n                            <Typography component=\"p\" color=\"textSecondary\" align=\"center\">\r\n                                All rights reserved.\r\n                            </Typography>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nTemporaryDrawer.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(TemporaryDrawer);\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nimport {withStyles} from \"@material-ui/core\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport WysiwygEditor from \"./WysiwygEditor\";\r\n\r\nconst styles = theme => ({\r\n    paper: {\r\n        position: 'absolute',\r\n        width: theme.spacing.unit * 100,\r\n        maxWidth: '100%',\r\n        minHeight: theme.spacing.unit * 60,\r\n        maxHeight: '90%',\r\n        backgroundColor: theme.palette.background.paper,\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing.unit * 4,\r\n        outline: 'none',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)',\r\n    },\r\n    sendIcon: {\r\n        marginLeft: theme.spacing.unit\r\n    },\r\n    closeBtn: {\r\n        float: 'right'\r\n    }\r\n});\r\n\r\n\r\n@inject('navState', 'createReplyActionState')\r\n@observer\r\nclass CreateReplyModal extends Component {\r\n    render() {\r\n        const {classes, navState, createReplyActionState} = this.props;\r\n        return (\r\n            <Modal\r\n                aria-labelledby=\"simple-modal-title\"\r\n                aria-describedby=\"simple-modal-description\"\r\n                open={createReplyActionState.isModalEditorOpen}\r\n                onClose={createReplyActionState.setModalEditorClose}\r\n            >\r\n                <Paper elevation={1} square className={classes.paper}>\r\n                    <IconButton className={classes.closeBtn} onClick={createReplyActionState.setModalEditorClose}>\r\n                        <CloseIcon/>\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" id=\"modal-title\">\r\n                        {navState.getModalEditorTitle}\r\n                    </Typography>\r\n                    <WysiwygEditor/>\r\n                </Paper>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(CreateReplyModal);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {withRouter, Link} from \"react-router-dom\";\r\n\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport {blue, pink} from '@material-ui/core/colors';\r\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\r\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\nimport Zoom from '@material-ui/core/Zoom';\r\n\r\nimport TempDrawer from './TempDrawer';\r\nimport logo from '../Icons/logox.svg';\r\nimport CreateReplyModalCombo from '../Components/CreateReplyModalCombo';\r\n\r\nconst muiThemeX = createMuiTheme({\r\n    palette: {\r\n        primary: blue\r\n    }\r\n});\r\n\r\nconst styles = theme => ({\r\n    appBar: {\r\n        color: pink,\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    grow: {\r\n        flexGrow: 1,\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle'\r\n    },\r\n    menuButton: {\r\n        marginLeft: -12,\r\n        // marginRight: 20,\r\n    },\r\n    fab: {\r\n        position: 'fixed',\r\n        margin: theme.spacing.unit,\r\n        bottom: theme.spacing.unit * 3,\r\n        right: theme.spacing.unit * 1,\r\n        zIndex: 1000\r\n    }\r\n});\r\n\r\n@inject('googleOAuthState', 'navState', 'createReplyActionState', 'threadListState')\r\n@observer\r\nclass ButtonAppBar extends React.Component {\r\n    state = {};\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    render() {\r\n        const {classes, navState, googleOAuthState, createReplyActionState, threadListState} = this.props;\r\n        let titlePart = (\r\n            <Grid item>\r\n                <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                    {navState.navTitle}\r\n                </Typography>\r\n            </Grid>\r\n        );\r\n        if (!navState.indexTitleMode) titlePart = (\r\n            <Grid item xs={9}>\r\n                <IconButton color=\"inherit\" style={{marginRight: 10}} onClick={this.props.history.goBack}>\r\n                    <ArrowBackIcon/>\r\n                </IconButton>\r\n                <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                    {navState.navTitle}\r\n                </Typography>\r\n            </Grid>\r\n        );\r\n        let createReplyBtn = '';\r\n        if (googleOAuthState.isRegistered && navState.createReplyBtnState === 'add') {\r\n            createReplyBtn = (\r\n                <Zoom\r\n                    key='primary'\r\n                    in={true}\r\n                    unmountOnExit\r\n                >\r\n                    <Fab color=\"primary\" size='medium' aria-label=\"Add\" className={classes.fab}\r\n                         onClick={createReplyActionState.setModalEditorOpen}>\r\n                        <AddIcon/>\r\n                    </Fab>\r\n                </Zoom>\r\n            );\r\n        } else if (googleOAuthState.isRegistered && navState.createReplyBtnState === 'reply') {\r\n            createReplyBtn = (\r\n                <Zoom\r\n                    key='secondary'\r\n                    in={true}\r\n                    unmountOnExit\r\n                >\r\n                    <Fab color=\"secondary\" size='medium' aria-label=\"Reply\" className={classes.fab}\r\n                         onClick={createReplyActionState.setModalEditorOpen}>\r\n                        <ReplyIcon/>\r\n                    </Fab>\r\n                </Zoom>\r\n            );\r\n        }\r\n        return (\r\n            <MuiThemeProvider theme={muiThemeX}>\r\n                <div className={classes.root}>\r\n                    <AppBar position=\"static\" elevation={10} className={classes.appBar}>\r\n                        <Toolbar>\r\n                            <Grid container spacing={0} justify=\"space-between\" alignItems=\"center\">\r\n                                <Grid item>\r\n                                    <TempDrawer/>\r\n                                </Grid>\r\n                                {titlePart}\r\n                                <Grid item>\r\n                                    <Link onClick={threadListState.callUpdateThreadList} to='/'><img src={logo} style={{\r\n                                        maxWidth: '45px',\r\n                                        verticalAlign: 'middle'\r\n                                    }}\r\n                                                                                                     alt=\"logo\"/></Link>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Toolbar>\r\n                    </AppBar>\r\n                    {createReplyBtn}\r\n                </div>\r\n                <CreateReplyModalCombo/>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nButtonAppBar.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withRouter(withStyles(styles)(ButtonAppBar));\r\n","import React, {Component} from 'react';\nimport {inject, observer} from 'mobx-react';\nimport {Redirect} from \"react-router-dom\";\n\nimport './App.css';\n\nimport GoogleOAuth from './Plugin/GoogleOAuth';\nimport forumAjaxAdapter from './Adapters/ForumAjaxAdapter';\n\n@inject('googleOAuthState')\nclass App extends Component {\n\n    state = {\n        isRedirectRegistration: false\n    };\n\n    componentWillMount() {\n        const googleOAuthState = this.props.googleOAuthState;\n        GoogleOAuth.init((isPass) => {\n            if (isPass) {\n                googleOAuthState.onLoginSuccess();\n                GoogleOAuth.userPrepare().then((isRegistered) => {\n                    // console.log(isRegistered);\n                    // console.log(GoogleOAuth.isRegistered());\n                    // console.log(GoogleOAuth.getUserInfo());\n\n                    // googleOAuthState.isRegistered = isRegistered;\n                    // googleOAuthState.setUserInfo(GoogleOAuth.getUserInfo());\n                    // this.setState({isRedirectRegistration: !isRegistered});\n\n                    if (isRegistered) {\n                        // googleOAuthState.isRegistered = isRegistered;\n                        // googleOAuthState.setUserInfo(GoogleOAuth.getUserInfo());\n                        // this.setState({isRedirectRegistration: !isRegistered});\n                        forumAjaxAdapter.getUserInfo(GoogleOAuth.getUserInfo().userAddr)\n                            .then(() => {\n                                googleOAuthState.isRegistered = isRegistered;\n                                googleOAuthState.setUserInfo(GoogleOAuth.getUserInfo());\n                                this.setState({isRedirectRegistration: !isRegistered});\n                            })\n                            .catch((e) => {\n                                if (e.response.data.error.message === 'Tx not found') {\n                                    googleOAuthState.isRegistered = false;\n                                    this.setState({isRedirectRegistration: true});\n                                }\n                            });\n                    } else {\n                        googleOAuthState.isRegistered = isRegistered;\n                        this.setState({isRedirectRegistration: !isRegistered});\n                    }\n\n                });\n            } else {\n                googleOAuthState.onLoggedOut();\n            }\n        });\n    }\n\n    render() {\n        const {classes} = this.props;\n        if (this.state.isRedirectRegistration) {\n            return <Redirect to=\"/registration\"/>;\n        }\n        return '';\n    }\n}\n\nexport default App;\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withRouter, Link, Redirect} from \"react-router-dom\";\r\nimport classNames from 'classnames';\r\nimport {inject, observer} from 'mobx-react';\r\nimport moment from 'moment';\r\nimport {Skeleton} from 'antd';\r\n\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport {AutoSizer, Column, SortDirection, Table} from 'react-virtualized';\r\n\r\nimport forumAjaxAdapter from '../Adapters/ForumAjaxAdapter';\r\n\r\nconst styles = theme => ({\r\n    root: {},\r\n    table: {\r\n        fontFamily: theme.typography.fontFamily,\r\n    },\r\n    flexContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        boxSizing: 'border-box',\r\n    },\r\n    tableRow: {\r\n        cursor: 'pointer',\r\n    },\r\n    tableRowHover: {\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.grey[200],\r\n        },\r\n    },\r\n    tableCell: {\r\n        flex: 1,\r\n    },\r\n    noClick: {\r\n        cursor: 'initial',\r\n    },\r\n    paper: {\r\n        height: 'calc(100vh - 56px)',\r\n        [`${theme.breakpoints.up('xs')} and (orientation: landscape)`]: {\r\n            height: 'calc(100vh - 48px)',\r\n        },\r\n        [theme.breakpoints.up('sm')]: {\r\n            height: 'calc(100vh - 64px)',\r\n        },\r\n        width: theme.spacing.unit * 140,\r\n        maxWidth: '100%'\r\n    }\r\n});\r\n\r\nclass MuiVirtualizedTable extends React.PureComponent {\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    getRowClassName = ({index}) => {\r\n        const {classes, rowClassName, onRowClick} = this.props;\r\n\r\n        return classNames(classes.tableRow, classes.flexContainer, rowClassName, {\r\n            [classes.tableRowHover]: index !== -1 && onRowClick != null,\r\n        });\r\n    };\r\n\r\n    cellRenderer = ({cellData, columnIndex = null}) => {\r\n        const {columns, classes, rowHeight, onRowClick} = this.props;\r\n        const dataOrSkeleton = this.props.loadSuccess ? cellData : (\r\n            <Skeleton active title={{width: '100%'}} paragraph={{rows: 0, marginTop: 0}}/>);\r\n        return (\r\n            <TableCell\r\n                component=\"div\"\r\n                className={classNames(classes.tableCell, classes.flexContainer, {\r\n                    [classes.noClick]: onRowClick == null,\r\n                })}\r\n                variant=\"body\"\r\n                style={{height: rowHeight}}\r\n                align={(columnIndex != null && columns[columnIndex].numeric) || false ? 'right' : 'left'}\r\n            >\r\n                {/*{cellData}*/}\r\n                {/*<Skeleton active title={{width: '100%'}} paragraph={{rows: 0, marginTop: 0}}/>*/}\r\n                {dataOrSkeleton}\r\n            </TableCell>\r\n        );\r\n    };\r\n\r\n    headerRenderer = ({label, columnIndex, dataKey, sortBy, sortDirection}) => {\r\n        const {headerHeight, columns, classes, sort} = this.props;\r\n        const direction = {\r\n            [SortDirection.ASC]: 'asc',\r\n            [SortDirection.DESC]: 'desc',\r\n        };\r\n\r\n        const inner =\r\n            !columns[columnIndex].disableSort && sort != null ? (\r\n                <TableSortLabel active={dataKey === sortBy} direction={direction[sortDirection]}>\r\n                    {label}\r\n                </TableSortLabel>\r\n            ) : (\r\n                label\r\n            );\r\n\r\n        return (\r\n            <TableCell\r\n                component=\"div\"\r\n                className={classNames(classes.tableCell, classes.flexContainer, classes.noClick)}\r\n                variant=\"head\"\r\n                style={{height: headerHeight}}\r\n                align={columns[columnIndex].numeric || false ? 'right' : 'left'}\r\n            >\r\n                {inner}\r\n            </TableCell>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {classes, columns, ...tableProps} = this.props;\r\n        return (\r\n            <AutoSizer>\r\n                {({height, width}) => (\r\n                    <Table\r\n                        className={classes.table}\r\n                        height={height}\r\n                        width={width}\r\n                        {...tableProps}\r\n                        rowClassName={this.getRowClassName}\r\n                    >\r\n\r\n\r\n                        {columns.map(({cellContentRenderer = null, className, dataKey, ...other}, index) => {\r\n                            let renderer;\r\n                            if (cellContentRenderer != null) {\r\n                                renderer = cellRendererProps =>\r\n                                    this.cellRenderer({\r\n                                        cellData: cellContentRenderer(cellRendererProps),\r\n                                        columnIndex: index,\r\n                                    });\r\n                            } else {\r\n                                renderer = this.cellRenderer;\r\n                            }\r\n\r\n                            return (\r\n                                <Column\r\n                                    key={dataKey}\r\n                                    headerRenderer={headerProps =>\r\n                                        this.headerRenderer({\r\n                                            ...headerProps,\r\n                                            columnIndex: index,\r\n                                        })\r\n                                    }\r\n                                    className={classNames(classes.flexContainer, className)}\r\n                                    cellRenderer={renderer}\r\n                                    dataKey={dataKey}\r\n                                    {...other}\r\n                                />\r\n                            );\r\n                        })}\r\n\r\n                    </Table>\r\n                )}\r\n            </AutoSizer>\r\n        );\r\n    }\r\n}\r\n\r\nMuiVirtualizedTable.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    columns: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            cellContentRenderer: PropTypes.func,\r\n            dataKey: PropTypes.string.isRequired,\r\n            width: PropTypes.number.isRequired,\r\n        }),\r\n    ).isRequired,\r\n    headerHeight: PropTypes.number,\r\n    onRowClick: PropTypes.func,\r\n    rowClassName: PropTypes.string,\r\n    rowHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n    sort: PropTypes.func,\r\n};\r\n\r\nMuiVirtualizedTable.defaultProps = {\r\n    headerHeight: 56,\r\n    rowHeight: 56,\r\n};\r\n\r\nconst WrappedVirtualizedTable = withStyles(styles)(MuiVirtualizedTable);\r\n\r\n@inject('navState', 'threadListState')\r\nclass ReactVirtualizedTable extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        props.threadListState.bindUpdateThreadListFunc(this.updateThreadList);\r\n    }\r\n\r\n    state = {\r\n        loadSuccess: false,\r\n        rows: Array(10).fill('')\r\n    };\r\n\r\n    updateThreadList = () => {\r\n        const {createReplyBtnState} = this.props.navState;\r\n        if (createReplyBtnState === 'add') {\r\n            this.setState({loadSuccess: false, rows: Array(10).fill('')});\r\n            const timeout = new Promise(resolve => setTimeout(resolve, 200));\r\n            Promise.all([timeout, forumAjaxAdapter.getRecentThreads()]).then((res) => {\r\n                res[1].map((val) => {\r\n                    val.requestTime = moment(parseInt(val.requestTime)).calendar();\r\n                    return val;\r\n                });\r\n                this.setState({loadSuccess: true, rows: res[1]});\r\n            });\r\n        }\r\n    };\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const navState = this.props.navState;\r\n        navState.setIndexTitleMode(true);\r\n        navState.updateNavTitle('Threads');\r\n        navState.setCreateBtnState();\r\n        this.updateThreadList();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const navState = this.props.navState;\r\n        navState.updateNavTitle();\r\n        navState.clearCreateReplyBtnState();\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        const rows = this.state.rows;\r\n        return (\r\n            <Grid container justify=\"center\" alignItems=\"center\">\r\n                <Paper elevation={24} square className={classes.paper}>\r\n                    {/*<Skeleton active title={true} paragraph={{ rows: 0 }}/>*/}\r\n                    <WrappedVirtualizedTable\r\n                        loadSuccess={this.state.loadSuccess}\r\n                        rowCount={rows.length}\r\n                        rowGetter={({index}) => rows[index]}\r\n                        onRowClick={event => this.props.history.push(`/thread/${event.rowData.threadAddr}`)}\r\n                        columns={[\r\n                            {\r\n                                // maxWidth:'100%',\r\n                                width: 120,\r\n                                flexGrow: 1.0,\r\n                                label: 'Title',\r\n                                dataKey: 'threadTitle',\r\n                            },\r\n                            {\r\n                                width: 100,\r\n                                label: 'Vote',\r\n                                dataKey: 'totalVote',\r\n                                numeric: true,\r\n                            },\r\n                            {\r\n                                width: 100,\r\n                                label: 'Replies',\r\n                                dataKey: 'totalReplies',\r\n                                numeric: true,\r\n                            },\r\n                            {\r\n                                width: 100,\r\n                                label: 'Author',\r\n                                dataKey: 'authorName',\r\n                            },\r\n                            {\r\n                                width: 150,\r\n                                label: 'Time',\r\n                                dataKey: 'requestTime',\r\n                            },\r\n                        ]}\r\n                    />\r\n                </Paper>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(withRouter(ReactVirtualizedTable));","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {inject, observer} from 'mobx-react';\r\n\r\n\r\nimport {Button, withStyles} from \"@material-ui/core\";\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst styles = theme => ({\r\n    close: {\r\n        padding: theme.spacing.unit / 2,\r\n    },\r\n    snackbar: {\r\n        top: theme.spacing.unit\r\n    }\r\n});\r\n\r\n\r\n@inject('notificationSnackState')\r\n@observer\r\nclass NotificationSnack extends Component {\r\n    render() {\r\n        const {classes, notificationSnackState} = this.props;\r\n        return (\r\n            <Snackbar\r\n                autoHideDuration={5000}\r\n                className={classes.snackbar}\r\n                anchorOrigin={{vertical: 'top', horizontal: 'right'}}\r\n                open={notificationSnackState.open}\r\n                onClose={notificationSnackState.handleClose}\r\n                ContentProps={{\r\n                    'aria-describedby': 'message-id',\r\n                }}\r\n                message={notificationSnackState.message}\r\n                action={[\r\n                    <Button key=\"gotit\" color=\"secondary\" size=\"small\" onClick={notificationSnackState.handleClose}>\r\n                        Got It!\r\n                    </Button>,\r\n                    <IconButton\r\n                        key=\"close\"\r\n                        aria-label=\"Close\"\r\n                        color=\"inherit\"\r\n                        className={classes.close}\r\n                        onClick={notificationSnackState.handleClose}\r\n                    >\r\n                        <CloseIcon/>\r\n                    </IconButton>,\r\n                ]}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(NotificationSnack);","import React, {Component} from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport {Link, Redirect, withRouter} from 'react-router-dom';\r\n\r\nimport {withStyles} from '@material-ui/core';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nconst styles = theme => ({\r\n    paper: {\r\n        padding: theme.spacing.unit * 3,\r\n        // marginTop: theme.spacing.unit * 2,\r\n        width: theme.spacing.unit * 100,\r\n        maxWidth: '100%',\r\n    }\r\n});\r\n\r\nclass About extends Component {\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <Grid container justify=\"center\" alignItems=\"center\">\r\n                <Paper className={classes.paper} square elevation={10}>\r\n                    <Typography variant=\"h4\" component=\"h4\" align=\"center\">\r\n                        About\r\n                    </Typography>\r\n                    <Divider/>\r\n                    <Typography paragraph component=\"p\"/>\r\n                    <Typography paragraph component=\"p\"/>\r\n                </Paper>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(About);","import React, {Component} from 'react';\r\n\r\nimport {withStyles} from '@material-ui/core';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nconst styles = theme => ({\r\n    paper: {\r\n        padding: theme.spacing.unit * 3,\r\n        // marginTop: theme.spacing.unit * 2,\r\n        width: theme.spacing.unit * 140,\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n    }\r\n});\r\n\r\nclass Terms extends Component {\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <Grid container justify=\"center\" alignItems=\"center\">\r\n                <Paper className={classes.paper} square elevation={10}>\r\n                    <Typography variant=\"h4\" component=\"h4\" align=\"center\">\r\n                        Terms of Service and Disclaimer\r\n                    </Typography>\r\n                    <Divider/>\r\n                    <Typography paragraph component=\"p\"/>\r\n                    <Typography paragraph component=\"p\"/>\r\n\r\n                    <ol style={{fontWeight: 'bold'}}>\r\n                        <li>\r\n                            <Typography paragraph component=\"p\">\r\n                                <strong>Acceptance of Terms</strong>\r\n                            </Typography>\r\n                            <Typography paragraph component=\"p\">\r\n                                Welcome to the forum <a href=\"http://fyp.nathanlam11.tk\">fyp.nathanlam11.tk</a>. It is\r\n                                also under the domain name <strong>nathanlam11.tk</strong> by Nathan Lam.\r\n                                This forum is a part of university final year project created by Nathan Lam\r\n                                which provides the service only for academic and evaluation purpose.\r\n                                The following are the terms and conditions for the use of this Forum.\r\n                            </Typography>\r\n                        </li>\r\n                        <li>\r\n                            <Typography paragraph component=\"p\">\r\n                                <strong>Description of use and service</strong>\r\n                            </Typography>\r\n                            <Typography paragraph component=\"p\">\r\n                                This forum is providing user with discussion through the Internet.\r\n                                You understand and agree that the service is only for academic and evaluation purpose.\r\n                                You also understand and agree that the service is provided to you on an \"as is\"\r\n                                basis. <a href=\"http://fyp.nathanlam11.tk\">fyp.nathanlam11.tk</a> disclaims\r\n                                any liability as a result of any data deletion,\r\n                                interruption or any failures or personalized settings. <a\r\n                                href=\"http://fyp.nathanlam11.tk\">fyp.nathanlam11.tk</a> reserves\r\n                                the right to without giving any prior notice to you deactivate any or all of the service\r\n                                (including user account, discussion threads and reply posts etc.)\r\n                                to maintain forum working normally that <a\r\n                                href=\"http://fyp.nathanlam11.tk\">fyp.nathanlam11.tk</a> thinks appropriate.\r\n                            </Typography>\r\n                        </li>\r\n                        <li>\r\n                            <Typography paragraph component=\"p\">\r\n                                <strong>Registration obligation of user</strong>\r\n                            </Typography>\r\n                            <Typography paragraph component=\"p\">\r\n                                In order to take part in the discussion on the forum, you agree to authorize your\r\n                                Google account and allow <a href=\"http://fyp.nathanlam11.tk\">fyp.nathanlam11.tk</a> to\r\n                                access your\r\n                                Google drive <strong>only for storing your registration information</strong> through\r\n                                Google OAuth and Google APIs. <a\r\n                                href=\"http://fyp.nathanlam11.tk\">fyp.nathanlam11.tk</a> disclaims\r\n                                any liability as a result of <strong>loss</strong> or leak your registration information\r\n                                because of improper user's operation or Google's policy.\r\n                            </Typography>\r\n                        </li>\r\n                        <li>\r\n                            <Typography paragraph component=\"p\">\r\n                                <strong>User behavior</strong>\r\n                            </Typography>\r\n                            <Typography paragraph component=\"p\">\r\n                                You understand and confirm that the third party content providers may be solely\r\n                                responsible for their\r\n                                information data, video, music, sound, graphics, photographs, text, news or other\r\n                                contents are posted publicly or\r\n                                transmitted privately and <a\r\n                                href=\"http://fyp.nathanlam11.tk\">fyp.nathanlam11.tk</a> takes no responsibility for\r\n                                those contents.\r\n                                You agree and undertake not to use the service for any of illegal, damaging, threatening\r\n                                and abusing\r\n                                privacy infringing, obscene, immoral, discriminating, indecent.\r\n                                <a href=\"http://fyp.nathanlam11.tk\">fyp.nathanlam11.tk</a> reserves the right to\r\n                                deactivate the user who are violate terms of use.\r\n                            </Typography>\r\n                        </li>\r\n                    </ol>\r\n                </Paper>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Terms);","import React, {Component} from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport {Card, withStyles} from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport FacetIcon from '@material-ui/icons/Face';\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\n\r\nimport moment from \"moment\";\r\nimport crypto from \"crypto\";\r\n\r\nconst styles = theme => ({\r\n    paper: {\r\n        padding: theme.spacing.unit * 5,\r\n        // marginTop: theme.spacing.unit * 2,\r\n        width: theme.spacing.unit * 100,\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n        maxWidth: '97%'\r\n    }\r\n});\r\n\r\n\r\n@inject('googleOAuthState')\r\n@observer\r\nclass Profile extends Component {\r\n    render() {\r\n        const {classes, googleOAuthState} = this.props;\r\n        if (!googleOAuthState.isRegistered) {\r\n            return <Redirect to=\"/\"/>;\r\n        }\r\n        const createDay = googleOAuthState.userInfo.createTime ? moment(parseInt(googleOAuthState.userInfo.createTime)).format(\"Do MMM YYYY\") : '';\r\n        const userId = googleOAuthState.userInfo.publicKeyBuff ? crypto.createHash('sha256').update(googleOAuthState.userInfo.publicKeyBuff).digest('hex') : '';\r\n        return (\r\n            <Grid container justify=\"center\" alignItems=\"center\">\r\n                <Card className={classes.paper} square elevation={10}>\r\n                    <Typography variant=\"h6\" component=\"h6\" align=\"center\">\r\n                        <FacetIcon style={{verticalAlign: 'sub'}}/> Profile\r\n                    </Typography>\r\n                    <Divider/>\r\n                    <CardHeader\r\n                        avatar={\r\n                            <Avatar aria-label=\"Recipe\">\r\n                                <PersonIcon/>\r\n                            </Avatar>\r\n                        }\r\n                        title={googleOAuthState.userInfo.username}\r\n                        subheader={'Registered on: ' + createDay}\r\n                    />\r\n                    <CardContent>\r\n                        <TextField\r\n                            label=\"User Address\"\r\n                            className={classes.textField}\r\n                            value={googleOAuthState.userInfo.userAddr}\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            variant=\"filled\"\r\n                            disabled\r\n                        />\r\n                        <TextField\r\n                            label=\"User ID\"\r\n                            className={classes.textField}\r\n                            value={userId}\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            variant=\"filled\"\r\n                            disabled\r\n                        />\r\n                    </CardContent>\r\n                </Card>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Profile);","import * as serviceWorker from './serviceWorker';\nimport React, {Fragment} from 'react';\nimport {Router, Route, Switch, Link} from 'react-router-dom'\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'mobx-react';\nimport {createBrowserHistory} from 'history'\nimport \"antd/dist/antd.css\";\n\nimport NavState from './Stores/NavState';\nimport GoogleOAuthState from './Stores/GoogleOAuthState';\nimport CreateReplyActionState from './Stores/CreateReplyActionState';\nimport ThreadListState from './Stores/ThreadListState';\nimport ThreadBodyState from './Stores/ThreadBodyState';\nimport NotificationSnackState from './Stores/NotificationSnackState';\n\n\nimport './index.css';\nimport Nav from './Layout/Nav';\nimport App from './App';\nimport ThreadList from './Contents/ThreadList';\nimport ThreadBody from './Contents/ThreadBody';\nimport Registration from './Contents/Registration';\nimport CreateReplyModalCombo from './Components/CreateReplyModalCombo';\nimport NotificationSnack from './Components/NotificationSnack';\nimport About from './Contents/About';\nimport Terms from './Contents/Terms';\nimport Profile from './Contents/Profile';\n\nconst stores = {\n    navState: new NavState(),\n    googleOAuthState: new GoogleOAuthState(),\n    createReplyActionState: new CreateReplyActionState(),\n    threadListState: new ThreadListState(),\n    threadBodyState: new ThreadBodyState(),\n    notificationSnackState: new NotificationSnackState()\n};\nconst history = createBrowserHistory({});\n\n\nclass SS extends React.Component {\n\n    render() {\n        const {classes} = this.props;\n        return (\n            <div>\n                <CreateReplyModalCombo/>\n            </div>\n        );\n    }\n}\n\n\nReactDOM.render((\n    <Provider {...stores}>\n        <Router history={history}>\n            <Fragment>\n                <App/>\n                <Nav/>\n                <NotificationSnack/>\n                <Switch>\n                    <Route path=\"/\" exact component={ThreadList}/>\n                    <Route path=\"/about\" component={About}/>\n                    <Route path=\"/profile\" component={Profile}/>\n                    <Route path=\"/terms\" component={Terms}/>\n                    <Route path=\"/registration\" component={Registration}/>\n                    <Route path=\"/thread/:threadAddr\" component={ThreadBody}/>\n                    <Route path=\"/SS\" component={SS}/>\n                </Switch>\n            </Fragment>\n        </Router>\n    </Provider>\n), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}